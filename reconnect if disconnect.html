<!DOCTYPE html>
<!-- saved from url=(0140)http://www.adrianandgenese.com/blogger/2016/09/29/nodemcu-esp8266-http-relay-control-with-12v-battery-monitor-and-wifi-configuration-part-2/ -->
<html lang="en-US"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width">
<title>NodeMCU ESP8266 http relay control with 12v battery monitor and wifi configuration – Part 2 | Be cheap and DIY:</title>
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="http://www.adrianandgenese.com/blogger/xmlrpc.php">
<!--[if lt IE 9]>
<script src="http://www.adrianandgenese.com/blogger/wp-content/themes/twentytwelve/js/html5.js" type="text/javascript"></script>
<![endif]-->

<!-- All in One SEO Pack 2.3.11 by Michael Torbert of Semper Fi Web Design[298,422] -->
<meta name="description" content="Use an ESP8266 NodeMCU board to monitor the voltage of a 12v battery, control a relay which turns a battery charger on or off, and configure the units wifi">

<meta name="keywords" content="12v,12v deep cycle,adc,analog read,battery,configure wifi using browser,dc,esp8266,http,led,monitoring,nodemcu,relay,tcp server,webpage,webserver,wifi access point,wifi client">

<!-- /all in one seo pack -->
<link rel="dns-prefetch" href="http://assets.pinterest.com/">
<link rel="dns-prefetch" href="http://s0.wp.com/">
<link rel="dns-prefetch" href="http://s.gravatar.com/">
<link rel="dns-prefetch" href="http://fonts.googleapis.com/">
<link rel="dns-prefetch" href="http://s.w.org/">
<link rel="alternate" type="application/rss+xml" title="Be cheap and DIY: » Feed" href="http://www.adrianandgenese.com/blogger/feed/">
<link rel="alternate" type="application/rss+xml" title="Be cheap and DIY: » Comments Feed" href="http://www.adrianandgenese.com/blogger/comments/feed/">
<link rel="alternate" type="application/rss+xml" title="Be cheap and DIY: » NodeMCU ESP8266 http relay control with 12v battery monitor and wifi configuration – Part 2 Comments Feed" href="http://www.adrianandgenese.com/blogger/2016/09/29/nodemcu-esp8266-http-relay-control-with-12v-battery-monitor-and-wifi-configuration-part-2/feed/">
		<script type="text/javascript" async="" src="./reconnect if disconnect_files/pinit_main.js"></script><script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/www.adrianandgenese.com\/blogger\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.1"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./reconnect if disconnect_files/wp-emoji-release.min.js" type="text/javascript"></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="crayon-css" href="./reconnect if disconnect_files/crayon.min.css" type="text/css" media="all">
<link rel="stylesheet" id="crayon-theme-classic-css" href="./reconnect if disconnect_files/classic.css" type="text/css" media="all">
<link rel="stylesheet" id="crayon-font-monaco-css" href="./reconnect if disconnect_files/monaco.css" type="text/css" media="all">
<link rel="stylesheet" id="disclosure-picker-plugin-styles-css" href="./reconnect if disconnect_files/display.css" type="text/css" media="all">
<link rel="stylesheet" id="twentytwelve-fonts-css" href="./reconnect if disconnect_files/css" type="text/css" media="all">
<link rel="stylesheet" id="twentytwelve-style-css" href="./reconnect if disconnect_files/style.css" type="text/css" media="all">
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentytwelve-ie-css'  href='http://www.adrianandgenese.com/blogger/wp-content/themes/twentytwelve/css/ie.css?ver=20121010' type='text/css' media='all' />
<![endif]-->
<link rel="stylesheet" id="jetpack_css-css" href="./reconnect if disconnect_files/jetpack.css" type="text/css" media="all">
<script type="text/javascript" src="./reconnect if disconnect_files/jquery.js"></script>
<script type="text/javascript" src="./reconnect if disconnect_files/jquery-migrate.min.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"http:\/\/www.adrianandgenese.com\/blogger\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type="text/javascript" src="./reconnect if disconnect_files/crayon.min.js"></script>
<style type="text/css">img.nothumb{border:0;margin:0 0 0 2px !important;}</style>
<!-- Tweet This v1.8.3 b037 mode alpha -->
<link rel="https://api.w.org/" href="http://www.adrianandgenese.com/blogger/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.adrianandgenese.com/blogger/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.adrianandgenese.com/blogger/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="NodeMCU ESP8266 http relay control with 12v battery monitor and wifi configuration – Part 1" href="http://www.adrianandgenese.com/blogger/2016/09/07/nodemcu-esp8266-http-relay-control-with-12v-battery-monitor-and-wifi-configuration/">
<meta name="generator" content="WordPress 4.6.1">
<link rel="canonical" href="http://www.adrianandgenese.com/blogger/2016/09/29/nodemcu-esp8266-http-relay-control-with-12v-battery-monitor-and-wifi-configuration-part-2/">
<link rel="shortlink" href="http://wp.me/preRH-gP">
<link rel="alternate" type="application/json+oembed" href="http://www.adrianandgenese.com/blogger/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.adrianandgenese.com%2Fblogger%2F2016%2F09%2F29%2Fnodemcu-esp8266-http-relay-control-with-12v-battery-monitor-and-wifi-configuration-part-2%2F">
<link rel="alternate" type="text/xml+oembed" href="http://www.adrianandgenese.com/blogger/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fwww.adrianandgenese.com%2Fblogger%2F2016%2F09%2F29%2Fnodemcu-esp8266-http-relay-control-with-12v-battery-monitor-and-wifi-configuration-part-2%2F&amp;format=xml">
<meta name="google-site-verification" content="0McyfVl99PzOxTfz51pdT9sBe3B1eTkYEF53I-3eGGU">
<link rel="dns-prefetch" href="http://v0.wordpress.com/">
<style type="text/css">img#wpstats{display:none}</style>
<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article">
<meta property="og:title" content="NodeMCU ESP8266 http relay control with 12v battery monitor and wifi configuration – Part 2">
<meta property="og:url" content="http://www.adrianandgenese.com/blogger/2016/09/29/nodemcu-esp8266-http-relay-control-with-12v-battery-monitor-and-wifi-configuration-part-2/">
<meta property="og:description" content="Part 2. (looking for Part 1?) In our part 1 of this article we learned how to take a stock nodemcu esp8266 and flash it with the latest version of nodemcu. We also learned how to send and run files…">
<meta property="article:published_time" content="2016-09-30T03:46:07+00:00">
<meta property="article:modified_time" content="2016-10-03T16:32:28+00:00">
<meta property="og:site_name" content="Be cheap and DIY:">
<meta property="og:image" content="http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/nodemcu_schematic_zoom.jpg">
<meta property="og:image:width" content="451">
<meta property="og:image:height" content="284">
<meta property="og:locale" content="en_US">
<meta name="twitter:card" content="summary">
<style>.ios7.web-app-mode.has-fixed header{ background-color: rgba(3,122,221,.88);}</style><meta data-pso-pv="1.2.1" data-pso-pt="singlePost" data-pso-th="aa3725dda6930d04fb6996ee4bc7036b"><script pagespeed_no_defer="" data-pso-version="20161109_120825">window.dynamicgoogletags={config:[]};dynamicgoogletags.config=["ca-pub-6929690286363345",,[],,,,,,,,,,0.001,"http://www.adrianandgenese.com/blogger"];(function(){var k=this,l=function(a){var c=typeof a;if("object"==c)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return c;var b=Object.prototype.toString.call(a);if("[object Window]"==b)return"object";if("[object Array]"==b||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==b||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==c&&"undefined"==typeof a.call)return"object";return c},aa=function(a,c,b){return a.call.apply(a.bind,arguments)},ba=function(a,c,b){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(b,d);return a.apply(c,b)}}return function(){return a.apply(c,arguments)}},n=function(a,c,b){n=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?
aa:ba;return n.apply(null,arguments)},ca=Date.now||function(){return+new Date},p=function(a,c){function b(){}b.prototype=c.prototype;a.I=c.prototype;a.prototype=new b;a.H=function(a,b,f){for(var d=Array(arguments.length-2),g=2;g<arguments.length;g++)d[g-2]=arguments[g];return c.prototype[b].apply(a,d)}};var q=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},r=function(a,c){return a<c?-1:a>c?1:0};var ea=function(a,c){var b=da;Object.prototype.hasOwnProperty.call(b,a)||(b[a]=c(a))};var t=function(a,c){for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&c.call(void 0,a[b],b,a)};var v=function(a,c,b,d,e){this.o=b||4E3;this.b=a||"&";this.u=c||",$";this.g=void 0!==d?d:"trn";this.G=e||null;this.s=!1;this.i={};this.B=0;this.c=[]},ga=function(a,c,b,d){c=c+"//"+b+d;var e=fa(a)-d.length-0;if(0>e)return"";a.c.sort(function(a,b){return a-b});d=null;b="";for(var f=0;f<a.c.length;f++)for(var h=a.c[f],g=a.i[h],u=0;u<g.length;u++){if(!e){d=null==d?h:d;break}var m=w(g[u],a.b,a.u);if(m){m=b+m;if(e>=m.length){e-=m.length;c+=m;b=a.b;break}else a.s&&(b=e,m[b-1]==a.b&&--b,c+=m.substr(0,b),
b=a.b,e=0);d=null==d?h:d}}f="";a.g&&null!=d&&(f=b+a.g+"="+(a.G||d));return c+f+""},fa=function(a){if(!a.g)return a.o;var c=1,b;for(b in a.i)c=b.length>c?b.length:c;return a.o-a.g.length-c-a.b.length-1},w=function(a,c,b,d,e){var f=[];t(a,function(a,g){(a=x(a,c,b,d,e))&&f.push(g+"="+a)});return f.join(c)},x=function(a,c,b,d,e){if(null==a)return"";c=c||"&";b=b||",$";"string"==typeof b&&(b=b.split(""));if(a instanceof Array){if(d=d||0,d<b.length){for(var f=[],h=0;h<a.length;h++)f.push(x(a[h],c,b,d+1,
e));return f.join(b[d])}}else if("object"==typeof a)return e=e||0,2>e?encodeURIComponent(w(a,c,b,d,e+1)):"...";return encodeURIComponent(String(a))};var ia=function(a,c){var b=y;if(b.F<(c||b.v))try{var d;a instanceof v?d=a:(d=new v,t(a,function(a,b){var c=d,e=c.B++,f={};f[b]=a;a=[f];c.c.push(e);c.i[e]=a}));var e=ga(d,b.D,b.A,b.C+"pso_unknown&");e&&ha(e)}catch(f){}},ha=function(a){k.google_image_requests||(k.google_image_requests=[]);var c=k.document.createElement("img");c.src=a;k.google_image_requests.push(c)};var z=function(a){ja();this.enabled=Math.random()<a;this.events=[]},ja=k.performance&&k.performance.now?n(k.performance.now,k.performance):ca;var y,A=function(a){z.call(this,a)};p(A,z);var B;a:{var C=k.navigator;if(C){var D=C.userAgent;if(D){B=D;break a}}B=""};var ka=-1!=B.indexOf("Opera"),E=-1!=B.indexOf("Trident")||-1!=B.indexOf("MSIE"),la=-1!=B.indexOf("Edge"),F=-1!=B.indexOf("Gecko")&&!(-1!=B.toLowerCase().indexOf("webkit")&&-1==B.indexOf("Edge"))&&!(-1!=B.indexOf("Trident")||-1!=B.indexOf("MSIE"))&&-1==B.indexOf("Edge"),ma=-1!=B.toLowerCase().indexOf("webkit")&&-1==B.indexOf("Edge"),G=function(){var a=k.document;return a?a.documentMode:void 0},H;
a:{var I="",J=function(){var a=B;if(F)return/rv\:([^\);]+)(\)|;)/.exec(a);if(la)return/Edge\/([\d\.]+)/.exec(a);if(E)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(ma)return/WebKit\/(\S+)/.exec(a);if(ka)return/(?:Version)[ \/]?(\S+)/.exec(a)}();J&&(I=J?J[1]:"");if(E){var K=G();if(null!=K&&K>parseFloat(I)){H=String(K);break a}}H=I}
var L=H,da={},M=function(a){ea(a,function(){for(var c=0,b=q(String(L)).split("."),d=q(String(a)).split("."),e=Math.max(b.length,d.length),f=0;0==c&&f<e;f++){var h=b[f]||"",g=d[f]||"";do{h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""];if(0==h[0].length&&0==g[0].length)break;c=r(0==h[1].length?0:parseInt(h[1],10),0==g[1].length?0:parseInt(g[1],10))||r(0==h[2].length,0==g[2].length)||r(h[2],g[2]);h=h[3];g=g[3]}while(0==c)}return 0<=c})},N;var O=k.document;
N=O&&E?G()||("CSS1Compat"==O.compatMode?parseInt(L,10):5):void 0;var P;if(!(P=!F&&!E)){var Q;if(Q=E)Q=9<=Number(N);P=Q}P||F&&M("1.9.1");E&&M("9");var na=window;y=new function(){this.D="http:"===na.location.protocol?"http:":"https:";this.A="pagead2.googlesyndication.com";this.C="/pagead/gen_204?id=";this.v=.01;this.F=Math.random()};new A(1E-4);var oa=function(){this.document=document},R=function(a,c,b){a=a.document.getElementsByTagName(c);for(c=0;c<a.length;++c)if(a[c].hasAttribute(b))return a[c].getAttribute(b);return null};var S=function(){var a=window;return a.dynamicgoogletags=a.dynamicgoogletags||{}};var T=function(){},pa="function"==typeof Uint8Array,U=[],V=function(a,c){if(c<a.l){c+=a.j;var b=a.a[c];return b===U?a.a[c]=[]:b}b=a.f[c];return b===U?a.f[c]=[]:b},W=function(a){if(a.m)for(var c in a.m){var b=a.m[c];if("array"==l(b))for(var d=0;d<b.length;d++)b[d]&&W(b[d]);else b&&W(b)}};T.prototype.toString=function(){W(this);return this.a.toString()};var X=function(a){var c=a;a=qa;this.m=null;c||(c=[]);this.j=-1;this.a=c;a:{if(this.a.length){var c=this.a.length-1,b=this.a[c];if(b&&"object"==typeof b&&"array"!=l(b)&&!(pa&&b instanceof Uint8Array)){this.l=c-this.j;this.f=b;break a}}this.l=Number.MAX_VALUE}if(a)for(c=0;c<a.length;c++)b=a[c],b<this.l?(b+=this.j,this.a[b]=this.a[b]||U):this.f[b]=this.f[b]||U};p(X,T);var qa=[3];var Y=function(){var a=S().config;if(a){var c=new oa,a=new X(a),b;b=V(a,13);if(b=null==b?b:+b){var d={};d.wpc=V(a,1);d.sv=R(c,"script","data-pso-version");d.tn=R(c,"meta","data-pso-pt");d.th=R(c,"meta","data-pso-th");d.w=0<window.innerWidth?window.innerWidth:null;d.h=0<window.innerHeight?window.innerHeight:null;ia(d,b)}}S().loaded=!0};var Z=window;Z.addEventListener?Z.addEventListener("load",Y,!1):Z.attachEvent&&Z.attachEvent("onload",Y);})();
</script><link rel="stylesheet" type="text/css" id="gravatar-card-css" href="./reconnect if disconnect_files/hovercard.css"><link rel="stylesheet" type="text/css" id="gravatar-card-services-css" href="./reconnect if disconnect_files/services.css"><style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_reposition{overflow:hidden;position:relative}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}@keyframes fb_transform{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.fb_animate{animation:fb_transform .3s forwards}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;_background-image:url(https://static.xx.fbcdn.net/rsrc.php/v3/yL/r/s816eWC-2sl.gif);cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent;_background-image:url(https://static.xx.fbcdn.net/rsrc.php/v3/yL/r/s816eWC-2sl.gif)}.fb_dialog_close_icon:active{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent;_background-image:url(https://static.xx.fbcdn.net/rsrc.php/v3/yL/r/s816eWC-2sl.gif)}.fb_dialog_loader{background-color:#f6f7f9;border:1px solid #606060;font-size:24px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100%}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100%;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #365899;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{width:auto;height:auto;min-height:initial;min-width:initial;background:none}.fb_dialog.fb_dialog_mobile.loading.centered #fb_dialog_loader_spinner{width:100%}.fb_dialog.fb_dialog_mobile.loading.centered .fb_dialog_content{background:none}.loading.centered #fb_dialog_loader_close{color:#fff;display:block;padding-top:20px;clear:both;font-size:18px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;bottom:0;left:0;right:0;top:0;width:100%;min-height:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #29487d;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f6f7f9;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}#fb_dialog_loader_spinner{animation:rotateSpinner 1.2s linear infinite;background-color:transparent;background-image:url(https://static.xx.fbcdn.net/rsrc.php/v3/yD/r/t-wz8gw1xG1.png);background-repeat:no-repeat;background-position:50% 50%;height:24px;width:24px}@keyframes rotateSpinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(https://static.xx.fbcdn.net/rsrc.php/v3/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}</style><style type="text/css"> .PIN_1479713987220_embed_grid { 
  width: 100%;
  max-width: 257px;
  min-width: 140px;
  display: inline-block;
  box-shadow: inset 0 0 1px #000;
  border-radius: 5px;
  overflow: hidden;
  font: 12px "Helvetica Neue", Helvetica, arial, sans-serif;
  color: rgb(54, 54, 54);
  box-sizing: border-box;
  background: #fff;
  cursor: pointer;
  -webkit-font-smoothing: antialiased;
}
 .PIN_1479713987220_embed_grid * { 
  display: block;
  position: relative;
  font: inherit;
  cursor: inherit;
  box-sizing: inherit;
  margin: 0;
  padding: 0;
  text-align: left;
}
 .PIN_1479713987220_embed_grid .PIN_1479713987220_hd { 
  height: 55px;
}
 .PIN_1479713987220_embed_grid .PIN_1479713987220_hd .PIN_1479713987220_img { 
  position: absolute;
  top: 10px;
  left: 10px;
  height: 36px;
  width: 36px;
  border-radius: 3px;
  background: transparent url () 0 0 no-repeat;
  background-size: cover;
}
 .PIN_1479713987220_embed_grid .PIN_1479713987220_hd .PIN_1479713987220_pinner { 
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  width: 75%;
  position: absolute;
  top: 20px;
  left: 56px;
  font-size: 14px;
  font-weight: bold;
}
 .PIN_1479713987220_embed_grid .PIN_1479713987220_bd { 
  padding: 0 10px;
  -moz-scrollbars: none;
  -ms-overflow-style: none;
  overflow-x: hidden;
  overflow-y: auto;
}
 .PIN_1479713987220_embed_grid .PIN_1479713987220_bd .PIN_1479713987220_ct { 
  width: 100%;
  height: auto;
}
 .PIN_1479713987220_embed_grid .PIN_1479713987220_bd .PIN_1479713987220_ct .PIN_1479713987220_col { 
  display: inline-block;
  width: 100%;
  padding: 1px;
  vertical-align: top;
  min-width: 60px;
}
 .PIN_1479713987220_embed_grid .PIN_1479713987220_bd .PIN_1479713987220_ct .PIN_1479713987220_col .PIN_1479713987220_img { 
  margin: 0;
  display: inline-block;
  width: 100%;
  background: transparent url() 0 0 no-repeat;
  background-size: cover;
  box-shadow: inset 0 0 1px #000;
  border-radius: 2px;
}
 .PIN_1479713987220_embed_grid .PIN_1479713987220_ft { 
  padding: 11px;
}
 .PIN_1479713987220_embed_grid .PIN_1479713987220_ft .PIN_1479713987220_button { 
  border-radius: 3px;
  text-align: center;
  box-shadow: inset 0 0 1px #888;
  background-color: #efefef;
  position: relative;
  display: block;
  overflow: hidden;
  height: 33px;
  width: 100%;
  min-width: 70px;
  padding: 0 3px;
}
 .PIN_1479713987220_embed_grid .PIN_1479713987220_ft .PIN_1479713987220_button .PIN_1479713987220_label { 
  position: absolute;
  left: 0;
  width: 100%;
  text-align: center;
}
 .PIN_1479713987220_embed_grid .PIN_1479713987220_ft .PIN_1479713987220_button .PIN_1479713987220_label.PIN_1479713987220_top { 
  top: 0;
}
 .PIN_1479713987220_embed_grid .PIN_1479713987220_ft .PIN_1479713987220_button .PIN_1479713987220_label.PIN_1479713987220_bottom { 
  bottom: 0;
}
 .PIN_1479713987220_embed_grid .PIN_1479713987220_ft .PIN_1479713987220_button .PIN_1479713987220_label .PIN_1479713987220_string { 
  white-space: pre;
  color: #746d6a;
  font-size: 13px;
  font-weight: bold;
  vertical-align: top;
  display: inline-block;
  height: 33px;
  line-height: 33px;
}
 .PIN_1479713987220_embed_grid .PIN_1479713987220_ft .PIN_1479713987220_button .PIN_1479713987220_label .PIN_1479713987220_logo { 
  display: inline-block;
  vertical-align: top;
  height: 33px;
  width: 65px;
  background: transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTZweCIgd2lkdGg9IjY0cHgiIHZpZXdCb3g9IjAgMCA2NCAxNiI+PGc+PHBhdGggZD0iTTMzLjIxNSw3LjY2NyBDMzMuODg4LDcuNjY3IDM0LjEyMiw4LjA3NSAzNC4xMjIsOC41NjIgQzM0LjEyMiw5LjM4NiAzMy40ODIsOS44ODkgMzIuNDgxLDkuODg5IEMzMi4xMjQsOS44ODkgMzEuNjI1LDkuODA0IDMxLjMyOSw5LjcwNCBDMzEuNDUyLDguOTQ4IDMxLjk0LDcuNjY3IDMzLjIxNSw3LjY2NyBMMzMuMjE1LDcuNjY3IFogTTQ3LjY2OSw3LjY2NyBDNDguMjg0LDcuNjY3IDQ4LjU3MSw4LjA3NSA0OC41NzEsOC41NjIgQzQ4LjU3MSw5LjM4NiA0Ny45MzYsOS44ODkgNDYuOTMxLDkuODg5IEM0Ni41NzIsOS44ODkgNDYuMDcsOS44MDQgNDUuNzcyLDkuNzA0IEM0NS44OTUsOC45NDggNDYuNDM5LDcuNjY3IDQ3LjY1OSw3LjY2NyBMNDcuNjY5LDcuNjY3IFogTTYyLjkwNiw3LjczNiBDNjMuMTExLDcuNzM2IDYzLjI0NSw3LjY1IDYzLjI4Niw3LjQ1NCBDNjMuMzQ3LDcuMTY2IDYzLjQ3LDYuNjY0IDYzLjUxMSw2LjUzMSBDNjMuNTUyLDYuMzU2IDYzLjQ1LDYuMjIzIDYzLjI1NSw2LjIyMyBMNjEuNzM3LDYuMjIzIEM2MS44NCw1Ljc4MiA2Mi4yNzEsNC4zNjcgNjIuMjcxLDMuNDQ0IEM2Mi4yNzEsMS41OTkgNjAuNzAyLDAuMDMgNTguNDg3LDAuMDMgQzU1Ljk3NSwwLjAzIDU0LjM0NCwxLjcxMSA1NC4zNDQsNC4wOCBDNTQuMzQ0LDQuNzY3IDU0LjYwMSw1LjU3NyA1NC45MTksNi4wNjkgQzU0Ljc4NSw2LjA1OSA1NC42NDIsNi4wNTQgNTQuNTA4LDYuMDU0IEM1Mi42MDEsNi4wNTQgNTEuNDAyLDcuMDkgNTEuNDAyLDguNTkzIEM1MS40MDIsMTAuMDA4IDUyLjUwOSwxMC41NTkgNTMuNTY1LDEwLjkyIEM1NC40ODgsMTEuMjQ5IDU1LjM0OSwxMS40IDU1LjM0OSwxMi4xMiBDNTUuMzQ5LDEyLjYxMiA1NC44NzgsMTIuODk5IDUzLjk1NSwxMi44OTkgQzUyLjg1OCwxMi44OTkgNTIuMjUzLDEyLjM4NyA1Mi4wOTksMTIuMTkyIEM1Mi4yMDEsMTIuMTEgNTIuMzU1LDExLjkxNSA1Mi4zNTUsMTEuNTk1IEM1Mi4zNTUsMTEuMTQ0IDUyLjAzOSwxMC43NzUgNTEuNDQ5LDEwLjc3NSBDNTAuOTQ4LDEwLjc3NSA1MC41MjYsMTEuMTg1IDUwLjQxOSwxMS43MTggQzQ5LjYxOSwxMi4zNzQgNDguNzQzLDEyLjgwMiA0Ny41MDMsMTIuODAyIEM0Ni4yODMsMTIuODAyIDQ1LjY0NywxMi4xNjYgNDUuNjQ3LDEwLjgxMyBDNDUuOTM0LDEwLjkwMiA0Ni42ODMsMTEuMDA4IDQ3LjE3NSwxMS4wMDggQzQ5LjI0NiwxMS4wMDggNTAuNjUxLDEwLjA2NCA1MC42NTEsOC4xODQgQzUwLjY1MSw3LjE3MiA0OS43NjksNi4xMDggNDguMDA1LDYuMTA4IEM0NS42OTIsNi4xMDggNDQuMzk5LDcuNTc1IDQzLjgzMiw5LjE4NCBMNDMuMzU1LDkuMDc2IEM0My40ODksOC43MTcgNDMuNTc3LDguMzAxIDQzLjU3Nyw3Ljg0NSBDNDMuNTc3LDcuMDQ1IDQzLjA4NSw2LjEwNyA0MS43NjIsNi4xMDcgQzQwLjg0NSw2LjEwNyAzOS45NzQsNi43MDggMzkuMzcsNy42MSBMMzkuNjI2LDYuNjA2IEMzOS42NjQsNi40NTIgMzkuNTk5LDYuMjgzIDM5LjM1OSw2LjI4MyBMMzguMDA2LDYuMjgzIEMzNy44MTQsNi4yODMgMzcuNjc4LDYuMzU0IDM3LjYyLDYuNTcgTDM2LjY2NywxMC4zMTIgQzM2LjM5LDExLjQzIDM0LjkxMywxMi44MTQgMzMuMDU3LDEyLjgxNCBDMzEuODM1LDEyLjgxNCAzMS4yMDEsMTIuMTM4IDMxLjIwMSwxMC43ODQgQzMxLjUyMiwxMC45MTIgMzIuMjM1LDExLjAyIDMyLjcyNiwxMS4wMiBDMzQuODc5LDExLjAyIDM2LjIwNSwxMC4wODEgMzYuMjA1LDguMTk3IEMzNi4yMDUsNy4xODcgMzUuMzEzLDYuMTI0IDMzLjU2LDYuMTI0IEMzMC45NDUsNi4xMjQgMjkuMzQ1LDguMTQ4IDI5LjA3OSwxMC40NDEgQzI4Ljk2NiwxMS4zOTQgMjguMTU2LDEyLjcwMyAyNy4yODQsMTIuNzAzIEMyNi44NjQsMTIuNzAzIDI2LjYyOCwxMi40MzYgMjYuNjI4LDExLjk4NSBDMjYuNjI4LDExLjU5NSAyNi45MDEsMTAuNjMxIDI3LjIwMiw5LjQzMiBDMjcuMzA1LDkuMDMyIDI3LjQ1Niw4LjQxNiAyNy42MjYsNy43NCBMMjkuMDUxLDcuNzQgQzI5LjI1OSw3Ljc0IDI5LjM4Miw3LjY0NyAyOS40MzEsNy40NTMgQzI5LjQ5OCw3LjE2NSAyOS42MjIsNi42NzMgMjkuNjU2LDYuNTQgQzI5LjcwNCw2LjM2NiAyOS42MDEsNi4yMjcgMjkuNDA0LDYuMjI3IEwyOC4wMDksNi4yMjcgTDI4LjY2NiwzLjYwNiBDMjguNzI3LDMuMzQ2IDI4LjUwOCwzLjE5NiAyOC4yODEsMy4yNDQgQzI4LjI4MSwzLjI0NCAyNy4yMDQsMy40NTUgMjcuMDA2LDMuNDk4IEMyNi44MDQsMy41MzkgMjYuNjQ3LDMuNjQ2IDI2LjU3NSwzLjkzOSBMMjYuMDExLDYuMjI1IEwyNC45MDQsNi4yMjUgQzI0LjY5MSw2LjIyNSAyNC41NjgsNi4zMTIgMjQuNTIyLDYuNTA5IEMyNC40NTMsNi43OTIgMjQuMzI3LDcuMjg4IDI0LjI5Myw3LjQyMiBDMjQuMjQ1LDcuNiAyNC4zNSw3LjczNSAyNC41NSw3LjczNSBMMjUuNjQ1LDcuNzM1IEMyNS42MzgsNy43NjkgMjUuMjUsOS4yNDIgMjQuOTM3LDEwLjU2NSBDMjQuNzg5LDExLjIwNCAyNC4yOTMsMTIuNjkxIDIzLjQ4MSwxMi42OTEgQzIyLjk5OSwxMi42OTEgMjIuNzk0LDEyLjQ0NSAyMi43OTQsMTEuOTIyIEMyMi43OTQsMTEuMDk2IDIzLjYwNiw5LjAzMSAyMy42MDYsOC4wOTMgQzIzLjYwNiw2Ljg0MiAyMi45MzUsNi4xMTQgMjEuNTU5LDYuMTE0IEMyMC42OTMsNi4xMTQgMTkuNzk1LDYuNjc4IDE5LjQxNCw3LjE3MSBDMTkuNDE0LDcuMTcxIDE5LjUyOSw2Ljc3MSAxOS41Nyw2LjYxNyBDMTkuNjEyLDYuNDUzIDE5LjUyOSw2LjI5MiAxOS4zMTQsNi4yOTIgTDE3Ljk3MSw2LjI5MiBDMTcuNjg0LDYuMjkyIDE3LjYwOSw2LjQ0NiAxNy41NjcsNi42MTIgTDE2LjU5OCwxMC40MDYgQzE2LjI3NSwxMS42NTcgMTUuNTAzLDEyLjcwMyAxNC42OCwxMi43MDMgQzE0LjI1LDEyLjcwMyAxNC4wNjUsMTIuNDM2IDE0LjA2NSwxMS45NzQgQzE0LjA2NSwxMS41ODUgMTQuMzEzLDEwLjYyMSAxNC42MTksOS40MjEgQzE0Ljk4Myw3Ljk2NSAxNS4zMDYsNi43NjYgMTUuMzQyLDYuNjIyIEMxNS4zODgsNi40NDQgMTUuMzA3LDYuMjg4IDE1LjA3NSw2LjI4OCBMMTMuNzIyLDYuMjg4IEMxMy40NzYsNi4yODggMTMuMzg4LDYuNDE0IDEzLjMzOCw2LjU5NSBDMTMuMzM4LDYuNTk1IDEyLjk1OSw4LjAzNCAxMi41NTcsOS42NDEgQzEyLjI3LDEwLjgwNiAxMS45NDIsMTEuOTkzIDExLjk0MiwxMi41NDkgQzExLjk0MiwxMy41NDMgMTIuMzg2LDE0LjI5MiAxMy42MTYsMTQuMjkyIEMxNC41NTksMTQuMjkyIDE1LjMwOCwxMy44MSAxNS44ODIsMTMuMjAyIEwxNS43MzksMTMuNzY2IEMxNS42ODcsMTMuOTU3IDE1Ljc0OSwxNC4xMjUgMTUuOTY3LDE0LjEyNSBMMTcuMzUyLDE0LjEyNSBDMTcuNTkzLDE0LjEyNSAxNy42ODUsMTQuMDI3IDE3LjczNiwxMy44MTcgTDE4LjgzMyw5LjU1MSBDMTkuMTAzLDguNDUxIDE5Ljc3Nyw3LjcyNiAyMC43Myw3LjcyNiBDMjEuMTgxLDcuNzI2IDIxLjU3MSw4LjAyNCAyMS41MjYsOC42MDUgQzIxLjQ3NSw5LjI0NCAyMC43MDYsMTEuNTM4IDIwLjcwNiwxMi41NDUgQzIwLjcwNiwxMy4zMDMgMjAuOTg5LDE0LjI4OCAyMi40MjIsMTQuMjg4IEMyMy4zOTYsMTQuMjg4IDI0LjExNCwxMy44MTYgMjQuNjM3LDEzLjIxMSBDMjQuODMyLDEzLjg0OSAyNS4zMzQsMTQuMjggMjYuMjY3LDE0LjI4IEMyNy44MTYsMTQuMjggMjguNzQ5LDEzLjM2IDI5LjMwMiwxMi40MzggQzI5Ljc1MSwxMy41MTUgMzAuODE1LDE0LjI4NCAzMi4zNzksMTQuMjg0IEMzMy45NjgsMTQuMjg0IDM1LjIwNCwxMy42MSAzNi4wNzYsMTIuNjk3IEwzNS44MDYsMTMuNzgxIEMzNS43NTUsMTMuOTczIDM1Ljg0MSwxNC4xMjUgMzYuMDY3LDE0LjEyNSBMMzcuNDM3LDE0LjEyNSBDMzcuNjIxLDE0LjEyNSAzNy43NTcsMTQuMDI4IDM3LjgwNiwxMy44MyBDMzcuODI4LDEzLjczNCAzOC4wMjcsMTIuOTY5IDM4LjMwOCwxMS44ODIgQzM4Ljg0Miw5LjgwMSAzOS43MDMsNy42NDIgNDAuOTkzLDcuNjQyIEM0MS40NDksNy42NDIgNDEuNjM3LDcuODk3IDQxLjYzNyw4LjI5OCBDNDEuNjM3LDguNDg3IDQxLjU4MSw4LjY0OSA0MS41MzQsOC43MzkgQzQwLjkwOSw4LjYxNCA0MC40MDQsOC45MjIgNDAuNDA0LDkuNTkgQzQwLjQwNCwxMC4wMjcgNDAuODYzLDEwLjQyMyA0MS40ODEsMTAuNDIzIEM0MS45NTMsMTAuNDIzIDQyLjM0NSwxMC4zMDggNDIuNjU3LDEwLjA5NyBDNDIuOTU0LDEwLjE1OSA0My4yNjIsMTAuMjI1IDQzLjU4LDEwLjI5NyBDNDMuNTM5LDEwLjYxIDQzLjUwOCwxMC45MTggNDMuNTA4LDExLjIwNyBDNDMuNTA4LDEyLjg3OSA0NC43NjksMTQuMjk3IDQ2LjkwMiwxNC4yOTcgQzQ4LjU4NCwxNC4yOTcgNDkuNjUsMTMuNzMzIDUwLjY2NSwxMi44OTggQzUxLjE0NywxMy42NzggNTIuMzQ3LDE0LjMwMyA1My45MjYsMTQuMzAzIEM1Ni4wOSwxNC4zMDMgNTcuMzIsMTMuMTc1IDU3LjMyLDExLjY4OCBDNTcuMzIsMTAuMzM1IDU2LjIxMyw5Ljg0MyA1NS4wNzQsOS40MzMgQzU0LjE1Miw5LjA5NCA1My4zNzIsOC45MiA1My4zNzIsOC4yNjQgQzUzLjM3Miw3LjcyIDUzLjgwMyw3LjQ3NCA1NC41MjEsNy40NzQgQzU0Ljk5Miw3LjQ3NCA1NS4zNDEsNy41NzcgNTUuNTM2LDcuNjI4IEM1NS43Miw4LjA4OSA1Ni4xMSw4LjYxMiA1Ni43NzcsOC42MTIgQzU3LjMzNSw4LjYxMiA1Ny41ODcsOC4xNzEgNTcuNTg3LDcuNzYxIEM1Ny41ODcsNi42MDIgNTUuNjU3LDYuNDc5IDU1LjY1NywzLjk5OCBDNTUuNjU3LDIuNDUgNTYuNTMzLDEuMTc4IDU4LjM0MywxLjE3OCBDNTkuNjAzLDEuMTc4IDYwLjQyNSwxLjk3OCA2MC40MjUsMy4yNiBDNjAuNDI1LDQuMzE2IDU5Ljc3OSw2LjIxMyA1OS43NzksNi4yMTMgTDU4LjY4Miw2LjIxMyBDNTguNDcyLDYuMjEzIDU4LjM0Nyw2LjI5NSA1OC4yOTksNi40OSBMNTguMDcxLDcuNDAyIEM1OC4wMjcsNy41NzcgNTguMTI4LDcuNzEgNTguMzI3LDcuNzEgTDU5LjM5Myw3LjcxIEM1OS42MTcsNy43NDkgNTguMjg2LDEyLjQ1IDU4LjI4NiwxMi41MjkgQzU4LjI4NiwxMy41MjQgNTguODQ4LDE0LjI3MiA2MC4wNzUsMTQuMjcyIEM2MS44MDgsMTQuMjcyIDYyLjg5NSwxMy4xNDQgNjMuMzY3LDExLjUwNCBDNjMuNDA0LDExLjM3MyA2My4zMzMsMTEuMjcgNjMuMjAzLDExLjI3IEw2Mi41MzYsMTEuMjcgQzYyLjQwMywxMS4yNyA2Mi4zMjcsMTEuMzQ0IDYyLjI5NCwxMS40NzUgQzYyLjE0OCwxMi4wNiA2MS43NzgsMTIuNjc1IDYxLjA0MywxMi42NzUgQzYwLjYyMywxMi42NzUgNjAuMzg1LDEyLjQwOCA2MC4zODUsMTEuOTUxIEM2MC4zODUsMTEuNTYxIDYxLjM5LDcuNzA5IDYxLjM5LDcuNzA5IEw2Mi45MDYsNy43MzYgTDYyLjkwNiw3LjczNiBaIE0xNi4wOTksNC4xMyBDMTYuMDUyLDQuODQ1IDE1LjQ1Myw1LjQyNiAxNC43NjMsNS40MjYgQzE0LjA3Niw1LjQyNiAxMy41NTQsNC44NDUgMTMuNjA1LDQuMTI5IEMxMy42NTYsMy40MTQgMTQuMjUxLDIuODMzIDE0Ljk0LDIuODMzIEMxNS42MjksMi44MzMgMTYuMTUsMy40MDkgMTYuMDk5LDQuMTI1IEwxNi4wOTksNC4xMyBaIE02LjQ1LDAgQzIuMjQ2LDAgMC4wMSwyLjgyNSAwLjAxLDUuOTAyIEMwLDcuMzQyIDAuNzY0LDkuMTIyIDEuOTc5LDkuNjkgQzIuMTY0LDkuNzc1IDIuMjYyLDkuNzM3IDIuMzA0LDkuNTU5IEMyLjMzNSw5LjQyMyAyLjUwMSw4Ljc2MiAyLjU3NSw4LjQ1MyBDMi42MDYsOC4zNTUgMi41OTUsOC4yNjkgMi41MTMsOC4xNzIgQzIuMTEzLDcuNjg2IDEuNzk1LDYuNzg4IDEuNzk1LDUuOTQ5IEMxLjc5NSwzLjggMy40MjYsMS43MiA2LjE5NCwxLjcyIEM4LjU5NCwxLjcyIDEwLjI2NSwzLjM1IDEwLjI2NSw1LjY4NSBDMTAuMjY1LDguMzIyIDguOTQyLDEwLjE0OCA3LjIwOSwxMC4xNDggQzYuMjU2LDEwLjE0OCA1LjUzOCw5LjM1OSA1Ljc2NCw4LjM4NyBDNi4wNDEsNy4yMjggNi41NzQsNS45NzcgNi41NzQsNS4xMzYgQzYuNTc0LDQuMzg4IDYuMTc0LDMuNzYyIDUuMzQzLDMuNzYyIEM0LjM2OSwzLjc2MiAzLjU4LDQuNzY3IDMuNTgsNi4xMzEgQzMuNTgsNi45OTIgMy44NzcsNy41NzcgMy44NzcsNy41NzcgTDIuNzA3LDEyLjQyOCBDMi40MDcsMTMuNzIgMi43NDgsMTUuODExIDIuNzc3LDE1Ljk5MyBDMi43OTIsMTYuMDkgMi45LDE2LjEyNCAyLjk2MSwxNi4wNDEgQzMuMDU4LDE1LjkxNSA0LjIyMywxNC4xNjkgNC41NTEsMTIuOTA2IEw1LjE1NiwxMC41ODggQzUuNDc3LDExLjE5MyA2LjQwNCwxMS43MDYgNy4zOTEsMTEuNzA2IEMxMC4zMzEsMTEuNzA2IDEyLjQ1LDkuMDAzIDEyLjQ1LDUuNjQ0IEMxMi40NSwyLjQyNCA5LjgyMiwwLjAxNCA2LjQ0MSwwLjAxNCBMNi40NSwwIFoiIGZpbGw9IiNiZDA4MWMiPjwvcGF0aD48L2c+PC9zdmc+) 50% 50% no-repeat;
  background-size: 60px 15px;
}
 .PIN_1479713987220_embed_grid .PIN_1479713987220_ft .PIN_1479713987220_button:hover { 
  box-shadow: inset 0 0 1px #000;
}
 .PIN_1479713987220_embed_grid.PIN_1479713987220_noscroll .PIN_1479713987220_bd { 
  overflow: hidden;
}
 .PIN_1479713987220_embed_grid.PIN_1479713987220_board .PIN_1479713987220_hd .PIN_1479713987220_pinner { 
  top: 10px;
}
 .PIN_1479713987220_embed_grid.PIN_1479713987220_board .PIN_1479713987220_hd .PIN_1479713987220_board { 
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  width: 75%;
  position: absolute;
  bottom: 10px;
  left: 56px;
  color: #8e8e8e;
  font-size: 12px;
}
 .PIN_1479713987220_embed_grid.PIN_1479713987220_c2 { 
  max-width: 494px;
  min-width: 140px;
}
 .PIN_1479713987220_embed_grid.PIN_1479713987220_c2 .PIN_1479713987220_bd .PIN_1479713987220_ct .PIN_1479713987220_col { 
  width: 50%;
}
 .PIN_1479713987220_embed_grid.PIN_1479713987220_c3 { 
  max-width: 731px;
  min-width: 200px;
}
 .PIN_1479713987220_embed_grid.PIN_1479713987220_c3 .PIN_1479713987220_bd .PIN_1479713987220_ct .PIN_1479713987220_col { 
  width: 33.33%;
}
 .PIN_1479713987220_embed_grid.PIN_1479713987220_c4 { 
  max-width: 968px;
  min-width: 260px;
}
 .PIN_1479713987220_embed_grid.PIN_1479713987220_c4 .PIN_1479713987220_bd .PIN_1479713987220_ct .PIN_1479713987220_col { 
  width: 25%;
}
 .PIN_1479713987220_embed_grid.PIN_1479713987220_c5 { 
  max-width: 1205px;
  min-width: 320px;
}
 .PIN_1479713987220_embed_grid.PIN_1479713987220_c5 .PIN_1479713987220_bd .PIN_1479713987220_ct .PIN_1479713987220_col { 
  width: 20%;
}
 .PIN_1479713987220_embed_grid.PIN_1479713987220_c6 { 
  max-width: 1442px;
  min-width: 380px;
}
 .PIN_1479713987220_embed_grid.PIN_1479713987220_c6 .PIN_1479713987220_bd .PIN_1479713987220_ct .PIN_1479713987220_col { 
  width: 16.66%;
}
 .PIN_1479713987220_embed_grid.PIN_1479713987220_c7 { 
  max-width: 1679px;
  min-width: 440px;
}
 .PIN_1479713987220_embed_grid.PIN_1479713987220_c7 .PIN_1479713987220_bd .PIN_1479713987220_ct .PIN_1479713987220_col { 
  width: 14.28%;
}
 .PIN_1479713987220_embed_grid.PIN_1479713987220_c8 { 
  max-width: 1916px;
  min-width: 500px;
}
 .PIN_1479713987220_embed_grid.PIN_1479713987220_c8 .PIN_1479713987220_bd .PIN_1479713987220_ct .PIN_1479713987220_col { 
  width: 12.5%;
}
 .PIN_1479713987220_embed_grid.PIN_1479713987220_c9 { 
  max-width: 2153px;
  min-width: 560px;
}
 .PIN_1479713987220_embed_grid.PIN_1479713987220_c9 .PIN_1479713987220_bd .PIN_1479713987220_ct .PIN_1479713987220_col { 
  width: 11.11%;
}
 .PIN_1479713987220_embed_grid.PIN_1479713987220_c10 { 
  max-width: 2390px;
  min-width: 620px;
}
 .PIN_1479713987220_embed_grid.PIN_1479713987220_c10 .PIN_1479713987220_bd .PIN_1479713987220_ct .PIN_1479713987220_col { 
  width: 10%;
}
 .PIN_1479713987220_embed_pin { 
  width: 100%;
  min-width: 160px;
  max-width: 236px;
  display: inline-block;
  box-sizing: border-box;
  box-shadow: inset 0 0 1px #000;
  border-radius: 5px;
  overflow: hidden;
  font: 12px "Helvetica Neue", Helvetica, arial, sans-serif;
  color: #363636;
  background: #fff;
  cursor: pointer;
  -webkit-font-smoothing: antialiased;
}
 .PIN_1479713987220_embed_pin * { 
  display: block;
  position: relative;
  font: inherit;
  cursor: inherit;
  box-sizing: inherit;
  margin: 0;
  padding: 0;
  text-align: left;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd { 
  border-bottom: 1px solid rgba(0, 0, 0, 0.09);
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_hd { 
  border-bottom: 1px solid rgba(0, 0, 0, 0.09);
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_hd .PIN_1479713987220_container { 
  width: 100%;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_hd .PIN_1479713987220_container .PIN_1479713987220_img,  .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_hd .PIN_1479713987220_container .PIN_1479713987220_iframe,  .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_hd .PIN_1479713987220_container .PIN_1479713987220_video { 
  width: 100%;
  height: 100%;
  position: absolute;
  left: 0;
  background: transparent url() 0 0 no-repeat;
  background-size: cover;
  border: none;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_hd .PIN_1479713987220_container .PIN_1479713987220_native { 
  height: 64px;
  width: 64px;
  background: transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNjNweCIgd2lkdGg9IjYzcHgiIHZpZXdCb3g9IjAgMCA2NCA2NCI+PGc+PHBhdGggZD0iTSAzMiAzMiBtIC0zMiwgMCBhIDMxLCAzMSAwIDEsIDAgNjMsIDAgYSAzMSwgMzEgMCAxLDAgLTYzLCAwIHoiIGZpbGw9IiMwMDAiPjwvcGF0aD48cGF0aCBkPSJNIDI1IDE5IEwgNDggMzIgIEwgMjUgNDUgWiIgZmlsbD0iI2ZmZiI+PC9wYXRoPjwvZz48L3N2Zz4=) 0 0 no-repeat;
  position: absolute;
  top: 50%;
  left: 50%;
  margin-top: -32px;
  margin-left: -32px;
  opacity: .75;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_hd .PIN_1479713987220_container .PIN_1479713987220_control { 
  width: 50px;
  height: 24px;
  position: absolute;
  bottom: 12px;
  left: 12px;
  background: rgba(0, 0, 0, .4);
  color: #fff;
  box-shadow: 0 0 2px rgba(0, 0, 0, .2);
  border: 2px solid rgba(255, 255, 255, .68);
  border-radius: 13px;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_hd .PIN_1479713987220_container .PIN_1479713987220_control.PIN_1479713987220_paused::after,  .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_hd .PIN_1479713987220_container .PIN_1479713987220_control.PIN_1479713987220_playing::after { 
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  font-size: 10px;
  line-height: 19px;
  white-space: pre;
  font-weight: bold;
  font-style: normal;
  text-align: center;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_hd .PIN_1479713987220_container .PIN_1479713987220_control.PIN_1479713987220_paused::after { 
  content: "▶ GIF";
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_hd .PIN_1479713987220_container .PIN_1479713987220_control.PIN_1479713987220_playing::after { 
  content: "❙ ❙ GIF";
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_hd .PIN_1479713987220_repin { 
  position: absolute;
  top: 10px;
  left: 10px;
  height: 28px;
  width: auto;
  color: #fff;
  background: #bd081c url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzBweCIgd2lkdGg9IjMwcHgiIHZpZXdCb3g9Ii0xIC0xIDMxIDMxIj48Zz48cGF0aCBkPSJNMjkuNDQ5LDE0LjY2MiBDMjkuNDQ5LDIyLjcyMiAyMi44NjgsMjkuMjU2IDE0Ljc1LDI5LjI1NiBDNi42MzIsMjkuMjU2IDAuMDUxLDIyLjcyMiAwLjA1MSwxNC42NjIgQzAuMDUxLDYuNjAxIDYuNjMyLDAuMDY3IDE0Ljc1LDAuMDY3IEMyMi44NjgsMC4wNjcgMjkuNDQ5LDYuNjAxIDI5LjQ0OSwxNC42NjIiIGZpbGw9IiNmZmYiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxIj48L3BhdGg+PHBhdGggZD0iTTE0LjczMywxLjY4NiBDNy41MTYsMS42ODYgMS42NjUsNy40OTUgMS42NjUsMTQuNjYyIEMxLjY2NSwyMC4xNTkgNS4xMDksMjQuODU0IDkuOTcsMjYuNzQ0IEM5Ljg1NiwyNS43MTggOS43NTMsMjQuMTQzIDEwLjAxNiwyMy4wMjIgQzEwLjI1MywyMi4wMSAxMS41NDgsMTYuNTcyIDExLjU0OCwxNi41NzIgQzExLjU0OCwxNi41NzIgMTEuMTU3LDE1Ljc5NSAxMS4xNTcsMTQuNjQ2IEMxMS4xNTcsMTIuODQyIDEyLjIxMSwxMS40OTUgMTMuNTIyLDExLjQ5NSBDMTQuNjM3LDExLjQ5NSAxNS4xNzUsMTIuMzI2IDE1LjE3NSwxMy4zMjMgQzE1LjE3NSwxNC40MzYgMTQuNDYyLDE2LjEgMTQuMDkzLDE3LjY0MyBDMTMuNzg1LDE4LjkzNSAxNC43NDUsMTkuOTg4IDE2LjAyOCwxOS45ODggQzE4LjM1MSwxOS45ODggMjAuMTM2LDE3LjU1NiAyMC4xMzYsMTQuMDQ2IEMyMC4xMzYsMTAuOTM5IDE3Ljg4OCw4Ljc2NyAxNC42NzgsOC43NjcgQzEwLjk1OSw4Ljc2NyA4Ljc3NywxMS41MzYgOC43NzcsMTQuMzk4IEM4Ljc3NywxNS41MTMgOS4yMSwxNi43MDkgOS43NDksMTcuMzU5IEM5Ljg1NiwxNy40ODggOS44NzIsMTcuNiA5Ljg0LDE3LjczMSBDOS43NDEsMTguMTQxIDkuNTIsMTkuMDIzIDkuNDc3LDE5LjIwMyBDOS40MiwxOS40NCA5LjI4OCwxOS40OTEgOS4wNCwxOS4zNzYgQzcuNDA4LDE4LjYyMiA2LjM4NywxNi4yNTIgNi4zODcsMTQuMzQ5IEM2LjM4NywxMC4yNTYgOS4zODMsNi40OTcgMTUuMDIyLDYuNDk3IEMxOS41NTUsNi40OTcgMjMuMDc4LDkuNzA1IDIzLjA3OCwxMy45OTEgQzIzLjA3OCwxOC40NjMgMjAuMjM5LDIyLjA2MiAxNi4yOTcsMjIuMDYyIEMxNC45NzMsMjIuMDYyIDEzLjcyOCwyMS4zNzkgMTMuMzAyLDIwLjU3MiBDMTMuMzAyLDIwLjU3MiAxMi42NDcsMjMuMDUgMTIuNDg4LDIzLjY1NyBDMTIuMTkzLDI0Ljc4NCAxMS4zOTYsMjYuMTk2IDEwLjg2MywyNy4wNTggQzEyLjA4NiwyNy40MzQgMTMuMzg2LDI3LjYzNyAxNC43MzMsMjcuNjM3IEMyMS45NSwyNy42MzcgMjcuODAxLDIxLjgyOCAyNy44MDEsMTQuNjYyIEMyNy44MDEsNy40OTUgMjEuOTUsMS42ODYgMTQuNzMzLDEuNjg2IiBmaWxsPSIjYmQwODFjIj48L3BhdGg+PC9nPjwvc3ZnPg==) 5px 50% no-repeat;
  background-size: 18px 18px;
  text-indent: 28px;
  font: 14px/28px "Helvetica Neue", Helvetica, Arial, "sans-serif";
  font-weight: bold;
  border-radius: 4px;
  padding: 0 6px 0 0;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_hd .PIN_1479713987220_repin:hover { 
  background-color: #aa0719;
  box-shadow: none;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_source { 
  height: 38px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.09);
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_source .PIN_1479713987220_img { 
  position: absolute;
  top: 50%;
  margin-top: -8px;
  left: 10px;
  height: 16px;
  width: 16px;
  background: transparent url() 0 0 no-repeat;
  background-size: 16px 16px;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_source .PIN_1479713987220_domain { 
  line-height: 38px;
  max-width: 75%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-weight: bold;
  color: #b9b9b9;
  position: absolute;
  top: 0px;
  left: 35px;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_source.PIN_1479713987220_nofav .PIN_1479713987220_img { 
  display: none;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_source.PIN_1479713987220_nofav .PIN_1479713987220_domain { 
  max-width: 85%;
  left: 10px;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_source .PIN_1479713987220_menu { 
  height: inherit;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_source .PIN_1479713987220_menu .PIN_1479713987220_toggle { 
  position: absolute;
  top: 0;
  right: 5px;
  height: inherit;
  width: 30px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.09);
  background: #fff url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNXB4IiB3aWR0aD0iMjBweCIgdmlld0JveD0iMCAwIDIwIDUiPjxnPjxwYXRoIGQ9Ik0xNy41LDUgQzE4Ljg4MSw1IDIwLDMuODgxIDIwLDIuNSBDMjAsMS4xMTkgMTguODgxLDAgMTcuNSwwIEMxNi4xMTksMCAxNSwxLjExOSAxNSwyLjUgQzE1LDMuODgxIDE2LjExOSw1IDE3LjUsNSBaIE0xMCw1IEMxMS4zOCw1IDEyLjUsMy44ODEgMTIuNSwyLjUgQzEyLjUsMS4xMTkgMTEuMzgsMCAxMCwwIEM4LjYyLDAgNy41LDEuMTE5IDcuNSwyLjUgQzcuNSwzLjg4MSA4LjYyLDUgMTAsNSBNMi41LDUgQzMuODgxLDUgNSwzLjg4MSA1LDIuNSBDNSwxLjExOSAzLjg4MSwwIDIuNSwwIEMxLjEyLDAgMCwxLjExOSAwLDIuNSBDMCwzLjg4MSAxLjEyIDUsMi41LDUgWiIgZmlsbD0iI2I1YjViNSI+PC9wYXRoPjwvZz48L3N2Zz4=) 50% 50% no-repeat;
  background-size: fill;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_source .PIN_1479713987220_menu .PIN_1479713987220_dropdown { 
  display: none;
  border-radius: 5px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, .33);
  font-weight: bold;
  font-size: 12px;
  background: #fff;
  text-align: left;
  padding: 10px;
  position: absolute;
  max-width: 195px;
  right: 10px;
  top: 39px;
  z-index: 1;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_source .PIN_1479713987220_menu .PIN_1479713987220_dropdown::after { 
  content: "";
  position: absolute;
  top: -6px;
  right: 1px;
  border-bottom: 8px solid #fff;
  border-right: 8px solid transparent;
  border-left: 8px solid transparent;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_source .PIN_1479713987220_menu .PIN_1479713987220_dropdown::before { 
  content: "";
  position: absolute;
  top: -7px;
  right: 2px;
  border-bottom: 7px solid #e2e2e2;
  border-right: 7px solid transparent;
  border-left: 7px solid transparent;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_description { 
  font-size: 14px;
  line-height: 17px;
  margin: 8px 12px;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_attribution { 
  height: 22px;
  margin-top: 5px;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_attribution .PIN_1479713987220_img { 
  position: absolute;
  top: 50%;
  margin-top: -8px;
  left: 10px;
  height: 16px;
  width: 16px;
  background: transparent url() 0 0 no-repeat;
  background-size: 16px 16px;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_attribution .PIN_1479713987220_by { 
  line-height: 22px;
  max-width: 75%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-size: 11px;
  font-weight: bold;
  color: #b9b9b9;
  position: absolute;
  top: 0px;
  left: 35px;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_stats { 
  height: 24px;
  line-height: 24px;
  margin: 0 0 0 10px;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_stats .PIN_1479713987220_repins,  .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_stats .PIN_1479713987220_likes { 
  padding-left: 17px;
  padding-right: 10px;
  color: #a8a8a8;
  font-size: 11px;
  font-weight: bold;
  display: inline-block;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_stats .PIN_1479713987220_repins { 
  background: transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTRweCIgd2lkdGg9IjE0cHgiIHZpZXdCb3g9IjAgMCAxNCAxNCI+PGc+PHBhdGggZD0iTTExLjk3OSw2Ljg1OSBMMTMuOTksNS4wMTEgTDExLjI0MSw1LjAxMSBMMTAuNDg2LDAgTDkuNzM5LDUuMDExIEw3LDUuMDExIEw4Ljk4Niw2Ljg1OCBMOC45ODYsMTEuMDE3IEM4LjUwNSwxMC45ODUgOC4xNDMsMTEuMDEyIDguMTQzLDExLjIxMyBDOC4xNDMsMTEuNjg3IDguNTAzLDEyLjAwMSA4Ljk4NiwxMi4wMDEgTDExLjk4MiwxMiBDMTIuNDY1LDEyIDEyLjg4OCwxMS42ODYgMTIuODg4LDExLjIxMyBDMTIuODg4LDExLjAxMSAxMi40NjUsMTAuOTg1IDExLjk4MiwxMS4wMTcgTDExLjk3OSw2Ljg1OSBaIE00Ljk3OSw3LjE0MiBMNi45OSw4Ljk5IEw0LjI0MSw4Ljk5IEwzLjQ4NiwxNC4wMDEgTDIuNzM5LDguOTkgTDAsOC45OSBMMS45ODYsNy4xNDMgTDEuOTg2LDIuOTg0IEMxLjUwNSwzLjAxNiAxLjE0MywyLjk4OSAxLjE0MywyLjc4OCBDMS4xNDMsMi4zMTUgMS41MDMsMiAxLjk4NiwyIEw0Ljk4MiwyLjAwMSBDNS40NjUsMi4wMDEgNS44ODgsMi4zMTUgNS44ODgsMi43ODkgQzUuODg4LDIuOTkgNS40NjUsMy4wMTcgNC45ODIsMi45ODQgTDQuOTc5LDcuMTQyIFoiIGZpbGw9IiNiNWI1YjUiPjwvcGF0aD48L2c+PC9zdmc+) 0 50% no-repeat;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_bd .PIN_1479713987220_stats .PIN_1479713987220_likes { 
  background: transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTNweCIgd2lkdGg9IjE1cHgiIHZpZXdCb3g9IjAgMCAxNSAxMyI+PGc+PHBhdGggZD0iTTcuMzY5LDEyLjQzNyBMMS40NDEsNi40MSBDMC4yMTcsNS4xNjUgMCwzLjE1NiAxLjA2OCwxLjc3IEMyLjM0OCwwLjEwOCA0LjcyLDAgNi4xNDIsMS40NDYgTDcuMzY5LDIuNjk0IEw4LjUwNiwxLjUzOSBDOS43MywwLjI5MyAxMS43MDYsMC4wNzMgMTMuMDcsMS4xNTkgQzE0LjcwNSwyLjQ2MSAxNC44MTEsNC44NzIgMTMuMzg4LDYuMzE4IEw3LjM2OSwxMi40MzcgWiIgZmlsbD0iI2I1YjViNSI+PC9wYXRoPjwvZz48L3N2Zz4=) 0 51% no-repeat;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_ft { 
  height: 50px;
  margin-right: 10px;
  overflow: hidden;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_ft:after { 
  content: '-------------------------------------------------------------------------------------';
  display: block;
  height: 1px;
  line-height: 1px;
  color: #fff;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_ft .PIN_1479713987220_img { 
  position: absolute;
  left: 10px;
  top: 10px;
  height: 30px;
  width: 30px;
  border-radius: 30px;
  background: transparent url() 0 0 no-repeat;
  background-size: 30px 30px;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_ft .PIN_1479713987220_pinner,  .PIN_1479713987220_embed_pin .PIN_1479713987220_ft  .PIN_1479713987220_board { 
  position: absolute;
  left: 50px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  width: 75%;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_ft .PIN_1479713987220_pinner { 
  font-weight: bold;
  top: 10px;
}
 .PIN_1479713987220_embed_pin .PIN_1479713987220_ft .PIN_1479713987220_board { 
  bottom: 10px;
}
 .PIN_1479713987220_embed_pin.PIN_1479713987220_ja .PIN_1479713987220_bd .PIN_1479713987220_hd .PIN_1479713987220_repin { 
  background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgd2lkdGg9IjQxcHgiIHZpZXdCb3g9IjAgMCA0MSAxOCI+PGc+PHBhdGggZD0iTTE5LjgyMiw3LjE3MyBDMTkuODIyLDYuNTEgMTkuODM1LDYuMjc2IDE5Ljg4Nyw1Ljk2NCBMMTguMTQ1LDUuOTY0IEMxOC4xOTcsNi4yODkgMTguMTk3LDYuNDk3IDE4LjE5Nyw3LjE2IEwxOC4yMSwxMy4xOTIgQzE4LjIxLDEzLjk0NiAxOC4yMjMsMTQuMTY3IDE4LjI0OSwxNC4zODggQzE4LjMyNywxNS4wMjUgMTguNTIyLDE1LjQ0MSAxOC44ODYsMTUuNzE0IEMxOS4zOTMsMTYuMTA0IDIwLjI5LDE2LjI3MyAyMS45MjgsMTYuMjczIEMyMi43MjEsMTYuMjczIDI0LjM1OSwxNi4xOTUgMjUuMTI2LDE2LjExNyBDMjYuNTA0LDE1Ljk4NyAyNi41NjksMTUuOTc0IDI2Ljg0MiwxNS45NzQgTDI2Ljc2NCwxNC4yNDUgQzI2LjE5MiwxNC40MTQgMjUuOTA2LDE0LjQ3OSAyNS4yODIsMTQuNTU3IEMyNC4zMzMsMTQuNjg3IDIzLjEzNywxNC43NjUgMjIuMjY2LDE0Ljc2NSBDMjEuMDA1LDE0Ljc2NSAyMC4yNjQsMTQuNjQ4IDIwLjA0MywxNC40MjcgQzE5Ljg2MSwxNC4yNDUgMTkuODA5LDEzLjk1OSAxOS44MDksMTMuMjMxIEMxOS44MDksMTMuMTc5IDE5LjgwOSwxMy4xMDEgMTkuODIyLDEzLjAyMyBMMTkuODIyLDExLjMwNyBDMjEuOTkzLDEwLjkwNCAyNC4wMDgsMTAuMjI4IDI1LjkzMiw5LjI0IEwyNi4yNyw5LjA3MSBDMjYuMzc0LDkuMDE5IDI2LjQsOS4wMDYgMjYuNTQzLDguOTU0IEwyNS41MDMsNy40ODUgQzI0LjY1OCw4LjI3OCAyMS43ODUsOS40MzUgMTkuODIyLDkuNzk5IEwxOS44MjIsNy4xNzMgWiBNMjcuMzEsNC44NzIgQzI2LjQ5MSw0Ljg3MiAyNS44MTUsNS41NDggMjUuODE1LDYuMzY3IEMyNS44MTUsNy4xOTkgMjYuNDkxLDcuODc1IDI3LjMxLDcuODc1IEMyOC4xNDIsNy44NzUgMjguODE4LDcuMTk5IDI4LjgxOCw2LjM2NyBDMjguODE4LDUuNTQ4IDI4LjE0Miw0Ljg3MiAyNy4zMSw0Ljg3MiBMMjcuMzEsNC44NzIgWiBNMjcuMzEsNS41MjIgQzI3Ljc5MSw1LjUyMiAyOC4xNjgsNS44OTkgMjguMTY4LDYuMzY3IEMyOC4xNjgsNi44MzUgMjcuNzkxLDcuMjI1IDI3LjMxLDcuMjI1IEMyNi44NDIsNy4yMjUgMjYuNDY1LDYuODM1IDI2LjQ2NSw2LjM2NyBDMjYuNDY1LDUuODk5IDI2Ljg0Miw1LjUyMiAyNy4zMSw1LjUyMiBMMjcuMzEsNS41MjIgWiBNMzAuNTg2LDcuNjU0IEMzMS43OTUsOC4zMyAzMi44NjEsOS4xODggMzMuOTAxLDEwLjI5MyBMMzUuMDE5LDguODc2IEMzNC4wMTgsNy45MjcgMzMuMjEyLDcuMzI5IDMxLjY2NSw2LjM2NyBMMzAuNTg2LDcuNjU0IFogTTMxLjA0MSwxNi4yMzQgQzMxLjM0LDE2LjEzIDMxLjM3OSwxNi4xMTcgMzEuODk5LDE2LjAxMyBDMzMuOTE0LDE1LjU4NCAzNS41MjYsMTQuOTQ3IDM2Ljg1MiwxNC4wNjMgQzM4LjYzMywxMi44OCAzOS44NjgsMTEuMzQ2IDQwLjk3Myw4Ljk2NyBDNDAuMzEsOC40OTkgNDAuMTAyLDguMzA0IDM5LjU5NSw3LjY5MyBDMzkuMjA1LDguNzQ2IDM4Ljg0MSw5LjQ2MSAzOC4yNjksMTAuMjkzIEMzNy4yNDIsMTEuNzc1IDM2LjAzMywxMi43NzYgMzQuNDA4LDEzLjQ3OCBDMzMuMjI1LDEzLjk5OCAzMS42NzgsMTQuMzc1IDMwLjU2LDE0LjQ0IEwzMS4wNDEsMTYuMjM0IFogTTcuNDU4LDAgQzIuNSwwIDAsMy41MjIgMCw2LjQ1OSBDMCw4LjIzNyAwLjY4LDkuODE5IDIuMTM3LDEwLjQwOSBDMi4zNzYsMTAuNTA1IDIuNTksMTAuNDEyIDIuNjYsMTAuMTUgQzIuNzA4LDkuOTY5IDIuODIyLDkuNTExIDIuODczLDkuMzIgQzIuOTQzLDkuMDYxIDIuOTE2LDguOTcgMi43MjMsOC43NDQgQzIuMzAyLDguMjUzIDIuMDM0LDcuNjE3IDIuMDM0LDYuNzE2IEMyLjAzNCw0LjEwNCA0LjAwNywxLjc2NSA3LjE3MiwxLjc2NSBDOS45NzUsMS43NjUgMTEuNTE0LDMuNDYxIDExLjUxNCw1LjcyNiBDMTEuNTE0LDguNzA4IDEwLjE4MywxMS4xOCA4LjIwNiwxMS4xOCBDNy4xMTQsMTEuMTggNi4yOTcsMTAuMzI5IDYuNTU5LDkuMjMzIEM2Ljg3Miw3LjkyMiA3LjQ4LDYuNTA5IDcuNDgsNS41NjQgQzcuNDgsNC43MTcgNy4wMjIsNC4wMTEgNi4wNzIsNC4wMTEgQzQuOTU2LDQuMDExIDQuMDYsNS4xNTUgNC4wNiw2LjY4NyBDNC4wNiw3LjY2MyA0LjM5Myw4LjMyMyA0LjM5Myw4LjMyMyBDNC4zOTMsOC4zMjMgMy4yNTEsMTMuMTE3IDMuMDUxLDEzLjk1NyBDMi42NTIsMTUuNjI5IDIuOTkxLDE3LjY3OSAzLjAxOSwxNy44ODYgQzMuMDM2LDE4LjAwOSAzLjE5NSwxOC4wMzggMy4yNjcsMTcuOTQ2IEMzLjM3LDE3LjgxMiA0LjcsMTYuMTg3IDUuMTUxLDE0LjU2MiBDNS4yNzksMTQuMTAyIDUuODg1LDExLjcyIDUuODg1LDExLjcyIEM2LjI0OCwxMi40MDYgNy4zMDgsMTMuMDA5IDguNDM1LDEzLjAwOSBDMTEuNzksMTMuMDA5IDE0LjA2Niw5Ljk3OSAxNC4wNjYsNS45MjMgQzE0LjA2NiwyLjg1NyAxMS40NDQsMCA3LjQ1OCwwIFoiIGZpbGw9IiNmZmYiPjwvcGF0aD48L2c+PC9zdmc+);
}
 .PIN_1479713987220_embed_pin.PIN_1479713987220_ja .PIN_1479713987220_bd .PIN_1479713987220_hd .PIN_1479713987220_repin.PIN_1479713987220_save { 
  background: #bd081c url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzBweCIgd2lkdGg9IjMwcHgiIHZpZXdCb3g9Ii0xIC0xIDMxIDMxIj48Zz48cGF0aCBkPSJNMjkuNDQ5LDE0LjY2MiBDMjkuNDQ5LDIyLjcyMiAyMi44NjgsMjkuMjU2IDE0Ljc1LDI5LjI1NiBDNi42MzIsMjkuMjU2IDAuMDUxLDIyLjcyMiAwLjA1MSwxNC42NjIgQzAuMDUxLDYuNjAxIDYuNjMyLDAuMDY3IDE0Ljc1LDAuMDY3IEMyMi44NjgsMC4wNjcgMjkuNDQ5LDYuNjAxIDI5LjQ0OSwxNC42NjIiIGZpbGw9IiNmZmYiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxIj48L3BhdGg+PHBhdGggZD0iTTE0LjczMywxLjY4NiBDNy41MTYsMS42ODYgMS42NjUsNy40OTUgMS42NjUsMTQuNjYyIEMxLjY2NSwyMC4xNTkgNS4xMDksMjQuODU0IDkuOTcsMjYuNzQ0IEM5Ljg1NiwyNS43MTggOS43NTMsMjQuMTQzIDEwLjAxNiwyMy4wMjIgQzEwLjI1MywyMi4wMSAxMS41NDgsMTYuNTcyIDExLjU0OCwxNi41NzIgQzExLjU0OCwxNi41NzIgMTEuMTU3LDE1Ljc5NSAxMS4xNTcsMTQuNjQ2IEMxMS4xNTcsMTIuODQyIDEyLjIxMSwxMS40OTUgMTMuNTIyLDExLjQ5NSBDMTQuNjM3LDExLjQ5NSAxNS4xNzUsMTIuMzI2IDE1LjE3NSwxMy4zMjMgQzE1LjE3NSwxNC40MzYgMTQuNDYyLDE2LjEgMTQuMDkzLDE3LjY0MyBDMTMuNzg1LDE4LjkzNSAxNC43NDUsMTkuOTg4IDE2LjAyOCwxOS45ODggQzE4LjM1MSwxOS45ODggMjAuMTM2LDE3LjU1NiAyMC4xMzYsMTQuMDQ2IEMyMC4xMzYsMTAuOTM5IDE3Ljg4OCw4Ljc2NyAxNC42NzgsOC43NjcgQzEwLjk1OSw4Ljc2NyA4Ljc3NywxMS41MzYgOC43NzcsMTQuMzk4IEM4Ljc3NywxNS41MTMgOS4yMSwxNi43MDkgOS43NDksMTcuMzU5IEM5Ljg1NiwxNy40ODggOS44NzIsMTcuNiA5Ljg0LDE3LjczMSBDOS43NDEsMTguMTQxIDkuNTIsMTkuMDIzIDkuNDc3LDE5LjIwMyBDOS40MiwxOS40NCA5LjI4OCwxOS40OTEgOS4wNCwxOS4zNzYgQzcuNDA4LDE4LjYyMiA2LjM4NywxNi4yNTIgNi4zODcsMTQuMzQ5IEM2LjM4NywxMC4yNTYgOS4zODMsNi40OTcgMTUuMDIyLDYuNDk3IEMxOS41NTUsNi40OTcgMjMuMDc4LDkuNzA1IDIzLjA3OCwxMy45OTEgQzIzLjA3OCwxOC40NjMgMjAuMjM5LDIyLjA2MiAxNi4yOTcsMjIuMDYyIEMxNC45NzMsMjIuMDYyIDEzLjcyOCwyMS4zNzkgMTMuMzAyLDIwLjU3MiBDMTMuMzAyLDIwLjU3MiAxMi42NDcsMjMuMDUgMTIuNDg4LDIzLjY1NyBDMTIuMTkzLDI0Ljc4NCAxMS4zOTYsMjYuMTk2IDEwLjg2MywyNy4wNTggQzEyLjA4NiwyNy40MzQgMTMuMzg2LDI3LjYzNyAxNC43MzMsMjcuNjM3IEMyMS45NSwyNy42MzcgMjcuODAxLDIxLjgyOCAyNy44MDEsMTQuNjYyIEMyNy44MDEsNy40OTUgMjEuOTUsMS42ODYgMTQuNzMzLDEuNjg2IiBmaWxsPSIjYmQwODFjIj48L3BhdGg+PC9nPjwvc3ZnPg==) 5px 50% no-repeat;
  background-size: 16px 16px;
}
 .PIN_1479713987220_embed_pin.PIN_1479713987220_medium { 
  min-width: 237px;
  max-width: 345px;
}
 .PIN_1479713987220_embed_pin.PIN_1479713987220_large { 
  min-width: 345px;
  max-width: 600px;
  padding: 30px 34px 10px;
  font-size: 14px;
}
 .PIN_1479713987220_embed_pin.PIN_1479713987220_large .PIN_1479713987220_bd { 
  border-bottom: none;
}
 .PIN_1479713987220_embed_pin.PIN_1479713987220_large .PIN_1479713987220_bd .PIN_1479713987220_hd { 
  padding-top: 50px;
  border-bottom: none;
}
 .PIN_1479713987220_embed_pin.PIN_1479713987220_large .PIN_1479713987220_bd .PIN_1479713987220_hd .PIN_1479713987220_container .PIN_1479713987220_img,  .PIN_1479713987220_embed_pin.PIN_1479713987220_large .PIN_1479713987220_bd .PIN_1479713987220_hd .PIN_1479713987220_container .PIN_1479713987220_video { 
  border-radius: 8px;
}
 .PIN_1479713987220_embed_pin.PIN_1479713987220_large .PIN_1479713987220_bd .PIN_1479713987220_hd .PIN_1479713987220_repin { 
  top: 0px;
  left: 0px;
}
 .PIN_1479713987220_embed_pin.PIN_1479713987220_large .PIN_1479713987220_bd .PIN_1479713987220_source { 
  height: 50px;
}
 .PIN_1479713987220_embed_pin.PIN_1479713987220_large .PIN_1479713987220_bd .PIN_1479713987220_source .PIN_1479713987220_domain { 
  line-height: 50px;
}
 .PIN_1479713987220_embed_pin.PIN_1479713987220_large .PIN_1479713987220_bd .PIN_1479713987220_stats { 
  position: absolute;
  top: 0;
  right: 0;
  text-align: right;
}
 .PIN_1479713987220_embed_pin.PIN_1479713987220_large .PIN_1479713987220_bd .PIN_1479713987220_description { 
  font-size: 16px;
  line-height: 20px;
}
 .PIN_1479713987220_embed_pin.PIN_1479713987220_large .PIN_1479713987220_bd .PIN_1479713987220_menu { 
  height: inherit;
}
 .PIN_1479713987220_embed_pin.PIN_1479713987220_large .PIN_1479713987220_bd .PIN_1479713987220_menu .PIN_1479713987220_dropdown { 
  top: 50px;
  font-size: 14px;
  padding: 10px;
}
 .PIN_1479713987220_embed_pin.PIN_1479713987220_large .PIN_1479713987220_ft { 
  height: 60px;
  font-size: 16px;
}
 .PIN_1479713987220_embed_pin.PIN_1479713987220_large .PIN_1479713987220_ft .PIN_1479713987220_board,  .PIN_1479713987220_embed_pin.PIN_1479713987220_large .PIN_1479713987220_ft .PIN_1479713987220_pinner { 
  left: 60px;
}
 .PIN_1479713987220_embed_pin.PIN_1479713987220_large .PIN_1479713987220_ft .PIN_1479713987220_img { 
  height: 40px;
  width: 40px;
  background-size: 40px 40px;
  border-radius: 20px;
}
 .PIN_1479713987220_button_follow { 
  display: inline-block;
  color: #363636;
  box-sizing: border-box;
  box-shadow: inset 0 0 1px #888;
  border-radius: 3px;
  font: 11px "Helvetica Neue", Helvetica, arial, sans-serif;
  font-weight: bold;
  cursor: pointer;
  -webkit-font-smoothing: antialiased;
  height: 20px;
  line-height: 20px;
  padding: 0 4px 0 20px;
  background-color: #efefef;
  position: relative;
  white-space: nowrap;
  vertical-align: baseline;
}
 .PIN_1479713987220_button_follow:hover { 
  box-shadow: inset 0 0 1px #000;
}
 .PIN_1479713987220_button_follow::after { 
  content: "";
  position: absolute;
  height: 14px;
  width: 14px;
  top: 3px;
  left: 3px;
  background: transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzBweCIgd2lkdGg9IjMwcHgiIHZpZXdCb3g9Ii0xIC0xIDMxIDMxIj48Zz48cGF0aCBkPSJNMjkuNDQ5LDE0LjY2MiBDMjkuNDQ5LDIyLjcyMiAyMi44NjgsMjkuMjU2IDE0Ljc1LDI5LjI1NiBDNi42MzIsMjkuMjU2IDAuMDUxLDIyLjcyMiAwLjA1MSwxNC42NjIgQzAuMDUxLDYuNjAxIDYuNjMyLDAuMDY3IDE0Ljc1LDAuMDY3IEMyMi44NjgsMC4wNjcgMjkuNDQ5LDYuNjAxIDI5LjQ0OSwxNC42NjIiIGZpbGw9IiNmZmYiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxIj48L3BhdGg+PHBhdGggZD0iTTE0LjczMywxLjY4NiBDNy41MTYsMS42ODYgMS42NjUsNy40OTUgMS42NjUsMTQuNjYyIEMxLjY2NSwyMC4xNTkgNS4xMDksMjQuODU0IDkuOTcsMjYuNzQ0IEM5Ljg1NiwyNS43MTggOS43NTMsMjQuMTQzIDEwLjAxNiwyMy4wMjIgQzEwLjI1MywyMi4wMSAxMS41NDgsMTYuNTcyIDExLjU0OCwxNi41NzIgQzExLjU0OCwxNi41NzIgMTEuMTU3LDE1Ljc5NSAxMS4xNTcsMTQuNjQ2IEMxMS4xNTcsMTIuODQyIDEyLjIxMSwxMS40OTUgMTMuNTIyLDExLjQ5NSBDMTQuNjM3LDExLjQ5NSAxNS4xNzUsMTIuMzI2IDE1LjE3NSwxMy4zMjMgQzE1LjE3NSwxNC40MzYgMTQuNDYyLDE2LjEgMTQuMDkzLDE3LjY0MyBDMTMuNzg1LDE4LjkzNSAxNC43NDUsMTkuOTg4IDE2LjAyOCwxOS45ODggQzE4LjM1MSwxOS45ODggMjAuMTM2LDE3LjU1NiAyMC4xMzYsMTQuMDQ2IEMyMC4xMzYsMTAuOTM5IDE3Ljg4OCw4Ljc2NyAxNC42NzgsOC43NjcgQzEwLjk1OSw4Ljc2NyA4Ljc3NywxMS41MzYgOC43NzcsMTQuMzk4IEM4Ljc3NywxNS41MTMgOS4yMSwxNi43MDkgOS43NDksMTcuMzU5IEM5Ljg1NiwxNy40ODggOS44NzIsMTcuNiA5Ljg0LDE3LjczMSBDOS43NDEsMTguMTQxIDkuNTIsMTkuMDIzIDkuNDc3LDE5LjIwMyBDOS40MiwxOS40NCA5LjI4OCwxOS40OTEgOS4wNCwxOS4zNzYgQzcuNDA4LDE4LjYyMiA2LjM4NywxNi4yNTIgNi4zODcsMTQuMzQ5IEM2LjM4NywxMC4yNTYgOS4zODMsNi40OTcgMTUuMDIyLDYuNDk3IEMxOS41NTUsNi40OTcgMjMuMDc4LDkuNzA1IDIzLjA3OCwxMy45OTEgQzIzLjA3OCwxOC40NjMgMjAuMjM5LDIyLjA2MiAxNi4yOTcsMjIuMDYyIEMxNC45NzMsMjIuMDYyIDEzLjcyOCwyMS4zNzkgMTMuMzAyLDIwLjU3MiBDMTMuMzAyLDIwLjU3MiAxMi42NDcsMjMuMDUgMTIuNDg4LDIzLjY1NyBDMTIuMTkzLDI0Ljc4NCAxMS4zOTYsMjYuMTk2IDEwLjg2MywyNy4wNTggQzEyLjA4NiwyNy40MzQgMTMuMzg2LDI3LjYzNyAxNC43MzMsMjcuNjM3IEMyMS45NSwyNy42MzcgMjcuODAxLDIxLjgyOCAyNy44MDEsMTQuNjYyIEMyNy44MDEsNy40OTUgMjEuOTUsMS42ODYgMTQuNzMzLDEuNjg2IiBmaWxsPSIjYmQwODFjIj48L3BhdGg+PC9nPjwvc3ZnPg==) 0 0 no-repeat;
  background-size: 14px 14px;
}
 .PIN_1479713987220_button_follow.PIN_1479713987220_tall { 
  height: 26px;
  line-height: 26px;
  font-size: 13px;
  padding: 0 6px 0 25px;
  border-radius: 3px;
}
 .PIN_1479713987220_button_follow.PIN_1479713987220_tall::after { 
  height: 18px;
  width: 18px;
  top: 4px;
  left: 4px;
  background-size: 18px 18px;
}
 .PIN_1479713987220_button_pin { 
  cursor: pointer;
  display: inline-block;
  box-sizing: border-box;
  box-shadow: inset 0 0 1px #888;
  border-radius: 3px;
  height: 20px;
  width: 40px;
  -webkit-font-smoothing: antialiased;
  background: #efefef url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgd2lkdGg9IjQycHgiIHZpZXdCb3g9IjAgMCA0MiAxOCI+PGc+PHBhdGggZD0iTTE2Ljg1Myw2LjM0NSBDMTcuNjMyLDYuMzQ1IDE4LjM4LDUuNzAyIDE4LjUxLDQuOTA5IEMxOC42NjQsNC4xMzggMTguMTM1LDMuNDk0IDE3LjM1NywzLjQ5NCBDMTYuNTc4LDMuNDk0IDE1LjgzLDQuMTM4IDE1LjY5OCw0LjkwOSBDMTUuNTQ2LDUuNzAyIDE2LjA1Myw2LjM0NSAxNi44NTMsNi4zNDUgWiBNNy40NTgsMCBDMi41LDAgMCwzLjUyMiAwLDYuNDU5IEMwLDguMjM3IDAuNjgsOS44MTkgMi4xMzcsMTAuNDA5IEMyLjM3NiwxMC41MDUgMi41OSwxMC40MTIgMi42NiwxMC4xNSBDMi43MDgsOS45NjkgMi44MjIsOS41MTEgMi44NzMsOS4zMiBDMi45NDMsOS4wNjEgMi45MTYsOC45NyAyLjcyMyw4Ljc0NCBDMi4zMDIsOC4yNTMgMi4wMzQsNy42MTcgMi4wMzQsNi43MTYgQzIuMDM0LDQuMTA0IDQuMDA3LDEuNzY1IDcuMTcyLDEuNzY1IEM5Ljk3NSwxLjc2NSAxMS41MTQsMy40NjEgMTEuNTE0LDUuNzI2IEMxMS41MTQsOC43MDggMTAuMTgzLDExLjE4IDguMjA2LDExLjE4IEM3LjExNCwxMS4xOCA2LjI5NywxMC4zMjkgNi41NTksOS4yMzMgQzYuODcyLDcuOTIyIDcuNDgsNi41MDkgNy40OCw1LjU2NCBDNy40OCw0LjcxNyA3LjAyMiw0LjAxMSA2LjA3Miw0LjAxMSBDNC45NTYsNC4wMTEgNC4wNiw1LjE1NSA0LjA2LDYuNjg3IEM0LjA2LDcuNjYzIDQuMzkzLDguMzIzIDQuMzkzLDguMzIzIEM0LjM5Myw4LjMyMyAzLjI1MSwxMy4xMTcgMy4wNTEsMTMuOTU3IEMyLjY1MiwxNS42MjkgMi45OTEsMTcuNjc5IDMuMDE5LDE3Ljg4NiBDMy4wMzYsMTguMDA5IDMuMTk1LDE4LjAzOCAzLjI2NywxNy45NDYgQzMuMzcsMTcuODEyIDQuNywxNi4xODcgNS4xNTEsMTQuNTYyIEM1LjI3OSwxNC4xMDIgNS44ODUsMTEuNzIgNS44ODUsMTEuNzIgQzYuMjQ4LDEyLjQwNiA3LjMwOCwxMy4wMDkgOC40MzUsMTMuMDA5IEMxMS43OSwxMy4wMDkgMTQuMDY2LDkuOTc5IDE0LjA2Niw1LjkyMyBDMTQuMDY2LDIuODU3IDExLjQ0NCwwIDcuNDU4LDAgWiBNMjYuODk2LDE0LjE4OSBDMjYuMzQ4LDE0LjE4OSAyNi4xMTcsMTMuOTE1IDI2LjExNywxMy4zMjggQzI2LjExNywxMi40MDQgMjcuMDM1LDEwLjA5MSAyNy4wMzUsOS4wNDEgQzI3LjAzNSw3LjYzOCAyNi4yNzYsNi44MjYgMjQuNzIsNi44MjYgQzIzLjczOSw2LjgyNiAyMi43MjIsNy40NTMgMjIuMjkxLDguMDAzIEMyMi4yOTEsOC4wMDMgMjIuNDIyLDcuNTUzIDIyLjQ2Nyw3LjM4IEMyMi41MTUsNy4xOTYgMjIuNDE1LDYuODg0IDIyLjE3Myw2Ljg4NCBMMjAuNjUxLDYuODg0IEMyMC4zMjgsNi44ODQgMjAuMjM4LDcuMDU1IDIwLjE5MSw3LjI0NCBDMjAuMTcyLDcuMzIgMTkuNjI0LDkuNTg0IDE5LjA5OCwxMS42MzIgQzE4LjczOCwxMy4wMzQgMTcuODYzLDE0LjIwNSAxNi45MjgsMTQuMjA1IEMxNi40NDcsMTQuMjA1IDE2LjIzMywxMy45MDYgMTYuMjMzLDEzLjM5OSBDMTYuMjMzLDEyLjk1OSAxNi41MTksMTEuODc3IDE2Ljg2LDEwLjUzNCBDMTcuMjc2LDguODk4IDE3LjY0Miw3LjU1MSAxNy42ODEsNy4zOTQgQzE3LjczMiw3LjE5MiAxNy42NDIsNy4wMTcgMTcuMzc5LDcuMDE3IEwxNS44NDksNy4wMTcgQzE1LjU3Miw3LjAxNyAxNS40NzMsNy4xNjEgMTUuNDE0LDcuMzYxIEMxNS40MTQsNy4zNjEgMTQuOTgzLDguOTc3IDE0LjUyNywxMC43NzUgQzE0LjE5NiwxMi4wNzkgMTMuODMsMTMuNDA5IDEzLjgzLDE0LjAzNCBDMTMuODMsMTUuMTQ4IDE0LjMzNiwxNS45NDQgMTUuNzI0LDE1Ljk0NCBDMTYuNzk2LDE1Ljk0NCAxNy42NDQsMTUuNDUgMTguMjkyLDE0Ljc2NCBDMTguMTk3LDE1LjEzNSAxOC4xMzYsMTUuNDE0IDE4LjEzLDE1LjQzOSBDMTguMDc0LDE1LjY1IDE4LjE0MiwxNS44MzggMTguMzk0LDE1LjgzOCBMMTkuOTYxLDE1LjgzOCBDMjAuMjMzLDE1LjgzOCAyMC4zMzcsMTUuNzMgMjAuMzk0LDE1LjQ5NCBDMjAuNDQ5LDE1LjI2OSAyMS42MTksMTAuNjY3IDIxLjYxOSwxMC42NjcgQzIxLjkyOCw5LjQ0MyAyMi42OTIsOC42MzIgMjMuNzY4LDguNjMyIEMyNC4yNzksOC42MzIgMjQuNzIsOC45NjcgMjQuNjY5LDkuNjE4IEMyNC42MTIsMTAuMzMzIDIzLjc0MSwxMi45MDMgMjMuNzQxLDE0LjAzMSBDMjMuNzQxLDE0Ljg4NCAyNC4wNiwxNS45NDUgMjUuNjgzLDE1Ljk0NSBDMjYuNzg5LDE1Ljk0NSAyNy42MDMsMTUuNDY0IDI4LjE5NSwxNC43ODYgTDI3LjQ4OSwxMy45NDEgQzI3LjMxMSwxNC4wOTQgMjcuMTE0LDE0LjE4OSAyNi44OTYsMTQuMTg5IFogTTQxLjcwMSw2Ljg3MyBMNDAuMTM0LDYuODczIEM0MC4xMzQsNi44NzMgNDAuODU2LDQuMTA5IDQwLjg3Myw0LjAzNSBDNDAuOTQyLDMuNzQ1IDQwLjY5OCwzLjU3OCA0MC40NDEsMy42MzEgQzQwLjQ0MSwzLjYzMSAzOS4yMywzLjg2NiAzOS4wMDUsMy45MTMgQzM4Ljc3OSwzLjk1OCAzOC42MDQsNC4wODEgMzguNTIyLDQuNDAzIEMzOC41MTIsNC40NDUgMzcuODgsNi44NzMgMzcuODgsNi44NzMgTDM2LjYyMiw2Ljg3MyBDMzYuMzg1LDYuODczIDM2LjI0NSw2Ljk2OCAzNi4xOTIsNy4xODggQzM2LjExNSw3LjUwNCAzNS45NzUsOC4xNDUgMzUuOTM2LDguMjk3IEMzNS44ODUsOC40OTQgMzYsOC42NDQgMzYuMjIyLDguNjQ0IEwzNy40NTcsOC42NDQgQzM3LjQ0OCw4LjY3NyAzNy4wNjQsMTAuMTI1IDM2LjcyNSwxMS41MjEgTDM2LjcyNCwxMS41MTYgQzM2LjcyLDExLjUzMiAzNi43MTYsMTEuNTQ2IDM2LjcxMiwxMS41NjIgTDM2LjcxMiwxMS41NTYgQzM2LjcxMiwxMS41NTYgMzYuNzA4LDExLjU3MSAzNi43MDIsMTEuNTk4IEMzNi4zMjQsMTIuOTY4IDM1LjExOCwxNC4yMDkgMzQuMjAxLDE0LjIwOSBDMzMuNzIxLDE0LjIwOSAzMy41MDYsMTMuOTA5IDMzLjUwNiwxMy40MDIgQzMzLjUwNiwxMi45NjMgMzMuNzkyLDExLjg4IDM0LjEzNCwxMC41MzcgQzM0LjU0OSw4LjkwMSAzNC45MTUsNy41NTUgMzQuOTU1LDcuMzk3IEMzNS4wMDYsNy4xOTYgMzQuOTE1LDcuMDIgMzQuNjUyLDcuMDIgTDMzLjEyMiw3LjAyIEMzMi44NDUsNy4wMiAzMi43NDYsNy4xNjQgMzIuNjg3LDcuMzY0IEMzMi42ODcsNy4zNjQgMzIuMjU3LDguOTggMzEuOCwxMC43NzggQzMxLjQ2OSwxMi4wODMgMzEuMTAzLDEzLjQxMiAzMS4xMDMsMTQuMDM3IEMzMS4xMDMsMTUuMTUxIDMxLjYwOSwxNS45NDggMzIuOTk3LDE1Ljk0OCBDMzQuMDcsMTUuOTQ4IDM1LjEzNiwxNS40NTMgMzUuNzgzLDE0Ljc2NyBDMzUuNzgzLDE0Ljc2NyAzNi4wMTEsMTQuNTIxIDM2LjIzLDE0LjIyOSBDMzYuMjQxLDE0LjU4MSAzNi4zMjQsMTQuODM3IDM2LjQxMSwxNS4wMTggQzM2LjQ1OCwxNS4xMTkgMzYuNTE1LDE1LjIxNSAzNi41ODEsMTUuMzAzIEMzNi41ODIsMTUuMzA0IDM2LjU4MywxNS4zMDYgMzYuNTg1LDE1LjMwOCBMMzYuNTg1LDE1LjMwOCBDMzYuODkxLDE1LjcxMyAzNy4zOTgsMTUuOTYyIDM4LjE1MSwxNS45NjIgQzM5Ljg5NCwxNS45NjIgNDAuOTQ0LDE0LjkzOCA0MS41NjIsMTMuOTA5IEw0MC43MDQsMTMuMjM5IEM0MC4zMzMsMTMuNzc0IDM5LjgzOSwxNC4xNzUgMzkuMzI0LDE0LjE3NSBDMzguODQ2LDE0LjE3NSAzOC41NzksMTMuODc4IDM4LjU3OSwxMy4zNzIgQzM4LjU3OSwxMi45MzUgMzguODg5LDExLjg2OCAzOS4yMjksMTAuNTMgQzM5LjM0NCwxMC4wODMgMzkuNTE2LDkuNDAxIDM5LjcwOCw4LjY0NCBMNDEuMzAyLDguNjQ0IEM0MS41MzksOC42NDQgNDEuNjc4LDguNTQ5IDQxLjczMiw4LjMyOSBDNDEuODA4LDguMDEyIDQxLjk0OCw3LjM3MiA0MS45ODgsNy4yMjEgQzQyLjAzOSw3LjAyMyA0MS45MjMsNi44NzMgNDEuNzAxLDYuODczIFogTTM0LjEyNiw2LjM0OCBDMzQuOTA1LDYuMzQ4IDM1LjY1Myw1LjcwNiAzNS43ODMsNC45MTIgQzM1LjkzNyw0LjE0MSAzNS40MDksMy40OTggMzQuNjMsMy40OTggQzMzLjg1MSwzLjQ5OCAzMy4xMDMsNC4xNDEgMzIuOTcxLDQuOTEyIEMzMi44MTksNS43MDYgMzMuMzI2LDYuMzQ4IDM0LjEyNiw2LjM0OCBaIiBmaWxsPSIjYmQwODFjIj48L3BhdGg+PC9nPjwvc3ZnPg==) 50% 50% no-repeat;
  background-size: 75%;
  position: relative;
  font: 12px "Helvetica Neue", Helvetica, arial, sans-serif;
  color: #555;
  text-align: center;
  vertical-align: baseline;
}
 .PIN_1479713987220_button_pin:hover { 
  box-shadow: inset 0 0 1px #000;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_above .PIN_1479713987220_count { 
  position: absolute;
  top: -28px;
  left: 0;
  height: 28px;
  width: inherit;
  line-height: 24px;
  background: transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNzZweCIgd2lkdGg9IjExNHB4IiB2aWV3Qm94PSIwIDAgMTE0IDc2Ij48Zz48cGF0aCBkPSJNOSAxQzQuNiAxIDEgNC42IDEgOXY0M2MwIDQuMyAzLjYgOCA4IDhoMjZsMTggMTVoNy41bDE2LTE1SDEwNWM0LjQgMCA4LTMuNyA4LThWOWMwLTQuNC0zLjYtOC04LThIOXoiIGZpbGw9IiNmZmYiIHN0cm9rZT0iI2I1YjViNSIgc3Ryb2tlLXdpZHRoPSIyIj48L3BhdGg+PC9nPjwvc3ZnPg==) 0 0 no-repeat;
  background-size: 40px 28px;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_above.PIN_1479713987220_padded { 
  margin-top: 28px;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_beside .PIN_1479713987220_count { 
  position: absolute;
  right: -45px;
  text-align: center;
  text-indent: 5px;
  height: inherit;
  width: 45px;
  font-size: 11px;
  line-height: 20px;
  background: transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNTZweCIgd2lkdGg9IjEyNnB4IiB2aWV3Qm94PSIyIDAgMTMwIDYwIj48Zz48cGF0aCBkPSJNMTE5LjYgMmM0LjUgMCA4IDMuNiA4IDh2NDBjMCA0LjQtMy41IDgtOCA4SDIzLjNMMS42IDMyLjR2LTQuNkwyMy4zIDJoOTYuM3oiIGZpbGw9IiNmZmYiIHN0cm9rZT0iI2I1YjViNSIgc3Ryb2tlLXdpZHRoPSIyIj48L3BhdGg+PC9nPjwvc3ZnPg==);
  background-size: cover;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_beside.PIN_1479713987220_padded { 
  margin-right: 45px;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_ja { 
  background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgd2lkdGg9IjQxcHgiIHZpZXdCb3g9IjAgMCA0MSAxOCI+PGc+PHBhdGggZD0iTTE5LjgyMiw3LjE3MyBDMTkuODIyLDYuNTEgMTkuODM1LDYuMjc2IDE5Ljg4Nyw1Ljk2NCBMMTguMTQ1LDUuOTY0IEMxOC4xOTcsNi4yODkgMTguMTk3LDYuNDk3IDE4LjE5Nyw3LjE2IEwxOC4yMSwxMy4xOTIgQzE4LjIxLDEzLjk0NiAxOC4yMjMsMTQuMTY3IDE4LjI0OSwxNC4zODggQzE4LjMyNywxNS4wMjUgMTguNTIyLDE1LjQ0MSAxOC44ODYsMTUuNzE0IEMxOS4zOTMsMTYuMTA0IDIwLjI5LDE2LjI3MyAyMS45MjgsMTYuMjczIEMyMi43MjEsMTYuMjczIDI0LjM1OSwxNi4xOTUgMjUuMTI2LDE2LjExNyBDMjYuNTA0LDE1Ljk4NyAyNi41NjksMTUuOTc0IDI2Ljg0MiwxNS45NzQgTDI2Ljc2NCwxNC4yNDUgQzI2LjE5MiwxNC40MTQgMjUuOTA2LDE0LjQ3OSAyNS4yODIsMTQuNTU3IEMyNC4zMzMsMTQuNjg3IDIzLjEzNywxNC43NjUgMjIuMjY2LDE0Ljc2NSBDMjEuMDA1LDE0Ljc2NSAyMC4yNjQsMTQuNjQ4IDIwLjA0MywxNC40MjcgQzE5Ljg2MSwxNC4yNDUgMTkuODA5LDEzLjk1OSAxOS44MDksMTMuMjMxIEMxOS44MDksMTMuMTc5IDE5LjgwOSwxMy4xMDEgMTkuODIyLDEzLjAyMyBMMTkuODIyLDExLjMwNyBDMjEuOTkzLDEwLjkwNCAyNC4wMDgsMTAuMjI4IDI1LjkzMiw5LjI0IEwyNi4yNyw5LjA3MSBDMjYuMzc0LDkuMDE5IDI2LjQsOS4wMDYgMjYuNTQzLDguOTU0IEwyNS41MDMsNy40ODUgQzI0LjY1OCw4LjI3OCAyMS43ODUsOS40MzUgMTkuODIyLDkuNzk5IEwxOS44MjIsNy4xNzMgWiBNMjcuMzEsNC44NzIgQzI2LjQ5MSw0Ljg3MiAyNS44MTUsNS41NDggMjUuODE1LDYuMzY3IEMyNS44MTUsNy4xOTkgMjYuNDkxLDcuODc1IDI3LjMxLDcuODc1IEMyOC4xNDIsNy44NzUgMjguODE4LDcuMTk5IDI4LjgxOCw2LjM2NyBDMjguODE4LDUuNTQ4IDI4LjE0Miw0Ljg3MiAyNy4zMSw0Ljg3MiBMMjcuMzEsNC44NzIgWiBNMjcuMzEsNS41MjIgQzI3Ljc5MSw1LjUyMiAyOC4xNjgsNS44OTkgMjguMTY4LDYuMzY3IEMyOC4xNjgsNi44MzUgMjcuNzkxLDcuMjI1IDI3LjMxLDcuMjI1IEMyNi44NDIsNy4yMjUgMjYuNDY1LDYuODM1IDI2LjQ2NSw2LjM2NyBDMjYuNDY1LDUuODk5IDI2Ljg0Miw1LjUyMiAyNy4zMSw1LjUyMiBMMjcuMzEsNS41MjIgWiBNMzAuNTg2LDcuNjU0IEMzMS43OTUsOC4zMyAzMi44NjEsOS4xODggMzMuOTAxLDEwLjI5MyBMMzUuMDE5LDguODc2IEMzNC4wMTgsNy45MjcgMzMuMjEyLDcuMzI5IDMxLjY2NSw2LjM2NyBMMzAuNTg2LDcuNjU0IFogTTMxLjA0MSwxNi4yMzQgQzMxLjM0LDE2LjEzIDMxLjM3OSwxNi4xMTcgMzEuODk5LDE2LjAxMyBDMzMuOTE0LDE1LjU4NCAzNS41MjYsMTQuOTQ3IDM2Ljg1MiwxNC4wNjMgQzM4LjYzMywxMi44OCAzOS44NjgsMTEuMzQ2IDQwLjk3Myw4Ljk2NyBDNDAuMzEsOC40OTkgNDAuMTAyLDguMzA0IDM5LjU5NSw3LjY5MyBDMzkuMjA1LDguNzQ2IDM4Ljg0MSw5LjQ2MSAzOC4yNjksMTAuMjkzIEMzNy4yNDIsMTEuNzc1IDM2LjAzMywxMi43NzYgMzQuNDA4LDEzLjQ3OCBDMzMuMjI1LDEzLjk5OCAzMS42NzgsMTQuMzc1IDMwLjU2LDE0LjQ0IEwzMS4wNDEsMTYuMjM0IFogTTcuNDU4LDAgQzIuNSwwIDAsMy41MjIgMCw2LjQ1OSBDMCw4LjIzNyAwLjY4LDkuODE5IDIuMTM3LDEwLjQwOSBDMi4zNzYsMTAuNTA1IDIuNTksMTAuNDEyIDIuNjYsMTAuMTUgQzIuNzA4LDkuOTY5IDIuODIyLDkuNTExIDIuODczLDkuMzIgQzIuOTQzLDkuMDYxIDIuOTE2LDguOTcgMi43MjMsOC43NDQgQzIuMzAyLDguMjUzIDIuMDM0LDcuNjE3IDIuMDM0LDYuNzE2IEMyLjAzNCw0LjEwNCA0LjAwNywxLjc2NSA3LjE3MiwxLjc2NSBDOS45NzUsMS43NjUgMTEuNTE0LDMuNDYxIDExLjUxNCw1LjcyNiBDMTEuNTE0LDguNzA4IDEwLjE4MywxMS4xOCA4LjIwNiwxMS4xOCBDNy4xMTQsMTEuMTggNi4yOTcsMTAuMzI5IDYuNTU5LDkuMjMzIEM2Ljg3Miw3LjkyMiA3LjQ4LDYuNTA5IDcuNDgsNS41NjQgQzcuNDgsNC43MTcgNy4wMjIsNC4wMTEgNi4wNzIsNC4wMTEgQzQuOTU2LDQuMDExIDQuMDYsNS4xNTUgNC4wNiw2LjY4NyBDNC4wNiw3LjY2MyA0LjM5Myw4LjMyMyA0LjM5Myw4LjMyMyBDNC4zOTMsOC4zMjMgMy4yNTEsMTMuMTE3IDMuMDUxLDEzLjk1NyBDMi42NTIsMTUuNjI5IDIuOTkxLDE3LjY3OSAzLjAxOSwxNy44ODYgQzMuMDM2LDE4LjAwOSAzLjE5NSwxOC4wMzggMy4yNjcsMTcuOTQ2IEMzLjM3LDE3LjgxMiA0LjcsMTYuMTg3IDUuMTUxLDE0LjU2MiBDNS4yNzksMTQuMTAyIDUuODg1LDExLjcyIDUuODg1LDExLjcyIEM2LjI0OCwxMi40MDYgNy4zMDgsMTMuMDA5IDguNDM1LDEzLjAwOSBDMTEuNzksMTMuMDA5IDE0LjA2Niw5Ljk3OSAxNC4wNjYsNS45MjMgQzE0LjA2NiwyLjg1NyAxMS40NDQsMCA3LjQ1OCwwIFoiIGZpbGw9IiNiZDA4MWMiPjwvcGF0aD48L2c+PC9zdmc+);
  background-size: 72%;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_red { 
  background-color: #bd081c;
  background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgd2lkdGg9IjQycHgiIHZpZXdCb3g9IjAgMCA0MiAxOCI+PGc+PHBhdGggZD0iTTE2Ljg1Myw2LjM0NSBDMTcuNjMyLDYuMzQ1IDE4LjM4LDUuNzAyIDE4LjUxLDQuOTA5IEMxOC42NjQsNC4xMzggMTguMTM1LDMuNDk0IDE3LjM1NywzLjQ5NCBDMTYuNTc4LDMuNDk0IDE1LjgzLDQuMTM4IDE1LjY5OCw0LjkwOSBDMTUuNTQ2LDUuNzAyIDE2LjA1Myw2LjM0NSAxNi44NTMsNi4zNDUgWiBNNy40NTgsMCBDMi41LDAgMCwzLjUyMiAwLDYuNDU5IEMwLDguMjM3IDAuNjgsOS44MTkgMi4xMzcsMTAuNDA5IEMyLjM3NiwxMC41MDUgMi41OSwxMC40MTIgMi42NiwxMC4xNSBDMi43MDgsOS45NjkgMi44MjIsOS41MTEgMi44NzMsOS4zMiBDMi45NDMsOS4wNjEgMi45MTYsOC45NyAyLjcyMyw4Ljc0NCBDMi4zMDIsOC4yNTMgMi4wMzQsNy42MTcgMi4wMzQsNi43MTYgQzIuMDM0LDQuMTA0IDQuMDA3LDEuNzY1IDcuMTcyLDEuNzY1IEM5Ljk3NSwxLjc2NSAxMS41MTQsMy40NjEgMTEuNTE0LDUuNzI2IEMxMS41MTQsOC43MDggMTAuMTgzLDExLjE4IDguMjA2LDExLjE4IEM3LjExNCwxMS4xOCA2LjI5NywxMC4zMjkgNi41NTksOS4yMzMgQzYuODcyLDcuOTIyIDcuNDgsNi41MDkgNy40OCw1LjU2NCBDNy40OCw0LjcxNyA3LjAyMiw0LjAxMSA2LjA3Miw0LjAxMSBDNC45NTYsNC4wMTEgNC4wNiw1LjE1NSA0LjA2LDYuNjg3IEM0LjA2LDcuNjYzIDQuMzkzLDguMzIzIDQuMzkzLDguMzIzIEM0LjM5Myw4LjMyMyAzLjI1MSwxMy4xMTcgMy4wNTEsMTMuOTU3IEMyLjY1MiwxNS42MjkgMi45OTEsMTcuNjc5IDMuMDE5LDE3Ljg4NiBDMy4wMzYsMTguMDA5IDMuMTk1LDE4LjAzOCAzLjI2NywxNy45NDYgQzMuMzcsMTcuODEyIDQuNywxNi4xODcgNS4xNTEsMTQuNTYyIEM1LjI3OSwxNC4xMDIgNS44ODUsMTEuNzIgNS44ODUsMTEuNzIgQzYuMjQ4LDEyLjQwNiA3LjMwOCwxMy4wMDkgOC40MzUsMTMuMDA5IEMxMS43OSwxMy4wMDkgMTQuMDY2LDkuOTc5IDE0LjA2Niw1LjkyMyBDMTQuMDY2LDIuODU3IDExLjQ0NCwwIDcuNDU4LDAgWiBNMjYuODk2LDE0LjE4OSBDMjYuMzQ4LDE0LjE4OSAyNi4xMTcsMTMuOTE1IDI2LjExNywxMy4zMjggQzI2LjExNywxMi40MDQgMjcuMDM1LDEwLjA5MSAyNy4wMzUsOS4wNDEgQzI3LjAzNSw3LjYzOCAyNi4yNzYsNi44MjYgMjQuNzIsNi44MjYgQzIzLjczOSw2LjgyNiAyMi43MjIsNy40NTMgMjIuMjkxLDguMDAzIEMyMi4yOTEsOC4wMDMgMjIuNDIyLDcuNTUzIDIyLjQ2Nyw3LjM4IEMyMi41MTUsNy4xOTYgMjIuNDE1LDYuODg0IDIyLjE3Myw2Ljg4NCBMMjAuNjUxLDYuODg0IEMyMC4zMjgsNi44ODQgMjAuMjM4LDcuMDU1IDIwLjE5MSw3LjI0NCBDMjAuMTcyLDcuMzIgMTkuNjI0LDkuNTg0IDE5LjA5OCwxMS42MzIgQzE4LjczOCwxMy4wMzQgMTcuODYzLDE0LjIwNSAxNi45MjgsMTQuMjA1IEMxNi40NDcsMTQuMjA1IDE2LjIzMywxMy45MDYgMTYuMjMzLDEzLjM5OSBDMTYuMjMzLDEyLjk1OSAxNi41MTksMTEuODc3IDE2Ljg2LDEwLjUzNCBDMTcuMjc2LDguODk4IDE3LjY0Miw3LjU1MSAxNy42ODEsNy4zOTQgQzE3LjczMiw3LjE5MiAxNy42NDIsNy4wMTcgMTcuMzc5LDcuMDE3IEwxNS44NDksNy4wMTcgQzE1LjU3Miw3LjAxNyAxNS40NzMsNy4xNjEgMTUuNDE0LDcuMzYxIEMxNS40MTQsNy4zNjEgMTQuOTgzLDguOTc3IDE0LjUyNywxMC43NzUgQzE0LjE5NiwxMi4wNzkgMTMuODMsMTMuNDA5IDEzLjgzLDE0LjAzNCBDMTMuODMsMTUuMTQ4IDE0LjMzNiwxNS45NDQgMTUuNzI0LDE1Ljk0NCBDMTYuNzk2LDE1Ljk0NCAxNy42NDQsMTUuNDUgMTguMjkyLDE0Ljc2NCBDMTguMTk3LDE1LjEzNSAxOC4xMzYsMTUuNDE0IDE4LjEzLDE1LjQzOSBDMTguMDc0LDE1LjY1IDE4LjE0MiwxNS44MzggMTguMzk0LDE1LjgzOCBMMTkuOTYxLDE1LjgzOCBDMjAuMjMzLDE1LjgzOCAyMC4zMzcsMTUuNzMgMjAuMzk0LDE1LjQ5NCBDMjAuNDQ5LDE1LjI2OSAyMS42MTksMTAuNjY3IDIxLjYxOSwxMC42NjcgQzIxLjkyOCw5LjQ0MyAyMi42OTIsOC42MzIgMjMuNzY4LDguNjMyIEMyNC4yNzksOC42MzIgMjQuNzIsOC45NjcgMjQuNjY5LDkuNjE4IEMyNC42MTIsMTAuMzMzIDIzLjc0MSwxMi45MDMgMjMuNzQxLDE0LjAzMSBDMjMuNzQxLDE0Ljg4NCAyNC4wNiwxNS45NDUgMjUuNjgzLDE1Ljk0NSBDMjYuNzg5LDE1Ljk0NSAyNy42MDMsMTUuNDY0IDI4LjE5NSwxNC43ODYgTDI3LjQ4OSwxMy45NDEgQzI3LjMxMSwxNC4wOTQgMjcuMTE0LDE0LjE4OSAyNi44OTYsMTQuMTg5IFogTTQxLjcwMSw2Ljg3MyBMNDAuMTM0LDYuODczIEM0MC4xMzQsNi44NzMgNDAuODU2LDQuMTA5IDQwLjg3Myw0LjAzNSBDNDAuOTQyLDMuNzQ1IDQwLjY5OCwzLjU3OCA0MC40NDEsMy42MzEgQzQwLjQ0MSwzLjYzMSAzOS4yMywzLjg2NiAzOS4wMDUsMy45MTMgQzM4Ljc3OSwzLjk1OCAzOC42MDQsNC4wODEgMzguNTIyLDQuNDAzIEMzOC41MTIsNC40NDUgMzcuODgsNi44NzMgMzcuODgsNi44NzMgTDM2LjYyMiw2Ljg3MyBDMzYuMzg1LDYuODczIDM2LjI0NSw2Ljk2OCAzNi4xOTIsNy4xODggQzM2LjExNSw3LjUwNCAzNS45NzUsOC4xNDUgMzUuOTM2LDguMjk3IEMzNS44ODUsOC40OTQgMzYsOC42NDQgMzYuMjIyLDguNjQ0IEwzNy40NTcsOC42NDQgQzM3LjQ0OCw4LjY3NyAzNy4wNjQsMTAuMTI1IDM2LjcyNSwxMS41MjEgTDM2LjcyNCwxMS41MTYgQzM2LjcyLDExLjUzMiAzNi43MTYsMTEuNTQ2IDM2LjcxMiwxMS41NjIgTDM2LjcxMiwxMS41NTYgQzM2LjcxMiwxMS41NTYgMzYuNzA4LDExLjU3MSAzNi43MDIsMTEuNTk4IEMzNi4zMjQsMTIuOTY4IDM1LjExOCwxNC4yMDkgMzQuMjAxLDE0LjIwOSBDMzMuNzIxLDE0LjIwOSAzMy41MDYsMTMuOTA5IDMzLjUwNiwxMy40MDIgQzMzLjUwNiwxMi45NjMgMzMuNzkyLDExLjg4IDM0LjEzNCwxMC41MzcgQzM0LjU0OSw4LjkwMSAzNC45MTUsNy41NTUgMzQuOTU1LDcuMzk3IEMzNS4wMDYsNy4xOTYgMzQuOTE1LDcuMDIgMzQuNjUyLDcuMDIgTDMzLjEyMiw3LjAyIEMzMi44NDUsNy4wMiAzMi43NDYsNy4xNjQgMzIuNjg3LDcuMzY0IEMzMi42ODcsNy4zNjQgMzIuMjU3LDguOTggMzEuOCwxMC43NzggQzMxLjQ2OSwxMi4wODMgMzEuMTAzLDEzLjQxMiAzMS4xMDMsMTQuMDM3IEMzMS4xMDMsMTUuMTUxIDMxLjYwOSwxNS45NDggMzIuOTk3LDE1Ljk0OCBDMzQuMDcsMTUuOTQ4IDM1LjEzNiwxNS40NTMgMzUuNzgzLDE0Ljc2NyBDMzUuNzgzLDE0Ljc2NyAzNi4wMTEsMTQuNTIxIDM2LjIzLDE0LjIyOSBDMzYuMjQxLDE0LjU4MSAzNi4zMjQsMTQuODM3IDM2LjQxMSwxNS4wMTggQzM2LjQ1OCwxNS4xMTkgMzYuNTE1LDE1LjIxNSAzNi41ODEsMTUuMzAzIEMzNi41ODIsMTUuMzA0IDM2LjU4MywxNS4zMDYgMzYuNTg1LDE1LjMwOCBMMzYuNTg1LDE1LjMwOCBDMzYuODkxLDE1LjcxMyAzNy4zOTgsMTUuOTYyIDM4LjE1MSwxNS45NjIgQzM5Ljg5NCwxNS45NjIgNDAuOTQ0LDE0LjkzOCA0MS41NjIsMTMuOTA5IEw0MC43MDQsMTMuMjM5IEM0MC4zMzMsMTMuNzc0IDM5LjgzOSwxNC4xNzUgMzkuMzI0LDE0LjE3NSBDMzguODQ2LDE0LjE3NSAzOC41NzksMTMuODc4IDM4LjU3OSwxMy4zNzIgQzM4LjU3OSwxMi45MzUgMzguODg5LDExLjg2OCAzOS4yMjksMTAuNTMgQzM5LjM0NCwxMC4wODMgMzkuNTE2LDkuNDAxIDM5LjcwOCw4LjY0NCBMNDEuMzAyLDguNjQ0IEM0MS41MzksOC42NDQgNDEuNjc4LDguNTQ5IDQxLjczMiw4LjMyOSBDNDEuODA4LDguMDEyIDQxLjk0OCw3LjM3MiA0MS45ODgsNy4yMjEgQzQyLjAzOSw3LjAyMyA0MS45MjMsNi44NzMgNDEuNzAxLDYuODczIFogTTM0LjEyNiw2LjM0OCBDMzQuOTA1LDYuMzQ4IDM1LjY1Myw1LjcwNiAzNS43ODMsNC45MTIgQzM1LjkzNyw0LjE0MSAzNS40MDksMy40OTggMzQuNjMsMy40OTggQzMzLjg1MSwzLjQ5OCAzMy4xMDMsNC4xNDEgMzIuOTcxLDQuOTEyIEMzMi44MTksNS43MDYgMzMuMzI2LDYuMzQ4IDM0LjEyNiw2LjM0OCBaIiBmaWxsPSIjZmZmIj48L3BhdGg+PC9nPjwvc3ZnPg==);
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_red.PIN_1479713987220_ja { 
  background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMThweCIgd2lkdGg9IjQxcHgiIHZpZXdCb3g9IjAgMCA0MSAxOCI+PGc+PHBhdGggZD0iTTE5LjgyMiw3LjE3MyBDMTkuODIyLDYuNTEgMTkuODM1LDYuMjc2IDE5Ljg4Nyw1Ljk2NCBMMTguMTQ1LDUuOTY0IEMxOC4xOTcsNi4yODkgMTguMTk3LDYuNDk3IDE4LjE5Nyw3LjE2IEwxOC4yMSwxMy4xOTIgQzE4LjIxLDEzLjk0NiAxOC4yMjMsMTQuMTY3IDE4LjI0OSwxNC4zODggQzE4LjMyNywxNS4wMjUgMTguNTIyLDE1LjQ0MSAxOC44ODYsMTUuNzE0IEMxOS4zOTMsMTYuMTA0IDIwLjI5LDE2LjI3MyAyMS45MjgsMTYuMjczIEMyMi43MjEsMTYuMjczIDI0LjM1OSwxNi4xOTUgMjUuMTI2LDE2LjExNyBDMjYuNTA0LDE1Ljk4NyAyNi41NjksMTUuOTc0IDI2Ljg0MiwxNS45NzQgTDI2Ljc2NCwxNC4yNDUgQzI2LjE5MiwxNC40MTQgMjUuOTA2LDE0LjQ3OSAyNS4yODIsMTQuNTU3IEMyNC4zMzMsMTQuNjg3IDIzLjEzNywxNC43NjUgMjIuMjY2LDE0Ljc2NSBDMjEuMDA1LDE0Ljc2NSAyMC4yNjQsMTQuNjQ4IDIwLjA0MywxNC40MjcgQzE5Ljg2MSwxNC4yNDUgMTkuODA5LDEzLjk1OSAxOS44MDksMTMuMjMxIEMxOS44MDksMTMuMTc5IDE5LjgwOSwxMy4xMDEgMTkuODIyLDEzLjAyMyBMMTkuODIyLDExLjMwNyBDMjEuOTkzLDEwLjkwNCAyNC4wMDgsMTAuMjI4IDI1LjkzMiw5LjI0IEwyNi4yNyw5LjA3MSBDMjYuMzc0LDkuMDE5IDI2LjQsOS4wMDYgMjYuNTQzLDguOTU0IEwyNS41MDMsNy40ODUgQzI0LjY1OCw4LjI3OCAyMS43ODUsOS40MzUgMTkuODIyLDkuNzk5IEwxOS44MjIsNy4xNzMgWiBNMjcuMzEsNC44NzIgQzI2LjQ5MSw0Ljg3MiAyNS44MTUsNS41NDggMjUuODE1LDYuMzY3IEMyNS44MTUsNy4xOTkgMjYuNDkxLDcuODc1IDI3LjMxLDcuODc1IEMyOC4xNDIsNy44NzUgMjguODE4LDcuMTk5IDI4LjgxOCw2LjM2NyBDMjguODE4LDUuNTQ4IDI4LjE0Miw0Ljg3MiAyNy4zMSw0Ljg3MiBMMjcuMzEsNC44NzIgWiBNMjcuMzEsNS41MjIgQzI3Ljc5MSw1LjUyMiAyOC4xNjgsNS44OTkgMjguMTY4LDYuMzY3IEMyOC4xNjgsNi44MzUgMjcuNzkxLDcuMjI1IDI3LjMxLDcuMjI1IEMyNi44NDIsNy4yMjUgMjYuNDY1LDYuODM1IDI2LjQ2NSw2LjM2NyBDMjYuNDY1LDUuODk5IDI2Ljg0Miw1LjUyMiAyNy4zMSw1LjUyMiBMMjcuMzEsNS41MjIgWiBNMzAuNTg2LDcuNjU0IEMzMS43OTUsOC4zMyAzMi44NjEsOS4xODggMzMuOTAxLDEwLjI5MyBMMzUuMDE5LDguODc2IEMzNC4wMTgsNy45MjcgMzMuMjEyLDcuMzI5IDMxLjY2NSw2LjM2NyBMMzAuNTg2LDcuNjU0IFogTTMxLjA0MSwxNi4yMzQgQzMxLjM0LDE2LjEzIDMxLjM3OSwxNi4xMTcgMzEuODk5LDE2LjAxMyBDMzMuOTE0LDE1LjU4NCAzNS41MjYsMTQuOTQ3IDM2Ljg1MiwxNC4wNjMgQzM4LjYzMywxMi44OCAzOS44NjgsMTEuMzQ2IDQwLjk3Myw4Ljk2NyBDNDAuMzEsOC40OTkgNDAuMTAyLDguMzA0IDM5LjU5NSw3LjY5MyBDMzkuMjA1LDguNzQ2IDM4Ljg0MSw5LjQ2MSAzOC4yNjksMTAuMjkzIEMzNy4yNDIsMTEuNzc1IDM2LjAzMywxMi43NzYgMzQuNDA4LDEzLjQ3OCBDMzMuMjI1LDEzLjk5OCAzMS42NzgsMTQuMzc1IDMwLjU2LDE0LjQ0IEwzMS4wNDEsMTYuMjM0IFogTTcuNDU4LDAgQzIuNSwwIDAsMy41MjIgMCw2LjQ1OSBDMCw4LjIzNyAwLjY4LDkuODE5IDIuMTM3LDEwLjQwOSBDMi4zNzYsMTAuNTA1IDIuNTksMTAuNDEyIDIuNjYsMTAuMTUgQzIuNzA4LDkuOTY5IDIuODIyLDkuNTExIDIuODczLDkuMzIgQzIuOTQzLDkuMDYxIDIuOTE2LDguOTcgMi43MjMsOC43NDQgQzIuMzAyLDguMjUzIDIuMDM0LDcuNjE3IDIuMDM0LDYuNzE2IEMyLjAzNCw0LjEwNCA0LjAwNywxLjc2NSA3LjE3MiwxLjc2NSBDOS45NzUsMS43NjUgMTEuNTE0LDMuNDYxIDExLjUxNCw1LjcyNiBDMTEuNTE0LDguNzA4IDEwLjE4MywxMS4xOCA4LjIwNiwxMS4xOCBDNy4xMTQsMTEuMTggNi4yOTcsMTAuMzI5IDYuNTU5LDkuMjMzIEM2Ljg3Miw3LjkyMiA3LjQ4LDYuNTA5IDcuNDgsNS41NjQgQzcuNDgsNC43MTcgNy4wMjIsNC4wMTEgNi4wNzIsNC4wMTEgQzQuOTU2LDQuMDExIDQuMDYsNS4xNTUgNC4wNiw2LjY4NyBDNC4wNiw3LjY2MyA0LjM5Myw4LjMyMyA0LjM5Myw4LjMyMyBDNC4zOTMsOC4zMjMgMy4yNTEsMTMuMTE3IDMuMDUxLDEzLjk1NyBDMi42NTIsMTUuNjI5IDIuOTkxLDE3LjY3OSAzLjAxOSwxNy44ODYgQzMuMDM2LDE4LjAwOSAzLjE5NSwxOC4wMzggMy4yNjcsMTcuOTQ2IEMzLjM3LDE3LjgxMiA0LjcsMTYuMTg3IDUuMTUxLDE0LjU2MiBDNS4yNzksMTQuMTAyIDUuODg1LDExLjcyIDUuODg1LDExLjcyIEM2LjI0OCwxMi40MDYgNy4zMDgsMTMuMDA5IDguNDM1LDEzLjAwOSBDMTEuNzksMTMuMDA5IDE0LjA2Niw5Ljk3OSAxNC4wNjYsNS45MjMgQzE0LjA2NiwyLjg1NyAxMS40NDQsMCA3LjQ1OCwwIFoiIGZpbGw9IiNmZmYiPjwvcGF0aD48L2c+PC9zdmc+);
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_white { 
  background-color: #fff;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_save { 
  border-radius: 2px;
  text-indent: 20px;
  width: auto;
  padding: 0 4px 0 0;
  text-align: center;
  font: 11px/20px "Helvetica Neue", Helvetica, sans-serif;
  font-weight: bold;
  color: #fff;
  background: #bd081c url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzBweCIgd2lkdGg9IjMwcHgiIHZpZXdCb3g9Ii0xIC0xIDMxIDMxIj48Zz48cGF0aCBkPSJNMjkuNDQ5LDE0LjY2MiBDMjkuNDQ5LDIyLjcyMiAyMi44NjgsMjkuMjU2IDE0Ljc1LDI5LjI1NiBDNi42MzIsMjkuMjU2IDAuMDUxLDIyLjcyMiAwLjA1MSwxNC42NjIgQzAuMDUxLDYuNjAxIDYuNjMyLDAuMDY3IDE0Ljc1LDAuMDY3IEMyMi44NjgsMC4wNjcgMjkuNDQ5LDYuNjAxIDI5LjQ0OSwxNC42NjIiIGZpbGw9IiNmZmYiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxIj48L3BhdGg+PHBhdGggZD0iTTE0LjczMywxLjY4NiBDNy41MTYsMS42ODYgMS42NjUsNy40OTUgMS42NjUsMTQuNjYyIEMxLjY2NSwyMC4xNTkgNS4xMDksMjQuODU0IDkuOTcsMjYuNzQ0IEM5Ljg1NiwyNS43MTggOS43NTMsMjQuMTQzIDEwLjAxNiwyMy4wMjIgQzEwLjI1MywyMi4wMSAxMS41NDgsMTYuNTcyIDExLjU0OCwxNi41NzIgQzExLjU0OCwxNi41NzIgMTEuMTU3LDE1Ljc5NSAxMS4xNTcsMTQuNjQ2IEMxMS4xNTcsMTIuODQyIDEyLjIxMSwxMS40OTUgMTMuNTIyLDExLjQ5NSBDMTQuNjM3LDExLjQ5NSAxNS4xNzUsMTIuMzI2IDE1LjE3NSwxMy4zMjMgQzE1LjE3NSwxNC40MzYgMTQuNDYyLDE2LjEgMTQuMDkzLDE3LjY0MyBDMTMuNzg1LDE4LjkzNSAxNC43NDUsMTkuOTg4IDE2LjAyOCwxOS45ODggQzE4LjM1MSwxOS45ODggMjAuMTM2LDE3LjU1NiAyMC4xMzYsMTQuMDQ2IEMyMC4xMzYsMTAuOTM5IDE3Ljg4OCw4Ljc2NyAxNC42NzgsOC43NjcgQzEwLjk1OSw4Ljc2NyA4Ljc3NywxMS41MzYgOC43NzcsMTQuMzk4IEM4Ljc3NywxNS41MTMgOS4yMSwxNi43MDkgOS43NDksMTcuMzU5IEM5Ljg1NiwxNy40ODggOS44NzIsMTcuNiA5Ljg0LDE3LjczMSBDOS43NDEsMTguMTQxIDkuNTIsMTkuMDIzIDkuNDc3LDE5LjIwMyBDOS40MiwxOS40NCA5LjI4OCwxOS40OTEgOS4wNCwxOS4zNzYgQzcuNDA4LDE4LjYyMiA2LjM4NywxNi4yNTIgNi4zODcsMTQuMzQ5IEM2LjM4NywxMC4yNTYgOS4zODMsNi40OTcgMTUuMDIyLDYuNDk3IEMxOS41NTUsNi40OTcgMjMuMDc4LDkuNzA1IDIzLjA3OCwxMy45OTEgQzIzLjA3OCwxOC40NjMgMjAuMjM5LDIyLjA2MiAxNi4yOTcsMjIuMDYyIEMxNC45NzMsMjIuMDYyIDEzLjcyOCwyMS4zNzkgMTMuMzAyLDIwLjU3MiBDMTMuMzAyLDIwLjU3MiAxMi42NDcsMjMuMDUgMTIuNDg4LDIzLjY1NyBDMTIuMTkzLDI0Ljc4NCAxMS4zOTYsMjYuMTk2IDEwLjg2MywyNy4wNTggQzEyLjA4NiwyNy40MzQgMTMuMzg2LDI3LjYzNyAxNC43MzMsMjcuNjM3IEMyMS45NSwyNy42MzcgMjcuODAxLDIxLjgyOCAyNy44MDEsMTQuNjYyIEMyNy44MDEsNy40OTUgMjEuOTUsMS42ODYgMTQuNzMzLDEuNjg2IiBmaWxsPSIjYmQwODFjIj48L3BhdGg+PC9nPjwvc3ZnPg==) 3px 50% no-repeat;
  background-size: 14px 14px;
  -webkit-font-smoothing: antialiased;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_save:hover { 
  background-color: #aa0719;
  box-shadow: none;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_save .PIN_1479713987220_count { 
  text-indent: 0;
  position: absolute;
  color: #555;
  background: #efefef;
  border-radius: 2px;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_save .PIN_1479713987220_count::before { 
  content: "";
  position: absolute;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_save.PIN_1479713987220_beside .PIN_1479713987220_count { 
  right: -46px;
  height: 20px;
  width: 40px;
  font-size: 10px;
  line-height: 20px;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_save.PIN_1479713987220_beside .PIN_1479713987220_count::before { 
  top: 3px;
  left: -4px;
  border-right: 7px solid #efefef;
  border-top: 7px solid transparent;
  border-bottom: 7px solid transparent;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_save.PIN_1479713987220_above .PIN_1479713987220_count { 
  top: -36px;
  width: 100%;
  height: 30px;
  font-size: 10px;
  line-height: 30px;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_save.PIN_1479713987220_above .PIN_1479713987220_count::before { 
  bottom: -4px;
  left: 4px;
  border-top: 7px solid #efefef;
  border-right: 7px solid transparent;
  border-left: 7px solid transparent;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_save.PIN_1479713987220_above.PIN_1479713987220_padded { 
  margin-top: 28px;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_tall { 
  height: 28px;
  width: 56px;
  border-radius: 3px;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_tall.PIN_1479713987220_above .PIN_1479713987220_count { 
  position: absolute;
  height: 37px;
  width: inherit;
  top: -37px;
  left: 0;
  line-height: 30px;
  font-size: 14px;
  background: transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNzZweCIgd2lkdGg9IjExNHB4IiB2aWV3Qm94PSIwIDAgMTE0IDc2Ij48Zz48cGF0aCBkPSJNOSAxQzQuNiAxIDEgNC42IDEgOXY0M2MwIDQuMyAzLjYgOCA4IDhoMjZsMTggMTVoNy41bDE2LTE1SDEwNWM0LjQgMCA4LTMuNyA4LThWOWMwLTQuNC0zLjYtOC04LThIOXoiIGZpbGw9IiNmZmYiIHN0cm9rZT0iI2I1YjViNSIgc3Ryb2tlLXdpZHRoPSIyIj48L3BhdGg+PC9nPjwvc3ZnPg==);
  background-size: cover;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_tall.PIN_1479713987220_above.PIN_1479713987220_padded { 
  margin-top: 37px;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_tall.PIN_1479713987220_beside .PIN_1479713987220_count { 
  text-indent: 5px;
  position: absolute;
  right: -63px;
  height: inherit;
  width: 63px;
  font-size: 14px;
  line-height: 28px;
  background: transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNTZweCIgd2lkdGg9IjEyNnB4IiB2aWV3Qm94PSIyIDAgMTMwIDYwIj48Zz48cGF0aCBkPSJNMTE5LjYgMmM0LjUgMCA4IDMuNiA4IDh2NDBjMCA0LjQtMy41IDgtOCA4SDIzLjNMMS42IDMyLjR2LTQuNkwyMy4zIDJoOTYuM3oiIGZpbGw9IiNmZmYiIHN0cm9rZT0iI2I1YjViNSIgc3Ryb2tlLXdpZHRoPSIyIj48L3BhdGg+PC9nPjwvc3ZnPg==);
  background-size: cover;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_tall.PIN_1479713987220_beside.PIN_1479713987220_padded { 
  margin-right: 63px;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_tall.PIN_1479713987220_save { 
  border-radius: 4px;
  width: auto;
  background-position-x: 6px;
  background-size: 18px 18px;
  text-indent: 29px;
  font: 14px/28px "Helvetica Neue", Helvetica, Arial, "sans-serif";
  font-weight: bold;
  padding: 0 6px 0 0;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_tall.PIN_1479713987220_save .PIN_1479713987220_count { 
  position: absolute;
  color: #555;
  font-size: 12px;
  text-indent: 0;
  background: #efefef;
  border-radius: 4px;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_tall.PIN_1479713987220_save .PIN_1479713987220_count::before { 
  content: "";
  position: absolute;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_tall.PIN_1479713987220_save.PIN_1479713987220_above .PIN_1479713987220_count { 
  font-size: 14px;
  top: -50px;
  width: 100%;
  height: 44px;
  line-height: 44px;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_tall.PIN_1479713987220_save.PIN_1479713987220_above .PIN_1479713987220_count::before { 
  bottom: -4px;
  left: 7px;
  border-top: 7px solid #efefef;
  border-right: 7px solid transparent;
  border-left: 7px solid transparent;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_tall.PIN_1479713987220_save.PIN_1479713987220_beside .PIN_1479713987220_count { 
  font-size: 14px;
  right: -63px;
  width: 56px;
  height: 28px;
  line-height: 28px;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_tall.PIN_1479713987220_save.PIN_1479713987220_beside .PIN_1479713987220_count::before { 
  top: 7px;
  left: -4px;
  border-right: 7px solid #efefef;
  border-top: 7px solid transparent;
  border-bottom: 7px solid transparent;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_round { 
  height: 16px;
  width: 16px;
  background: transparent url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzBweCIgd2lkdGg9IjMwcHgiIHZpZXdCb3g9Ii0xIC0xIDMxIDMxIj48Zz48cGF0aCBkPSJNMjkuNDQ5LDE0LjY2MiBDMjkuNDQ5LDIyLjcyMiAyMi44NjgsMjkuMjU2IDE0Ljc1LDI5LjI1NiBDNi42MzIsMjkuMjU2IDAuMDUxLDIyLjcyMiAwLjA1MSwxNC42NjIgQzAuMDUxLDYuNjAxIDYuNjMyLDAuMDY3IDE0Ljc1LDAuMDY3IEMyMi44NjgsMC4wNjcgMjkuNDQ5LDYuNjAxIDI5LjQ0OSwxNC42NjIiIGZpbGw9IiNmZmYiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIxIj48L3BhdGg+PHBhdGggZD0iTTE0LjczMywxLjY4NiBDNy41MTYsMS42ODYgMS42NjUsNy40OTUgMS42NjUsMTQuNjYyIEMxLjY2NSwyMC4xNTkgNS4xMDksMjQuODU0IDkuOTcsMjYuNzQ0IEM5Ljg1NiwyNS43MTggOS43NTMsMjQuMTQzIDEwLjAxNiwyMy4wMjIgQzEwLjI1MywyMi4wMSAxMS41NDgsMTYuNTcyIDExLjU0OCwxNi41NzIgQzExLjU0OCwxNi41NzIgMTEuMTU3LDE1Ljc5NSAxMS4xNTcsMTQuNjQ2IEMxMS4xNTcsMTIuODQyIDEyLjIxMSwxMS40OTUgMTMuNTIyLDExLjQ5NSBDMTQuNjM3LDExLjQ5NSAxNS4xNzUsMTIuMzI2IDE1LjE3NSwxMy4zMjMgQzE1LjE3NSwxNC40MzYgMTQuNDYyLDE2LjEgMTQuMDkzLDE3LjY0MyBDMTMuNzg1LDE4LjkzNSAxNC43NDUsMTkuOTg4IDE2LjAyOCwxOS45ODggQzE4LjM1MSwxOS45ODggMjAuMTM2LDE3LjU1NiAyMC4xMzYsMTQuMDQ2IEMyMC4xMzYsMTAuOTM5IDE3Ljg4OCw4Ljc2NyAxNC42NzgsOC43NjcgQzEwLjk1OSw4Ljc2NyA4Ljc3NywxMS41MzYgOC43NzcsMTQuMzk4IEM4Ljc3NywxNS41MTMgOS4yMSwxNi43MDkgOS43NDksMTcuMzU5IEM5Ljg1NiwxNy40ODggOS44NzIsMTcuNiA5Ljg0LDE3LjczMSBDOS43NDEsMTguMTQxIDkuNTIsMTkuMDIzIDkuNDc3LDE5LjIwMyBDOS40MiwxOS40NCA5LjI4OCwxOS40OTEgOS4wNCwxOS4zNzYgQzcuNDA4LDE4LjYyMiA2LjM4NywxNi4yNTIgNi4zODcsMTQuMzQ5IEM2LjM4NywxMC4yNTYgOS4zODMsNi40OTcgMTUuMDIyLDYuNDk3IEMxOS41NTUsNi40OTcgMjMuMDc4LDkuNzA1IDIzLjA3OCwxMy45OTEgQzIzLjA3OCwxOC40NjMgMjAuMjM5LDIyLjA2MiAxNi4yOTcsMjIuMDYyIEMxNC45NzMsMjIuMDYyIDEzLjcyOCwyMS4zNzkgMTMuMzAyLDIwLjU3MiBDMTMuMzAyLDIwLjU3MiAxMi42NDcsMjMuMDUgMTIuNDg4LDIzLjY1NyBDMTIuMTkzLDI0Ljc4NCAxMS4zOTYsMjYuMTk2IDEwLjg2MywyNy4wNTggQzEyLjA4NiwyNy40MzQgMTMuMzg2LDI3LjYzNyAxNC43MzMsMjcuNjM3IEMyMS45NSwyNy42MzcgMjcuODAxLDIxLjgyOCAyNy44MDEsMTQuNjYyIEMyNy44MDEsNy40OTUgMjEuOTUsMS42ODYgMTQuNzMzLDEuNjg2IiBmaWxsPSIjYmQwODFjIj48L3BhdGg+PC9nPjwvc3ZnPg==) 0 0 no-repeat;
  background-size: 16px 16px;
  box-shadow: none;
}
 .PIN_1479713987220_button_pin.PIN_1479713987220_round.PIN_1479713987220_tall { 
  height: 32px;
  width: 32px;
  background-size: 32px 32px;
}
</style></head>

<body class="single single-post postid-1043 single-format-standard custom-font-enabled single-author" data-pin-hover="true" cz-shortcut-listen="true">
<div id="page" class="hfeed site">
	<header id="masthead" class="site-header" role="banner">
		<hgroup>
			<h1 class="site-title"><a href="http://www.adrianandgenese.com/blogger/" title="Be cheap and DIY:" rel="home">Be cheap and DIY:</a></h1>
			<h2 class="site-description"></h2>
		</hgroup>

		<nav id="site-navigation" class="main-navigation" role="navigation">
			<button class="menu-toggle">Menu</button>
			<a class="assistive-text" href="http://www.adrianandgenese.com/blogger/2016/09/29/nodemcu-esp8266-http-relay-control-with-12v-battery-monitor-and-wifi-configuration-part-2/#content" title="Skip to content">Skip to content</a>
			<div class="nav-menu"><ul><li><a href="http://www.adrianandgenese.com/blogger/">Home</a></li><li class="page_item page-item-81"><a href="http://www.adrianandgenese.com/blogger/featured-media/">Featured Media</a></li><li class="page_item page-item-632"><a href="http://www.adrianandgenese.com/blogger/swag/">Swag</a></li><li class="page_item page-item-2"><a href="http://www.adrianandgenese.com/blogger/about/">About</a></li><li class="page_item page-item-414"><a href="http://www.adrianandgenese.com/blogger/contact/">Contact</a></li></ul></div>
		</nav><!-- #site-navigation -->

			</header><!-- #masthead -->

	<div id="main" class="wrapper">
	<div id="primary" class="site-content">
		<div id="content" role="main">

			
				
	<article id="post-1043" class="post-1043 post type-post status-publish format-standard hentry category-computers category-hack tag-12v tag-12v-deep-cycle tag-adc tag-analog-read tag-battery tag-configure-wifi-using-browser tag-dc tag-esp8266 tag-http tag-led tag-monitoring tag-nodemcu tag-relay tag-tcp-server tag-webpage tag-webserver tag-wifi-access-point tag-wifi-client">
				<header class="entry-header">
			
						<h1 class="entry-title">NodeMCU ESP8266 http relay control with 12v battery monitor and wifi configuration – Part 2</h1>
										<div class="comments-link">
					<a href="http://www.adrianandgenese.com/blogger/2016/09/29/nodemcu-esp8266-http-relay-control-with-12v-battery-monitor-and-wifi-configuration-part-2/#respond"><span class="leave-reply">Leave a reply</span></a>				</div><!-- .comments-link -->
					</header><!-- .entry-header -->

				<div class="entry-content">
			<h3>Part 2. (looking for <a href="http://www.adrianandgenese.com/blogger/2016/09/07/nodemcu-esp8266-http-relay-control-with-12v-battery-monitor-and-wifi-configuration/">Part 1</a>?)</h3>
<p>In our part 1 of this article we learned how to take a stock nodemcu esp8266 and flash it with the latest version of nodemcu. We also learned how to send and run files onto the unit using ESPlorer. In this final part 2, we will finally get to the guts of the how to set up a&nbsp;NodeMCU ESP8266 which provides a web interface for relay control, 12v battery monitor, and wifi configuration.</p>
<h3>Some newbie hints on coding the NodeMCU ESP8266 with Lua scripts</h3>
<p>NodeMCU default behavior loads the init.lua script on boot. When beginning to code and test out its functionality, its a good idea to just load your setup parameters in the init.lua script and for the init.lua script to call another lua file to run the bulk of the code. This lets you comment out the auto loading of the secondary lua script and lets you load it manually using the ESPlorer tool until you are certain the code doesn’t cause a kernel panic and leave you in an endless bootloop.</p>
<p>I ran into an issue where I didnt do this, and my ESP8266 bootlooped. I then needed to reflash the unit with a lower version of firmware, then reflash the unit with the newer firmware in order to wipe out its filesystem contents which contained the crappy code. What a waste of time.</p>
<p>Below&nbsp;is an example with the&nbsp;line calling the&nbsp;main.lua file to run commented out so I can just run it manually instead of automatically on startup:</p>
<p>Init.lua for testing</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5832a4a5119e7132518833" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate crayon-wrapped" data-settings=" minimize scroll-mouseover wrap" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: 0px; display: block; position: absolute; z-index: 2;"><span class="crayon-title">init.lua testing</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button crayon-pressed" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Lua</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: auto;">-- init.lua --

wifi.setmode(wifi.STATION) --Set network mode to station to connect it to wifi router. You can also set it to AP to make it a access point allowing connection from other wifi devices.

--Set a static ip so its easy to access
cfg = {
    ip="192.168.1.175",
    netmask="255.255.255.0",
    gateway="192.168.1.1"
  }
wifi.sta.setip(cfg)

--Your router wifi network's SSID and password
wifi.sta.config("SSID","PASSWORD")
--Automatically connect to network after disconnection
wifi.sta.autoconnect(1)
print ("\r\n")
--Print network ip address on UART to confirm that network is connected
print(wifi.sta.getip())

-- run main --
-- dofile("main.lua") --</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: auto;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5832a4a5119e7132518833-1" style="height: 15px;">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a5119e7132518833-2" style="height: 15px;">2</div><div class="crayon-num" data-line="crayon-5832a4a5119e7132518833-3" style="height: 45px;">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a5119e7132518833-4" style="height: 15px;">4</div><div class="crayon-num" data-line="crayon-5832a4a5119e7132518833-5" style="height: 15px;">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a5119e7132518833-6" style="height: 15px;">6</div><div class="crayon-num" data-line="crayon-5832a4a5119e7132518833-7" style="height: 15px;">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a5119e7132518833-8" style="height: 15px;">8</div><div class="crayon-num" data-line="crayon-5832a4a5119e7132518833-9" style="height: 15px;">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a5119e7132518833-10" style="height: 15px;">10</div><div class="crayon-num" data-line="crayon-5832a4a5119e7132518833-11" style="height: 15px;">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a5119e7132518833-12" style="height: 15px;">12</div><div class="crayon-num" data-line="crayon-5832a4a5119e7132518833-13" style="height: 15px;">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a5119e7132518833-14" style="height: 15px;">14</div><div class="crayon-num" data-line="crayon-5832a4a5119e7132518833-15" style="height: 15px;">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a5119e7132518833-16" style="height: 15px;">16</div><div class="crayon-num" data-line="crayon-5832a4a5119e7132518833-17" style="height: 15px;">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a5119e7132518833-18" style="height: 15px;">18</div><div class="crayon-num" data-line="crayon-5832a4a5119e7132518833-19" style="height: 15px;">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a5119e7132518833-20" style="height: 15px;">20</div><div class="crayon-num" data-line="crayon-5832a4a5119e7132518833-21" style="height: 15px;">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a5119e7132518833-22" style="height: 15px;">22</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5832a4a5119e7132518833-1"><span class="crayon-c">-- init.lua --</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a5119e7132518833-2">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a5119e7132518833-3"><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-e">setmode</span><span class="crayon-sy">(</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">STATION</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-c">--Set network mode to station to connect it to wifi router. You can also set it to AP to make it a access point allowing connection from other wifi devices.</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a5119e7132518833-4">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a5119e7132518833-5"><span class="crayon-c">--Set a static ip so its easy to access</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a5119e7132518833-6"><span class="crayon-v">cfg</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5832a4a5119e7132518833-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">ip</span><span class="crayon-o">=</span><span class="crayon-s">"192.168.1.175"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a5119e7132518833-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">netmask</span><span class="crayon-o">=</span><span class="crayon-s">"255.255.255.0"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5832a4a5119e7132518833-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">gateway</span><span class="crayon-o">=</span><span class="crayon-s">"192.168.1.1"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a5119e7132518833-10"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5832a4a5119e7132518833-11"><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">sta</span><span class="crayon-sy">.</span><span class="crayon-e">setip</span><span class="crayon-sy">(</span><span class="crayon-v">cfg</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a5119e7132518833-12">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a5119e7132518833-13"><span class="crayon-c">--Your router wifi network's SSID and password</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a5119e7132518833-14"><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">sta</span><span class="crayon-sy">.</span><span class="crayon-e">config</span><span class="crayon-sy">(</span><span class="crayon-s">"SSID"</span><span class="crayon-sy">,</span><span class="crayon-s">"PASSWORD"</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a5119e7132518833-15"><span class="crayon-c">--Automatically connect to network after disconnection</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a5119e7132518833-16"><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">sta</span><span class="crayon-sy">.</span><span class="crayon-e">autoconnect</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a5119e7132518833-17"><span class="crayon-r">print</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-s">"\r\n"</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a5119e7132518833-18"><span class="crayon-c">--Print network ip address on UART to confirm that network is connected</span></div><div class="crayon-line" id="crayon-5832a4a5119e7132518833-19"><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">sta</span><span class="crayon-sy">.</span><span class="crayon-e">getip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a5119e7132518833-20">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a5119e7132518833-21"><span class="crayon-c">-- run main --</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a5119e7132518833-22"><span class="crayon-c">-- dofile("main.lua") --</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0026 seconds] -->
<p>OK back to the topic at hand which was creating a wifi connected battery charger which can also allow me to monitor the battery voltage on my deep cycle battery left in Shasta. Whew!</p>
<h3>The&nbsp;Hardware</h3>
<p>My basic battery charger relay control and battery voltage monitor over http project involves just a few parts:</p>
<ol>
<li>A NodeMCU ESP8266 development board off ebay, or you can buy one from <a href="https://www.amazon.com/gp/product/B010O1G1ES/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B010O1G1ES&amp;linkCode=as2&amp;tag=realjuic-20&amp;linkId=3b0a5434c9193cd0fd77000397317f76" target="_blank">amazon here</a></li>
<li>One (1) 110v-240v 30A 5v relay (to switch the power on or off to the battery charger)</li>
<li>One (1)&nbsp;LED (visual indicator to show if charging or not – optional)</li>
<li>Two (2) 1/4W resistors (I used a 1M ohm for R1 and a 330k ohm for R2 to make a voltage divider)</li>
<li>One (1) Ceramic Disc .1uf 25v Capacitor (to normalize the voltage readings)</li>
</ol>
<h3>Wiring the NodeMCU to the hardware</h3>
<p>Wiring is pretty straightforward: Im using the v0.9 NodeMCU development board but&nbsp;could only find the NodeMCU v1.0 image&nbsp;for the illustration below, but the pinout is pretty much the same. Just pay attention to the pin designations:</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5832a4a5119fd324438597" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; position: absolute; z-index: 2;"><span class="crayon-title">Pin Assignments</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">RIGHT Side of NODEmcu
D1 - relay in
D2 - relay in
D3 - LED +
GND - Relay Ground (if desired)
D5 - Switch (other side of switch pin is shorted to battery ground)
GND - LED Ground

LEFT side of NODEmcu
A0 - to middle of voltage divider
GND - Common Battery Ground (or relay ground)
5V - to relay 5V</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5832a4a5119fd324438597-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a5119fd324438597-2">2</div><div class="crayon-num" data-line="crayon-5832a4a5119fd324438597-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a5119fd324438597-4">4</div><div class="crayon-num" data-line="crayon-5832a4a5119fd324438597-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a5119fd324438597-6">6</div><div class="crayon-num" data-line="crayon-5832a4a5119fd324438597-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a5119fd324438597-8">8</div><div class="crayon-num" data-line="crayon-5832a4a5119fd324438597-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a5119fd324438597-10">10</div><div class="crayon-num" data-line="crayon-5832a4a5119fd324438597-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a5119fd324438597-12">12</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5832a4a5119fd324438597-1"><span class="crayon-e">RIGHT </span><span class="crayon-e">Side </span><span class="crayon-e">of </span><span class="crayon-e">NODEmcu</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a5119fd324438597-2"><span class="crayon-v">D1</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">relay </span><span class="crayon-st">in</span></div><div class="crayon-line" id="crayon-5832a4a5119fd324438597-3"><span class="crayon-v">D2</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">relay </span><span class="crayon-st">in</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a5119fd324438597-4"><span class="crayon-v">D3</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">LED</span><span class="crayon-h"> </span><span class="crayon-o">+</span></div><div class="crayon-line" id="crayon-5832a4a5119fd324438597-5"><span class="crayon-v">GND</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">Relay </span><span class="crayon-e">Ground</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">desired</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a5119fd324438597-6"><span class="crayon-v">D5</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-st">Switch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e">other </span><span class="crayon-e">side </span><span class="crayon-e">of </span><span class="crayon-st">switch</span><span class="crayon-h"> </span><span class="crayon-e">pin </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-e">shorted </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">battery </span><span class="crayon-v">ground</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a5119fd324438597-7"><span class="crayon-v">GND</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">LED </span><span class="crayon-e">Ground</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a5119fd324438597-8">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a5119fd324438597-9"><span class="crayon-e">LEFT </span><span class="crayon-e">side </span><span class="crayon-e">of </span><span class="crayon-e">NODEmcu</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a5119fd324438597-10"><span class="crayon-v">A0</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">middle </span><span class="crayon-e">of </span><span class="crayon-e">voltage </span><span class="crayon-e">divider</span></div><div class="crayon-line" id="crayon-5832a4a5119fd324438597-11"><span class="crayon-v">GND</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">Common </span><span class="crayon-e">Battery </span><span class="crayon-e">Ground</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-st">or</span><span class="crayon-h"> </span><span class="crayon-e">relay </span><span class="crayon-v">ground</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a5119fd324438597-12"><span class="crayon-cn">5V</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-i">relay</span><span class="crayon-h"> </span><span class="crayon-cn">5V</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0028 seconds] -->
<p>&nbsp;</p>
<p><a href="http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/nodemcu_schematic.jpg"><img class="aligncenter size-medium wp-image-1046" src="./reconnect if disconnect_files/nodemcu_schematic-744x461.jpg" alt="nodemcu_schematic" width="744" height="461" srcset="http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/nodemcu_schematic-744x461.jpg 744w, http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/nodemcu_schematic-420x260.jpg 420w, http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/nodemcu_schematic-768x476.jpg 768w, http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/nodemcu_schematic-624x387.jpg 624w, http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/nodemcu_schematic.jpg 905w" sizes="(max-width: 744px) 100vw, 744px"></a></p>
<p><a href="./reconnect if disconnect_files/nodemcu_schematic_zoom.jpg"><img class="aligncenter size-full wp-image-1047" src="./reconnect if disconnect_files/nodemcu_schematic_zoom.jpg" alt="nodemcu_schematic_zoom" width="451" height="284" srcset="http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/nodemcu_schematic_zoom.jpg 451w, http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/nodemcu_schematic_zoom-420x264.jpg 420w" sizes="(max-width: 451px) 100vw, 451px"></a></p>
<p>Some hints on wiring:</p>
<ol>
<li>I’m powering the ESP8266 board with a USB&nbsp;power adapter so there isn’t any power source shown</li>
<li>Remember that R1 is the resistor closest to positive and that R2 is the resistor closest to negative (ground).</li>
<li>If you get a small ceramic disc capacitor, the leads are not polarized and can be connected whichever way.</li>
<li>Dont forget to connect the NodeMCU board GND to Battery GND or the analog read values will be wrong.</li>
<li>I know in the&nbsp;illustration above, the LED leads are reversed and I also didn’t add a resistor to the LED (but the LED seems to be fine).</li>
<li>I didnt show how to connect the relay to the power switching of the battery charger as your needs will be a little different from mine.&nbsp;But I am using one relay to control the AC input into the charger, and the other relay to disconnect the positive battery lead from charger to battery so the charger will not inadvertently drain the battery when left connected.</li>
</ol>
<h3>Calculating voltage divider values (the hardware side)</h3>
<p>The ESP8266&nbsp;Analog read&nbsp;pin (A0) on the NodeMCU development board has a voltage maximum of 3.1v. If using a bare ESP8266 module (such as an ESP-12) it is a voltage maximum of 1 volt. Since were using the development board,&nbsp;we will be finding resistor values to divide the 12-15v coming from the deep cycle battery into a reading the analog pin can sample, anything under 3.1v.</p>
<p>Be aware that the higher the resistance of the resistors, the lower the readings&nbsp;you’ll end up seeing at the analog pin in the ESPlorer console. If you choose a ratio of 10k ohms and a 3300 ohm resistor , then you’ll see a higher analog dc read value on the pin vs using a 1M ohm and a 330k ohm resistor (which is what i’m using). The reason that i’m using higher resistance value resistors is because i’m trying to minimize current drain when the circuit is left connected. If I am understanding this correctly, using this resistor combination only draws about 6&nbsp;µA.</p>
<p>To calculate the resistor values you will need for your application, head over to this great resource&nbsp;which teaches you the basics:&nbsp;<a href="https://learn.sparkfun.com/tutorials/voltage-dividers/" target="_blank">https://learn.sparkfun.com/tutorials/voltage-dividers/</a>&nbsp;(There’s also a handy voltage divider calculator for you to use to determine your specific resistor values.)</p>
<p>If youre already overwhelmed, just keep in mind that the&nbsp;main idea is to divide the large 12-15v of the battery into a smaller voltage we can sample with the analog read pin on the NodeMCU board. Once the big (12-15v) voltage is divided and within the range the ESP8266 can coherently sample (below 3.1v), we just need to configure the software side of things to make everything work.</p>
<div id="attachment_1027" style="width: 394px" class="wp-caption aligncenter"><a href="./reconnect if disconnect_files/voltagedivider.jpg"><img class="wp-image-1027 size-full" src="./reconnect if disconnect_files/voltagedivider.jpg" alt="voltagedivider" width="384" height="242" srcset="http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/voltagedivider.jpg 384w, http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/voltagedivider-300x189.jpg 300w" sizes="(max-width: 384px) 100vw, 384px"></a><p class="wp-caption-text">Two resistors with the correct resistance ratio will divide your input voltage</p></div>
<h3>Finding your LSB to calibrate your voltage…WTF? – The software side</h3>
<p>If you’re like me and this is your first electronics project requiring software and hardware all working together, the above heading will probably sound like you…its what I sounded like when trying to wrap my head around this analog read calibration concept.</p>
<p>Its simple once you get your head around it though.</p>
<p>Once we have our voltage divider working as it should, it will bring the voltage down to a level our analog pin can read (from 0-3.1v). However, the values shown by the console output wont display the voltage of the battery as we recognize it, but will instead show values&nbsp;in the range of 0-1024. This doesn’t help us much,&nbsp;so we just have to apply a little division to get real world values (the voltage level) from the 0-1024 reading.</p>
<p><a href="http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/mathtime.jpg"><img class="aligncenter size-medium wp-image-1028" src="./reconnect if disconnect_files/mathtime-300x135.jpg" alt="mathtime" width="300" height="135" srcset="http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/mathtime-300x135.jpg 300w, http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/mathtime-768x345.jpg 768w, http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/mathtime-1024x460.jpg 1024w, http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/mathtime.jpg 1160w" sizes="(max-width: 300px) 100vw, 300px"></a></p>
<p>In this case, we test the battery with a calibrated and known working multi-meter to get the current voltage of the battery, then do some division with the the ADC Value reading we get in the console when you click on the ‘READ&nbsp;DC VOLTAGE’ button on the battery charger control webpage.</p>
<div id="attachment_1030" style="width: 310px" class="wp-caption aligncenter"><a href="http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/adcvalue.jpg"><img class="size-medium wp-image-1030" src="./reconnect if disconnect_files/adcvalue-300x83.jpg" alt="Get the ADC value by clicking the READ DC VOLTAGE button on the battery charger control webpage" width="300" height="83" srcset="http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/adcvalue-300x83.jpg 300w, http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/adcvalue.jpg 368w" sizes="(max-width: 300px) 100vw, 300px"></a><p class="wp-caption-text">Get the ADC Value by clicking the READ DC VOLTAGE button on the battery charger control webpage</p></div>
<p>&nbsp;</p>
<p>For example:</p>
<p>Multimeter reading &nbsp;of battery = 12.56v<br>
ADC Value reading from adc pin in ESPlorer console = 581<br>
Math: 12.56/581 = LSB<br>
LSB = 0.02161790</p>
<p>Now just use&nbsp;that LSB number to replace the LSB number in the main.lua script below and your voltage reading will be calibrated for our project!</p>
<h3>The Code</h3>
<p>Now that we have the ESP8266 running a current version of NodeMCU and are able to control it with ESPlorer, we can finally get to the fun stuff, running scripts! I’ve provided the code snippets below to peruse, but you can also just download the init.lua and main.lua files below to upload to your NodeMCU unit immediately. Both these scripts combined produce the webpage shown below and make&nbsp;everything work.</p>
<p><strong>Download: (right click and save link as…)</strong><br>
<a href="http://www.adrianandgenese.com/files/esp/init.lua">INIT.LUA</a><br>
<a href="http://www.adrianandgenese.com/files/esp/main.lua">MAIN.LUA</a></p>
<div id="attachment_1008" style="width: 309px" class="wp-caption aligncenter"><a href="./reconnect if disconnect_files/batterychargercontrol.jpg"><img class="size-full wp-image-1008" src="./reconnect if disconnect_files/batterychargercontrol.jpg" alt="The battery charger control webpage" width="299" height="494" srcset="http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/batterychargercontrol.jpg 299w, http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/batterychargercontrol-182x300.jpg 182w" sizes="(max-width: 299px) 100vw, 299px"></a><p class="wp-caption-text">The battery charger control webpage</p></div>
<h3>INIT.LUA – A description</h3>
<p>The init.lua file in my project does all the wireless heavy lifting. If the unit is powered on and does not establish a connection to an access point, it will then configure itself as an access point with SSID of&nbsp;“BatteryNode” with password of “password” which you can then connect to using a phone or computer. Once your device is connected to the “BatteryNode” access point, you then navigate using your web browser to 192.168.2.1 to bring up the battery charger control webpage (make sure you turn off mobile data if the phone does not detect an internet connection using the “BatteryNode”&nbsp;AP or you wont be able to navigate to the IP).</p>
<p>After the webpage loads, at the bottom of the screen is a section to enter the SSID and password of the access point you want the NodeMCU battery charger unit to connect to. Be aware that the information you enter is&nbsp;case sensitive. Weird hangups or kernel panics happen when you don’t enter the credentials exactly. If you enter in an SSID that does not exist, the unit will kernel panic and reboot.</p>
<div id="attachment_1009" style="width: 421px" class="wp-caption aligncenter"><a href="./reconnect if disconnect_files/batterychargercontrol3.jpg"><img class="size-full wp-image-1009" src="./reconnect if disconnect_files/batterychargercontrol3.jpg" alt="Wifi configuration section" width="411" height="187" srcset="http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/batterychargercontrol3.jpg 411w, http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/batterychargercontrol3-300x136.jpg 300w" sizes="(max-width: 411px) 100vw, 411px"></a><p class="wp-caption-text">Wifi configuration section</p></div>
<p>Once the unit connects to the access point you specified, it will then configure itself as a regular wireless client instead of an access point and you’ll be disconnected from the “BatteryNode” AP. It will also assign itself a static IP of 192.168.1.175</p>
<p>If you’re going to be using the ESP8266 unit on a different subnet than specified in the scripts, you’ll need to change the IP configuration in the init.lua script to match yours. You may also just&nbsp;comment out the lines below in order for the unit to get its IP address using DHCP.</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5832a4a511a13901349129" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate crayon-wrapped" data-settings=" minimize scroll-mouseover wrap" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; position: absolute; z-index: 2;"><span class="crayon-title">init.lua</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button crayon-pressed" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Lua</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">init.lua

--Set static IP info with configuration above
	wifi.sta.setip(cfg)

AND

-- run main --
 
wifi.sta.setip(cfg)</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5832a4a511a13901349129-1" style="height: 15px;">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a13901349129-2" style="height: 15px;">2</div><div class="crayon-num" data-line="crayon-5832a4a511a13901349129-3" style="height: 15px;">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a13901349129-4" style="height: 15px;">4</div><div class="crayon-num" data-line="crayon-5832a4a511a13901349129-5" style="height: 15px;">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a13901349129-6" style="height: 15px;">6</div><div class="crayon-num" data-line="crayon-5832a4a511a13901349129-7" style="height: 15px;">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a13901349129-8" style="height: 15px;">8</div><div class="crayon-num" data-line="crayon-5832a4a511a13901349129-9" style="height: 15px;">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a13901349129-10" style="height: 15px;">10</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5832a4a511a13901349129-1"><span class="crayon-v">init</span><span class="crayon-sy">.</span><span class="crayon-v">lua</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a13901349129-2">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a511a13901349129-3"><span class="crayon-c">--Set static IP info with configuration above</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a13901349129-4"><span class="crayon-h">	</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">sta</span><span class="crayon-sy">.</span><span class="crayon-e">setip</span><span class="crayon-sy">(</span><span class="crayon-v">cfg</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a13901349129-5">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a13901349129-6"><span class="crayon-st">AND</span></div><div class="crayon-line" id="crayon-5832a4a511a13901349129-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a13901349129-8"><span class="crayon-c">-- run main --</span></div><div class="crayon-line" id="crayon-5832a4a511a13901349129-9"><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a13901349129-10"><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">sta</span><span class="crayon-sy">.</span><span class="crayon-e">setip</span><span class="crayon-sy">(</span><span class="crayon-v">cfg</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0009 seconds] -->
<p>Init.lua code</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5832a4a511a1c935274462" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate crayon-wrapped" data-settings=" minimize scroll-mouseover wrap" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; position: absolute; z-index: 2;"><span class="crayon-title">init.lua</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button crayon-pressed" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Lua</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">--Test wireless connection. If not connected to an access point, set itself as an AP so wifi can be configured with a browser

--Client static IP when connected to an access point
	cfg = {
		ip="192.168.1.175",
		netmask="255.255.255.0",
		gateway="192.168.1.1"
	}
	
--Static IP when in AP mode
	accessPointIpConfig = {}
	accessPointIpConfig.ip = "192.168.2.1"
	accessPointIpConfig.netmask = "255.255.255.0"
	accessPointIpConfig.gateway = "192.168.2.1"
	
--AP credentials	
	accessPointConfig = {}
	accessPointConfig.ssid = "BatteryNode"   -- Name of the SSID you want to create
	accessPointConfig.pwd = "password"    -- WiFi password - at least 8 characters or it screws up

function onboardserver()
print('Running Main Runtime')
dofile("main.lua")
end

print('Testing Wifi Connectivity')
print(wifi.getmode())

count=0

tmr.alarm(1,1000, 1, function() 
print('.')
 if wifi.sta.getip()==nil then 
		
		if count == 5 then
		print('Starting Main Runtime in 3 seconds')
		tmr.stop(1) 
				
				if(wifi.getmode() ~= 3) then
				print('changing wifi mode to stationAP')
				
				--NOTE: If using a mobile phone you may need to disable data when connecting to the AP IP set above as it may try to connect over the data connection instead of through WIFI if the phone detects no internet access when connected to the AP.

				wifi.setmode(wifi.STATIONAP)
				
				--Set AP mode with credentials above
				wifi.ap.config(accessPointConfig)
				wifi.ap.setip(accessPointIpConfig)
				
				--Print Status on console
				print('AP MAC: ',wifi.ap.getmac())
				print('SSID: ',accessPointConfig.ssid)
				print('PASS: ',accessPointConfig.pwd)
				print ('AP IP: ',wifi.ap.getip());
 
				end

		tmr.alarm(0,3000,0,onboardserver)
		else
		count = count + 1 
		end
 
 
 else 
 
 		if(wifi.getmode() ~= 1) then
		print('changing wifi mode to station only')
		wifi.setmode(wifi.STATION)

		--Set static IP info with configuration above
		wifi.sta.setip(cfg)

		wifi.sta.autoconnect(1)
				
		--Print network IP Info
		print("Connected as a station only")
		print('Client IP: ',wifi.sta.getip())
		print('Client MAC: ',wifi.sta.getmac())
		
 
 end
 tmr.stop(1)
 
 -- run main --
		
wifi.sta.setip(cfg)
--Print network IP Info
		print("Connected as a station only")
		print('Client IP: ',wifi.sta.getip())
		print('Client MAC: ',wifi.sta.getmac())
		
dofile("main.lua")

 end 
end)</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-1" style="height: 30px;">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-2" style="height: 15px;">2</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-3" style="height: 15px;">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-4" style="height: 15px;">4</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-5" style="height: 15px;">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-6" style="height: 15px;">6</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-7" style="height: 15px;">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-8" style="height: 15px;">8</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-9" style="height: 15px;">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-10" style="height: 15px;">10</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-11" style="height: 15px;">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-12" style="height: 15px;">12</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-13" style="height: 15px;">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-14" style="height: 15px;">14</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-15" style="height: 15px;">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-16" style="height: 15px;">16</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-17" style="height: 15px;">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-18" style="height: 30px;">18</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-19" style="height: 30px;">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-20" style="height: 15px;">20</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-21" style="height: 15px;">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-22" style="height: 15px;">22</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-23" style="height: 15px;">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-24" style="height: 15px;">24</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-25" style="height: 15px;">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-26" style="height: 15px;">26</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-27" style="height: 15px;">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-28" style="height: 15px;">28</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-29" style="height: 15px;">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-30" style="height: 15px;">30</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-31" style="height: 15px;">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-32" style="height: 15px;">32</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-33" style="height: 15px;">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-34" style="height: 15px;">34</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-35" style="height: 15px;">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-36" style="height: 15px;">36</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-37" style="height: 15px;">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-38" style="height: 15px;">38</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-39" style="height: 15px;">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-40" style="height: 15px;">40</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-41" style="height: 15px;">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-42" style="height: 60px;">42</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-43" style="height: 15px;">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-44" style="height: 15px;">44</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-45" style="height: 15px;">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-46" style="height: 15px;">46</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-47" style="height: 15px;">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-48" style="height: 15px;">48</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-49" style="height: 15px;">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-50" style="height: 15px;">50</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-51" style="height: 15px;">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-52" style="height: 15px;">52</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-53" style="height: 15px;">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-54" style="height: 15px;">54</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-55" style="height: 15px;">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-56" style="height: 15px;">56</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-57" style="height: 15px;">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-58" style="height: 15px;">58</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-59" style="height: 15px;">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-60" style="height: 15px;">60</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-61" style="height: 15px;">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-62" style="height: 15px;">62</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-63" style="height: 15px;">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-64" style="height: 15px;">64</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-65" style="height: 15px;">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-66" style="height: 15px;">66</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-67" style="height: 15px;">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-68" style="height: 15px;">68</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-69" style="height: 15px;">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-70" style="height: 15px;">70</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-71" style="height: 15px;">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-72" style="height: 15px;">72</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-73" style="height: 15px;">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-74" style="height: 15px;">74</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-75" style="height: 15px;">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-76" style="height: 15px;">76</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-77" style="height: 15px;">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-78" style="height: 15px;">78</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-79" style="height: 15px;">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-80" style="height: 15px;">80</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-81" style="height: 15px;">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-82" style="height: 15px;">82</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-83" style="height: 15px;">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-84" style="height: 15px;">84</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-85" style="height: 15px;">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-86" style="height: 15px;">86</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-87" style="height: 15px;">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-88" style="height: 15px;">88</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-89" style="height: 15px;">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-90" style="height: 15px;">90</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-91" style="height: 15px;">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-92" style="height: 15px;">92</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-93" style="height: 15px;">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a1c935274462-94" style="height: 15px;">94</div><div class="crayon-num" data-line="crayon-5832a4a511a1c935274462-95" style="height: 15px;">95</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5832a4a511a1c935274462-1"><span class="crayon-c">--Test wireless connection. If not connected to an access point, set itself as an AP so wifi can be configured with a browser</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-2">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-3"><span class="crayon-c">--Client static IP when connected to an access point</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-4"><span class="crayon-h">	</span><span class="crayon-v">cfg</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-5"><span class="crayon-h">		</span><span class="crayon-v">ip</span><span class="crayon-o">=</span><span class="crayon-s">"192.168.1.175"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-6"><span class="crayon-h">		</span><span class="crayon-v">netmask</span><span class="crayon-o">=</span><span class="crayon-s">"255.255.255.0"</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-7"><span class="crayon-h">		</span><span class="crayon-v">gateway</span><span class="crayon-o">=</span><span class="crayon-s">"192.168.1.1"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-8"><span class="crayon-h">	</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-9"><span class="crayon-h">	</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-10"><span class="crayon-c">--Static IP when in AP mode</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-11"><span class="crayon-h">	</span><span class="crayon-v">accessPointIpConfig</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-12"><span class="crayon-h">	</span><span class="crayon-v">accessPointIpConfig</span><span class="crayon-sy">.</span><span class="crayon-v">ip</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"192.168.2.1"</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-13"><span class="crayon-h">	</span><span class="crayon-v">accessPointIpConfig</span><span class="crayon-sy">.</span><span class="crayon-v">netmask</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"255.255.255.0"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-14"><span class="crayon-h">	</span><span class="crayon-v">accessPointIpConfig</span><span class="crayon-sy">.</span><span class="crayon-v">gateway</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"192.168.2.1"</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-15"><span class="crayon-h">	</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-16"><span class="crayon-c">--AP credentials	</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-17"><span class="crayon-h">	</span><span class="crayon-v">accessPointConfig</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-18"><span class="crayon-h">	</span><span class="crayon-v">accessPointConfig</span><span class="crayon-sy">.</span><span class="crayon-v">ssid</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"BatteryNode"</span><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-c">-- Name of the SSID you want to create</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-19"><span class="crayon-h">	</span><span class="crayon-v">accessPointConfig</span><span class="crayon-sy">.</span><span class="crayon-v">pwd</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"password"</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">-- WiFi password - at least 8 characters or it screws up</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-20">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-21"><span class="crayon-r">function</span><span class="crayon-h"> </span><span class="crayon-e">onboardserver</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-22"><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">'Running Main Runtime'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-23"><span class="crayon-r">dofile</span><span class="crayon-sy">(</span><span class="crayon-s">"main.lua"</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-24"><span class="crayon-st">end</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-25">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-26"><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">'Testing Wifi Connectivity'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-27"><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-e">getmode</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-28">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-29"><span class="crayon-v">count</span><span class="crayon-o">=</span><span class="crayon-cn">0</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-30">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-31"><span class="crayon-v">tmr</span><span class="crayon-sy">.</span><span class="crayon-e">alarm</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-cn">1000</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">function</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-32"><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">'.'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-33"><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">sta</span><span class="crayon-sy">.</span><span class="crayon-e">getip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">==</span><span class="crayon-r">nil</span><span class="crayon-h"> </span><span class="crayon-st">then</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-34"><span class="crayon-h">		</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-35"><span class="crayon-h">		</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">count</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-36"><span class="crayon-h">		</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">'Starting Main Runtime in 3 seconds'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-37"><span class="crayon-h">		</span><span class="crayon-v">tmr</span><span class="crayon-sy">.</span><span class="crayon-e">stop</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-38"><span class="crayon-h">				</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-39"><span class="crayon-h">				</span><span class="crayon-st">if</span><span class="crayon-sy">(</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-e">getmode</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">~</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">3</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-40"><span class="crayon-h">				</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">'changing wifi mode to stationAP'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-41"><span class="crayon-h">				</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-42"><span class="crayon-h">				</span><span class="crayon-c">--NOTE: If using a mobile phone you may need to disable data when connecting to the AP IP set above as it may try to connect over the data connection instead of through WIFI if the phone detects no internet access when connected to the AP.</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-43">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-44"><span class="crayon-h">				</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-e">setmode</span><span class="crayon-sy">(</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">STATIONAP</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-45"><span class="crayon-h">				</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-46"><span class="crayon-h">				</span><span class="crayon-c">--Set AP mode with credentials above</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-47"><span class="crayon-h">				</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">ap</span><span class="crayon-sy">.</span><span class="crayon-e">config</span><span class="crayon-sy">(</span><span class="crayon-v">accessPointConfig</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-48"><span class="crayon-h">				</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">ap</span><span class="crayon-sy">.</span><span class="crayon-e">setip</span><span class="crayon-sy">(</span><span class="crayon-v">accessPointIpConfig</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-49"><span class="crayon-h">				</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-50"><span class="crayon-h">				</span><span class="crayon-c">--Print Status on console</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-51"><span class="crayon-h">				</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">'AP MAC: '</span><span class="crayon-sy">,</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">ap</span><span class="crayon-sy">.</span><span class="crayon-e">getmac</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-52"><span class="crayon-h">				</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">'SSID: '</span><span class="crayon-sy">,</span><span class="crayon-v">accessPointConfig</span><span class="crayon-sy">.</span><span class="crayon-v">ssid</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-53"><span class="crayon-h">				</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">'PASS: '</span><span class="crayon-sy">,</span><span class="crayon-v">accessPointConfig</span><span class="crayon-sy">.</span><span class="crayon-v">pwd</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-54"><span class="crayon-h">				</span><span class="crayon-r">print</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-s">'AP IP: '</span><span class="crayon-sy">,</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">ap</span><span class="crayon-sy">.</span><span class="crayon-e">getip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-55"><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-56"><span class="crayon-h">				</span><span class="crayon-st">end</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-57">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-58"><span class="crayon-h">		</span><span class="crayon-v">tmr</span><span class="crayon-sy">.</span><span class="crayon-e">alarm</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-cn">3000</span><span class="crayon-sy">,</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-v">onboardserver</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-59"><span class="crayon-h">		</span><span class="crayon-st">else</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-60"><span class="crayon-h">		</span><span class="crayon-v">count</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">count</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-61"><span class="crayon-h">		</span><span class="crayon-st">end</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-62"><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-63"><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-64"><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-65"><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-66"><span class="crayon-h"> 		</span><span class="crayon-st">if</span><span class="crayon-sy">(</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-e">getmode</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">~</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-67"><span class="crayon-h">		</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">'changing wifi mode to station only'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-68"><span class="crayon-h">		</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-e">setmode</span><span class="crayon-sy">(</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">STATION</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-69">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-70"><span class="crayon-h">		</span><span class="crayon-c">--Set static IP info with configuration above</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-71"><span class="crayon-h">		</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">sta</span><span class="crayon-sy">.</span><span class="crayon-e">setip</span><span class="crayon-sy">(</span><span class="crayon-v">cfg</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-72">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-73"><span class="crayon-h">		</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">sta</span><span class="crayon-sy">.</span><span class="crayon-e">autoconnect</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-74"><span class="crayon-h">				</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-75"><span class="crayon-h">		</span><span class="crayon-c">--Print network IP Info</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-76"><span class="crayon-h">		</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">"Connected as a station only"</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-77"><span class="crayon-h">		</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">'Client IP: '</span><span class="crayon-sy">,</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">sta</span><span class="crayon-sy">.</span><span class="crayon-e">getip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-78"><span class="crayon-h">		</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">'Client MAC: '</span><span class="crayon-sy">,</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">sta</span><span class="crayon-sy">.</span><span class="crayon-e">getmac</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-79"><span class="crayon-h">		</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-80"><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-81"><span class="crayon-h"> </span><span class="crayon-st">end</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-82"><span class="crayon-h"> </span><span class="crayon-v">tmr</span><span class="crayon-sy">.</span><span class="crayon-e">stop</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-83"><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-84"><span class="crayon-h"> </span><span class="crayon-c">-- run main --</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-85"><span class="crayon-h">		</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-86"><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">sta</span><span class="crayon-sy">.</span><span class="crayon-e">setip</span><span class="crayon-sy">(</span><span class="crayon-v">cfg</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-87"><span class="crayon-c">--Print network IP Info</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-88"><span class="crayon-h">		</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">"Connected as a station only"</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-89"><span class="crayon-h">		</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">'Client IP: '</span><span class="crayon-sy">,</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">sta</span><span class="crayon-sy">.</span><span class="crayon-e">getip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-90"><span class="crayon-h">		</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">'Client MAC: '</span><span class="crayon-sy">,</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">sta</span><span class="crayon-sy">.</span><span class="crayon-e">getmac</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-91"><span class="crayon-h">		</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-92"><span class="crayon-r">dofile</span><span class="crayon-sy">(</span><span class="crayon-s">"main.lua"</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-93">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a1c935274462-94"><span class="crayon-h"> </span><span class="crayon-st">end</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5832a4a511a1c935274462-95"><span class="crayon-st">end</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0130 seconds] -->
<p></p>
<h3>MAIN.LUA – A description</h3>
<p>Main.lua handles the main&nbsp;processing of commands, it sets up the pins, defines the variables, and serves the website. Remember the LSB value you calculated earlier? You’ll need to remember to replace&nbsp;the LSB value in the main.lua file with your own LSB for it to correctly show your voltage on the webpage.</p>
<p>The ESP8266 will remember the relay state indicated by “OFF” or “ON”</p>
<div id="attachment_1007" style="width: 456px" class="wp-caption aligncenter"><a href="./reconnect if disconnect_files/batterychargercontrol1.jpg"><img class="size-full wp-image-1007" src="./reconnect if disconnect_files/batterychargercontrol1.jpg" alt="The battery charger control webpage" width="446" height="362" srcset="http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/batterychargercontrol1.jpg 446w, http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/batterychargercontrol1-300x243.jpg 300w" sizes="(max-width: 446px) 100vw, 446px"></a><p class="wp-caption-text">Relay Control buttons</p></div>
<p>The readings&nbsp;will also change color of the voltage reading based on&nbsp;the following table (I skipped the orange color so its just green, yellow, and red).</p>
<p><a href="./reconnect if disconnect_files/Battery-State-Of-Charge.jpg"><img class="aligncenter size-full wp-image-1010" src="./reconnect if disconnect_files/Battery-State-Of-Charge.jpg" alt="battery-state-of-charge" width="417" height="506" srcset="http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/Battery-State-Of-Charge.jpg 417w, http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/Battery-State-Of-Charge-247x300.jpg 247w" sizes="(max-width: 417px) 100vw, 417px"></a></p>
<div id="attachment_1012" style="width: 418px" class="wp-caption aligncenter"><a href="./reconnect if disconnect_files/batterychargercontrol2-1.jpg"><img class="wp-image-1012 size-full" src="./reconnect if disconnect_files/batterychargercontrol2-1.jpg" alt="batterychargercontrol2" width="408" height="195" srcset="http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/batterychargercontrol2-1.jpg 408w, http://www.adrianandgenese.com/blogger/wp-content/uploads/2016/09/batterychargercontrol2-1-300x143.jpg 300w" sizes="(max-width: 408px) 100vw, 408px"></a><p class="wp-caption-text">webpage voltage reading in green</p></div>
<p>Main.lua code</p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

		<div id="crayon-5832a4a511a28388576927" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate crayon-wrapped" data-settings=" minimize scroll-mouseover wrap" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;">
		
			<div class="crayon-toolbar" data-settings=" mouseover overlay hide delay" style="font-size: 12px !important; height: 18px !important; line-height: 18px !important; margin-top: -19px; display: none; position: absolute; z-index: 2;"><span class="crayon-title">Main.lua</span>
			<div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button crayon-pressed" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button crayon-pressed" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code" style="display: none;"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">Lua</span></div></div>
			<div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div>
			<div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly="" style="tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;">-- main.lua --

----------------------
-- Global Variables --
----------------------

-- DEBOUNCE FOR EMI WITH LARGE VOLTAGE USING WEB INTERFACE --
ignore = 0

-- RELAY PINS --
Relay1 = 1
Relay2 = 2

-- SWITCH PIN --
pin = 5

-- LED PIN --
led_pin = 3

-- ADC PIN AND DEFAULT VALUE --
adc_id = 0 
adc_value = 0

-- VOLTAGE MONITOR COLOR AND STATUS --
adc_color = "#FFFFFF"
status_relay = "OFF"
status_color = "#FFFFFF"

-- VOLTAGE MONITOR VARIABLES --
-- CALIBRATION: calibrate LSB by dividing voltage read by multimeter by adc_value
ad = 0
adt = 0
LSB = 0.02162348 

----------------
-- GPIO Setup --
----------------
print("Setting Up GPIO...")

-- SET GPIO PINS FOR RELAY --
gpio.mode(Relay1, gpio.OUTPUT)
gpio.write(Relay1, gpio.LOW);

gpio.mode(Relay2, gpio.OUTPUT)
gpio.write(Relay2, gpio.LOW);

-- SET GPIO FOR SWITCH PIN --

gpio.mode(pin, gpio.INT, gpio.PULLUP)

---------------
-- LED SETUP --
---------------
print("LED SETUP")

-- SET LED TO OFF --
gpio.mode(led_pin, gpio.OUTPUT)
gpio.write(led_pin, gpio.LOW);

-- Enable PWM output behavior on startup if desired --
-- pwm.setup(led_pin, 2, 800) -- 2Hz, 50% duty default
-- pwm.start(led_pin)


----------------------------------
-- SWITCH AND DEBOUNCE FUNCTION --
----------------------------------

function debounce (func)
    last = 0
    delay = 50000 -- 50ms * 1000 as tmr.now() has μs resolution

    return function (...)
        now = tmr.now()
        delta = now - last
        if delta &lt; 0 then delta = delta + 2147483647 end; -- proposed because of delta rolling over, https://github.com/hackhitchin/esp8266-co-uk/issues/2
        if delta &lt; delay then return end;

        last = now
        return func(...)
    end
end

function onChange ()
    print('The pin value has changed to '..gpio.read(pin))
	
	switchpin = (gpio.read(pin))
	
	--If switch is closed then Relays are ON
	if switchpin == 0 then
	
		pwm.setup(led_pin, 2, 512)
		pwm.start(led_pin)
		gpio.write(Relay1, gpio.HIGH)
		gpio.write(Relay2, gpio.HIGH)
		status_relay = "ON"
		status_color = "#00ff00"
		print("SWITCH ON")
	
		end
	
	--If switch is open then Relays are OFF but only if not turned on with web interface first
	if switchpin == 1 and ignore == 0 then
		
		gpio.write(Relay1, gpio.LOW)
		gpio.write(Relay2, gpio.LOW)
		pwm.stop(led_pin)
		status_relay = "OFF"
		status_color = "#ccccb3"
		print("SWITCH OFF")
		
	end
	
	--If switch is open and web interface turned on relays before, then do nothing
	if switchpin == 1 and ignore == 1 then
		print("EMI DEBOUNCE or WEB SWITCH ON")
		
	end
	
end

gpio.trig(pin, 'both', debounce(onChange))

----------------
-- Web Server --
----------------
print("Starting Web Server...")
-- Create a server object with 30 second timeout
srv = net.createServer(net.TCP, 30)
srv:listen(80, function(conn)

  conn:on("receive", function(sck, payload)
 
  
  -- another function
	function esp_update()
            mcu_do=string.sub(payload,postparse[2]+1,#payload)
						         
        -- Change color of Voltage according to voltage health table for 12v batteries --
		
            if mcu_do == "READ+DC+VOLTAGE" then
            	adc_value = adc.read(adc_id)
				
				-- Voltage conversion from ADC numbers to Voltage numbers --
					ad = adc_value*LSB
									
				-- Truncate the extra decimal values	
					adt = string.format("%02.2f",ad)
					print(adt)
            	
				-- If values are above 12.2v then show as GREEN
				if ad &gt;= 12.2 then
					adc_color = "#00ff00"
					
				-- If values are below 12.2v and above 11.7v then show as YELLOW
				elseif ad &gt;= 11.7 and ad &lt; 12.2 then
					adc_color = "#ffcc00"
				
				--If values are below 11.7v then show as RED
				elseif ad &lt; 11.7 then
					adc_color = "#b30000"
				end
				
								
				-- The battery charger I use maintains the battery voltage at 13.3v - 13.4v, this is the float charge. Therefore print float charging... instead of voltage level.
				if ad &gt;= 13.3 and ad &lt; 13.4 then
					adt = "Float Charging..."
					print("Float Charging...")
					
					elseif adc_value &lt; 1023 then
		
					print("ADC Value   : ", adc_value)
					print("Real Voltage: ", ad)
					print("Adjusted Voltage: ", adt)
				end
							
			end
        
		-- If turn on web button is clicked
		if mcu_do == "TURN+ON" then
		
				-- Debounce EMI with web control (dont allow interrupt GPIO to turn off relays)--
				ignore = 1
				
				pwm.setup(led_pin, 2, 512)
				pwm.start(led_pin)
				gpio.write(Relay1, gpio.HIGH)
				gpio.write(Relay2, gpio.HIGH)
				status_relay = "ON"
				status_color = "#00ff00"
				print("RELAY ON")
		end
		
		--If turn off web button is clicked
		if mcu_do == "TURN+OFF" then
		
				-- Debounce EMI with web control (allow interrupt GPIO to turn off relays)--
				ignore = 0
				
            	gpio.write(Relay1, gpio.LOW)
				gpio.write(Relay2, gpio.LOW)
				pwm.stop(led_pin)
				status_relay = "OFF"
				status_color = "#ccccb3"
				print("RELAY OFF")				
		end
		
		if mcu_do == "CONFIGURE+WIFI" then
			
        ssid = string.sub(payload,string.find(payload,"ssid=")+5,
		string.find(payload,"&amp;password")-1)
		pw = string.sub(payload,string.find(payload,"password=")+9,string.find(payload,"&amp;mcu")-1)
		
			--If any wifi config fields are blank then ignore
		 	if ssid == "" or pw == "" then 
			print("Empty fields not applying wifi config")
			
			--If wifi config fields populated then attempt to connect to wifi
			elseif ssid ~= "" or ps ~= "" then
		
			print("Connecting to AP:",ssid)
		
			--Set ESP to station mode only and to disable the ESP in AP mode
			wifi.setmode(wifi.STATION)
		
			--SSID and PW are case sensitive. If wireless info is not entered case sensitive the ESP will hang up. If the SSID and encryption is incorrect, the ESP will Kernel Panic and just reboot.
			wifi.sta.config(ssid,pw,1)
		
			--Restart ESP in case it hangs on re-connection. This will prevent MCU from being unreachable.
			node.restart()
		
			--After wireless is configured this sets up a static IP as configured in init.lua
			--wifi.sta.setip(cfg)
			
			end
			
			
		end
		
	end
		
            
        --Parse position POST value from header
		postparse={string.find(payload,"mcu_do=")}
		

        --If POST value exist, run the Functions above
        if postparse[2]~=nil then esp_update()end
  
  
	--New NodeMCU 1.5.4+ firmware fails on older NodeMCU v.9.x multiple send commands, so needed to do a new method to send.
    local response = {}

    response[#response + 1] = '&lt;html&gt;\n'
    response[#response + 1] = '&lt;center&gt;\n'
    response[#response + 1] = '&lt;head&gt;&lt;meta content="text/html; charset=utf-8"&gt;\n'
	response[#response + 1] = '&lt;title&gt;Battery Charger Control&lt;/title&gt;&lt;/head&gt;\n'
	response[#response + 1] = '&lt;body&gt;&lt;h1 style="font-family:verdana;"&gt;Battery Charger Control&lt;/h1&gt;\n'
	response[#response + 1] = '&lt;form action="" method="POST"&gt;\n'
	response[#response + 1] = '&lt;table border=\"1\" width=\"400\" bordercolorlight=\"#000000\" bordercolordark=\"#008000\" height=\"137\"&gt;&lt;tr&gt;&lt;td style=\"border-style: solid; border-width: 1px\" width=\"91\" bgcolor=\"#339FFF\" align=\"center\"&gt;&lt;b&gt;'
	response[#response + 1] = '&lt;font face=\"Verdana\" size=\"2\" color=\"#FFFF99\"&gt;BATTERY CHARGER:&lt;/font&gt;&lt;p&gt;&lt;font face=\"Verdana\" size=\"6\" color=\"'..status_color..'\"&gt;'..status_relay..'&lt;/font&gt;&lt;p&gt;&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;'
	response[#response + 1] = '&lt;tr&gt;&lt;td style=\"border-style: solid; border-width: 1px\" width=\"91\" align=\"center\"&gt;&lt;p&gt;&lt;input type="submit" name="mcu_do" value="TURN ON" style="height:100px; width:300px; font-size: 30px;"&gt;&lt;p&gt;&lt;/b&gt;&lt;/font&gt;&lt;/a&gt;&lt;/td&gt;'
	response[#response + 1] = '&lt;tr&gt;&lt;td style=\"border-style: solid; border-width: 1px\" width=\"91\" align=\"center\"&gt;&lt;p&gt;&lt;input type="submit" name="mcu_do" value="TURN OFF" style="height:100px; width:300px; font-size: 30px;"&gt;&lt;p&gt;&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;&lt;font face=\"Verdana\"&gt;&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;'
	response[#response + 1] = '&lt;BR&gt;'
	response[#response + 1] = '&lt;table border=\"1\" width=\"400\" bordercolorlight=\"#000000\" bordercolordark=\"#008000\" height=\"137\"&gt;&lt;tr&gt;&lt;td style=\"border-style: solid; border-width: 1px\" width=\"91\" bgcolor=\"#339FFF\" align=\"center\"&gt;&lt;b&gt;'
	response[#response + 1] = '&lt;font face=\"Verdana\" size=\"2\" color=\"#FFFF99\"&gt;BATTERY VOLTAGE:&lt;p&gt;&lt;font face=\"Verdana\" size=\"6\" color=\"'..adc_color..'"&gt;'..adt..'&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;'
	response[#response + 1] = '&lt;tr&gt;&lt;td style=\"border-style: solid; border-width: 1px\" width=\"91\" align=\"center\"&gt;&lt;p&gt;&lt;input type="submit" name="mcu_do" value="READ DC VOLTAGE" style="height:100px; width:300px; font-size: 30px;"&gt;&lt;p&gt;&lt;/b&gt;&lt;/font&gt;&lt;/form&gt;&lt;/td&gt;'
	response[#response + 1] = '&lt;table border=\"1\" width=\"400\" bordercolorlight=\"#000000\" bordercolordark=\"#008000\" height=\"137\"&gt;&lt;tr&gt;&lt;td style=\"border-style: solid; border-width: 1px\" width=\"91\" bgcolor=\"#339FFF\" align=\"center\"&gt;&lt;b&gt;'
	response[#response + 1] = '&lt;font face=\"Verdana\" size=\"2\" color=\"#FFFF99\"&gt;WIFI CONFIG&lt;/b&gt;&lt;br&gt;&lt;font face=\"Verdana\" size=\"1\" color=\"#FFFF99\"&gt;NOTE: Characters are CASE SENSITIVE&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;'
	
	response[#response + 1] = '&lt;BR&gt;'
	response[#response + 1] = '&lt;tr&gt;&lt;td style=\"border-style: solid; border-width: 1px\" width=\"91\" align=\"center\"&gt;&lt;p&gt;&lt;form action="" method="POST"&gt;'
	response[#response + 1] = '&lt;font face=\"Verdana\" size=\"1\"&gt;SSID:&lt;/font&gt;'
	response[#response + 1] = '&lt;br&gt;'
	response[#response + 1] = '&lt;input type="text" name="ssid" id="inputtext"&gt;'
	response[#response + 1] = '&lt;p&gt;'
	response[#response + 1] = '&lt;font face=\"Verdana\" size=\"1\"&gt;Password:&lt;/font&gt;'
	response[#response + 1] = '&lt;br&gt;'
	response[#response + 1] = '&lt;input type="text" name="password" id="inputtext"&gt;'
	response[#response + 1] = '&lt;br&gt;'
	response[#response + 1] = '&lt;input type="submit" name="mcu_do" value="CONFIGURE WIFI" id="submit"&gt;&lt;br&gt;&lt;font face=\"Verdana\" size=\"1\"&gt;STATIC IP: 192.168.1.175&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;'
	response[#response + 1] = '&lt;/form&gt;'
	response[#response + 1] = '&lt;/center&gt;\n'
	response[#response + 1] = '&lt;/body&gt;&lt;/html&gt;\n'
	
	     -- sends and removes the first element from the 'response' table
    local function send(sk)
      if #response &gt; 0
        then sk:send(table.remove(response, 1))
      else
        sk:close()
        response = nil
      end
    end

    -- triggers the send() function again once the first chunk of data was sent
    sck:on("sent", send)

    send(sck)
  end)
end)</textarea></div>
			<div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-1" style="height: 15px;">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-2" style="height: 15px;">2</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-3" style="height: 15px;">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-4" style="height: 15px;">4</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-5" style="height: 15px;">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-6" style="height: 15px;">6</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-7" style="height: 15px;">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-8" style="height: 15px;">8</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-9" style="height: 15px;">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-10" style="height: 15px;">10</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-11" style="height: 15px;">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-12" style="height: 15px;">12</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-13" style="height: 15px;">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-14" style="height: 15px;">14</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-15" style="height: 15px;">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-16" style="height: 15px;">16</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-17" style="height: 15px;">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-18" style="height: 15px;">18</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-19" style="height: 15px;">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-20" style="height: 15px;">20</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-21" style="height: 15px;">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-22" style="height: 15px;">22</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-23" style="height: 15px;">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-24" style="height: 15px;">24</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-25" style="height: 15px;">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-26" style="height: 15px;">26</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-27" style="height: 15px;">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-28" style="height: 15px;">28</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-29" style="height: 15px;">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-30" style="height: 30px;">30</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-31" style="height: 15px;">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-32" style="height: 15px;">32</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-33" style="height: 15px;">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-34" style="height: 15px;">34</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-35" style="height: 15px;">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-36" style="height: 15px;">36</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-37" style="height: 15px;">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-38" style="height: 15px;">38</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-39" style="height: 15px;">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-40" style="height: 15px;">40</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-41" style="height: 15px;">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-42" style="height: 15px;">42</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-43" style="height: 15px;">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-44" style="height: 15px;">44</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-45" style="height: 15px;">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-46" style="height: 15px;">46</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-47" style="height: 15px;">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-48" style="height: 15px;">48</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-49" style="height: 15px;">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-50" style="height: 15px;">50</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-51" style="height: 15px;">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-52" style="height: 15px;">52</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-53" style="height: 15px;">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-54" style="height: 15px;">54</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-55" style="height: 15px;">55</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-56" style="height: 15px;">56</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-57" style="height: 15px;">57</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-58" style="height: 15px;">58</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-59" style="height: 15px;">59</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-60" style="height: 15px;">60</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-61" style="height: 15px;">61</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-62" style="height: 15px;">62</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-63" style="height: 15px;">63</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-64" style="height: 15px;">64</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-65" style="height: 15px;">65</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-66" style="height: 15px;">66</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-67" style="height: 15px;">67</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-68" style="height: 15px;">68</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-69" style="height: 15px;">69</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-70" style="height: 15px;">70</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-71" style="height: 15px;">71</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-72" style="height: 15px;">72</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-73" style="height: 15px;">73</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-74" style="height: 15px;">74</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-75" style="height: 15px;">75</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-76" style="height: 30px;">76</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-77" style="height: 15px;">77</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-78" style="height: 15px;">78</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-79" style="height: 15px;">79</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-80" style="height: 15px;">80</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-81" style="height: 15px;">81</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-82" style="height: 15px;">82</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-83" style="height: 15px;">83</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-84" style="height: 15px;">84</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-85" style="height: 15px;">85</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-86" style="height: 15px;">86</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-87" style="height: 15px;">87</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-88" style="height: 15px;">88</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-89" style="height: 15px;">89</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-90" style="height: 15px;">90</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-91" style="height: 15px;">91</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-92" style="height: 15px;">92</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-93" style="height: 15px;">93</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-94" style="height: 15px;">94</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-95" style="height: 15px;">95</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-96" style="height: 15px;">96</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-97" style="height: 15px;">97</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-98" style="height: 15px;">98</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-99" style="height: 15px;">99</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-100" style="height: 15px;">100</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-101" style="height: 15px;">101</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-102" style="height: 30px;">102</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-103" style="height: 15px;">103</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-104" style="height: 15px;">104</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-105" style="height: 15px;">105</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-106" style="height: 15px;">106</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-107" style="height: 15px;">107</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-108" style="height: 15px;">108</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-109" style="height: 15px;">109</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-110" style="height: 15px;">110</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-111" style="height: 15px;">111</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-112" style="height: 15px;">112</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-113" style="height: 15px;">113</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-114" style="height: 30px;">114</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-115" style="height: 15px;">115</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-116" style="height: 15px;">116</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-117" style="height: 15px;">117</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-118" style="height: 15px;">118</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-119" style="height: 15px;">119</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-120" style="height: 15px;">120</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-121" style="height: 15px;">121</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-122" style="height: 15px;">122</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-123" style="height: 15px;">123</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-124" style="height: 15px;">124</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-125" style="height: 15px;">125</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-126" style="height: 15px;">126</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-127" style="height: 15px;">127</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-128" style="height: 15px;">128</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-129" style="height: 15px;">129</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-130" style="height: 15px;">130</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-131" style="height: 15px;">131</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-132" style="height: 15px;">132</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-133" style="height: 15px;">133</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-134" style="height: 15px;">134</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-135" style="height: 15px;">135</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-136" style="height: 15px;">136</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-137" style="height: 15px;">137</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-138" style="height: 15px;">138</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-139" style="height: 30px;">139</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-140" style="height: 15px;">140</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-141" style="height: 15px;">141</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-142" style="height: 15px;">142</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-143" style="height: 15px;">143</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-144" style="height: 15px;">144</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-145" style="height: 15px;">145</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-146" style="height: 15px;">146</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-147" style="height: 15px;">147</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-148" style="height: 15px;">148</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-149" style="height: 15px;">149</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-150" style="height: 15px;">150</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-151" style="height: 15px;">151</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-152" style="height: 15px;">152</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-153" style="height: 15px;">153</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-154" style="height: 15px;">154</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-155" style="height: 15px;">155</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-156" style="height: 15px;">156</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-157" style="height: 15px;">157</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-158" style="height: 15px;">158</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-159" style="height: 15px;">159</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-160" style="height: 15px;">160</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-161" style="height: 15px;">161</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-162" style="height: 15px;">162</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-163" style="height: 15px;">163</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-164" style="height: 15px;">164</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-165" style="height: 45px;">165</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-166" style="height: 15px;">166</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-167" style="height: 15px;">167</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-168" style="height: 15px;">168</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-169" style="height: 15px;">169</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-170" style="height: 15px;">170</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-171" style="height: 15px;">171</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-172" style="height: 15px;">172</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-173" style="height: 15px;">173</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-174" style="height: 15px;">174</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-175" style="height: 15px;">175</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-176" style="height: 15px;">176</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-177" style="height: 15px;">177</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-178" style="height: 15px;">178</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-179" style="height: 15px;">179</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-180" style="height: 15px;">180</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-181" style="height: 15px;">181</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-182" style="height: 30px;">182</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-183" style="height: 15px;">183</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-184" style="height: 15px;">184</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-185" style="height: 15px;">185</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-186" style="height: 15px;">186</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-187" style="height: 15px;">187</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-188" style="height: 15px;">188</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-189" style="height: 15px;">189</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-190" style="height: 15px;">190</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-191" style="height: 15px;">191</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-192" style="height: 15px;">192</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-193" style="height: 15px;">193</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-194" style="height: 15px;">194</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-195" style="height: 15px;">195</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-196" style="height: 15px;">196</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-197" style="height: 30px;">197</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-198" style="height: 15px;">198</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-199" style="height: 15px;">199</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-200" style="height: 15px;">200</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-201" style="height: 15px;">201</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-202" style="height: 15px;">202</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-203" style="height: 15px;">203</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-204" style="height: 15px;">204</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-205" style="height: 15px;">205</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-206" style="height: 15px;">206</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-207" style="height: 15px;">207</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-208" style="height: 15px;">208</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-209" style="height: 15px;">209</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-210" style="height: 15px;">210</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-211" style="height: 15px;">211</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-212" style="height: 30px;">212</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-213" style="height: 15px;">213</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-214" style="height: 15px;">214</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-215" style="height: 15px;">215</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-216" style="height: 15px;">216</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-217" style="height: 15px;">217</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-218" style="height: 15px;">218</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-219" style="height: 15px;">219</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-220" style="height: 15px;">220</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-221" style="height: 15px;">221</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-222" style="height: 15px;">222</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-223" style="height: 15px;">223</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-224" style="height: 15px;">224</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-225" style="height: 15px;">225</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-226" style="height: 45px;">226</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-227" style="height: 15px;">227</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-228" style="height: 15px;">228</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-229" style="height: 30px;">229</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-230" style="height: 15px;">230</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-231" style="height: 15px;">231</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-232" style="height: 30px;">232</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-233" style="height: 15px;">233</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-234" style="height: 15px;">234</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-235" style="height: 15px;">235</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-236" style="height: 15px;">236</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-237" style="height: 15px;">237</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-238" style="height: 15px;">238</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-239" style="height: 15px;">239</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-240" style="height: 15px;">240</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-241" style="height: 15px;">241</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-242" style="height: 15px;">242</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-243" style="height: 15px;">243</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-244" style="height: 15px;">244</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-245" style="height: 15px;">245</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-246" style="height: 15px;">246</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-247" style="height: 15px;">247</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-248" style="height: 15px;">248</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-249" style="height: 15px;">249</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-250" style="height: 15px;">250</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-251" style="height: 30px;">251</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-252" style="height: 15px;">252</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-253" style="height: 15px;">253</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-254" style="height: 15px;">254</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-255" style="height: 15px;">255</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-256" style="height: 30px;">256</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-257" style="height: 15px;">257</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-258" style="height: 30px;">258</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-259" style="height: 15px;">259</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-260" style="height: 60px;">260</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-261" style="height: 45px;">261</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-262" style="height: 60px;">262</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-263" style="height: 60px;">263</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-264" style="height: 15px;">264</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-265" style="height: 60px;">265</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-266" style="height: 45px;">266</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-267" style="height: 60px;">267</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-268" style="height: 60px;">268</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-269" style="height: 45px;">269</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-270" style="height: 15px;">270</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-271" style="height: 15px;">271</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-272" style="height: 30px;">272</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-273" style="height: 15px;">273</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-274" style="height: 15px;">274</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-275" style="height: 15px;">275</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-276" style="height: 15px;">276</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-277" style="height: 30px;">277</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-278" style="height: 15px;">278</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-279" style="height: 30px;">279</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-280" style="height: 15px;">280</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-281" style="height: 45px;">281</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-282" style="height: 15px;">282</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-283" style="height: 15px;">283</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-284" style="height: 15px;">284</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-285" style="height: 15px;">285</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-286" style="height: 15px;">286</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-287" style="height: 15px;">287</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-288" style="height: 15px;">288</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-289" style="height: 15px;">289</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-290" style="height: 15px;">290</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-291" style="height: 15px;">291</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-292" style="height: 15px;">292</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-293" style="height: 15px;">293</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-294" style="height: 15px;">294</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-295" style="height: 15px;">295</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-296" style="height: 15px;">296</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-297" style="height: 15px;">297</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-298" style="height: 15px;">298</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-299" style="height: 15px;">299</div><div class="crayon-num crayon-striped-num" data-line="crayon-5832a4a511a28388576927-300" style="height: 15px;">300</div><div class="crayon-num" data-line="crayon-5832a4a511a28388576927-301" style="height: 15px;">301</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5832a4a511a28388576927-1"><span class="crayon-c">-- main.lua --</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-2">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a511a28388576927-3"><span class="crayon-c">----------------------</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-4"><span class="crayon-c">-- Global Variables --</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-5"><span class="crayon-c">----------------------</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-6">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a511a28388576927-7"><span class="crayon-c">-- DEBOUNCE FOR EMI WITH LARGE VOLTAGE USING WEB INTERFACE --</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-8"><span class="crayon-v">ignore</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-10"><span class="crayon-c">-- RELAY PINS --</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-11"><span class="crayon-v">Relay1</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-12"><span class="crayon-v">Relay2</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">2</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-13">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-14"><span class="crayon-c">-- SWITCH PIN --</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-15"><span class="crayon-v">pin</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">5</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-16">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a511a28388576927-17"><span class="crayon-c">-- LED PIN --</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-18"><span class="crayon-v">led_pin</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">3</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-19">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-20"><span class="crayon-c">-- ADC PIN AND DEFAULT VALUE --</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-21"><span class="crayon-v">adc_id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-22"><span class="crayon-v">adc_value</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-23">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-24"><span class="crayon-c">-- VOLTAGE MONITOR COLOR AND STATUS --</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-25"><span class="crayon-v">adc_color</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"#FFFFFF"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-26"><span class="crayon-v">status_relay</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"OFF"</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-27"><span class="crayon-v">status_color</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"#FFFFFF"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-28">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a511a28388576927-29"><span class="crayon-c">-- VOLTAGE MONITOR VARIABLES --</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-30"><span class="crayon-c">-- CALIBRATION: calibrate LSB by dividing voltage read by multimeter by adc_value</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-31"><span class="crayon-v">ad</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-32"><span class="crayon-v">adt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-33"><span class="crayon-v">LSB</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0.02162348</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-34">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a511a28388576927-35"><span class="crayon-c">----------------</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-36"><span class="crayon-c">-- GPIO Setup --</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-37"><span class="crayon-c">----------------</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-38"><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">"Setting Up GPIO..."</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-39">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-40"><span class="crayon-c">-- SET GPIO PINS FOR RELAY --</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-41"><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-e">mode</span><span class="crayon-sy">(</span><span class="crayon-v">Relay1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-v">OUTPUT</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-42"><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-v">Relay1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-v">LOW</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-43">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-44"><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-e">mode</span><span class="crayon-sy">(</span><span class="crayon-v">Relay2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-v">OUTPUT</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-45"><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-v">Relay2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-v">LOW</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-46">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a511a28388576927-47"><span class="crayon-c">-- SET GPIO FOR SWITCH PIN --</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-48">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a511a28388576927-49"><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-e">mode</span><span class="crayon-sy">(</span><span class="crayon-v">pin</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-v">INT</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-v">PULLUP</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-50">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a511a28388576927-51"><span class="crayon-c">---------------</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-52"><span class="crayon-c">-- LED SETUP --</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-53"><span class="crayon-c">---------------</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-54"><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">"LED SETUP"</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-55">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-56"><span class="crayon-c">-- SET LED TO OFF --</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-57"><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-e">mode</span><span class="crayon-sy">(</span><span class="crayon-v">led_pin</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-v">OUTPUT</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-58"><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-v">led_pin</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-v">LOW</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-59">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-60"><span class="crayon-c">-- Enable PWM output behavior on startup if desired --</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-61"><span class="crayon-c">-- pwm.setup(led_pin, 2, 800) -- 2Hz, 50% duty default</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-62"><span class="crayon-c">-- pwm.start(led_pin)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-63">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-64">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a511a28388576927-65"><span class="crayon-c">----------------------------------</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-66"><span class="crayon-c">-- SWITCH AND DEBOUNCE FUNCTION --</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-67"><span class="crayon-c">----------------------------------</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-68">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a511a28388576927-69"><span class="crayon-r">function</span><span class="crayon-h"> </span><span class="crayon-e">debounce</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">func</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-70"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">last</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-71"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">delay</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">50000</span><span class="crayon-h"> </span><span class="crayon-c">-- 50ms * 1000 as tmr.now() has μs resolution</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-72">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a511a28388576927-73"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-r">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-74"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">now</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">tmr</span><span class="crayon-sy">.</span><span class="crayon-e">now</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-75"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">delta</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">now</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">last</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-76"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">delta</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-st">then</span><span class="crayon-h"> </span><span class="crayon-v">delta</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">delta</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">2147483647</span><span class="crayon-h"> </span><span class="crayon-st">end</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">-- proposed because of delta rolling over, https://github.com/hackhitchin/esp8266-co-uk/issues/2</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-77"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">delta</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-e">delay </span><span class="crayon-st">then</span><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-st">end</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-78">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a511a28388576927-79"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">last</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">now</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-80"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">func</span><span class="crayon-sy">(</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-81"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">end</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-82"><span class="crayon-st">end</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-83">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-84"><span class="crayon-r">function</span><span class="crayon-h"> </span><span class="crayon-e">onChange</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-85"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">'The pin value has changed to '</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-v">pin</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-86"><span class="crayon-h">	</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-87"><span class="crayon-h">	</span><span class="crayon-v">switchpin</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-v">pin</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-88"><span class="crayon-h">	</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-89"><span class="crayon-h">	</span><span class="crayon-c">--If switch is closed then Relays are ON</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-90"><span class="crayon-h">	</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">switchpin</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-91"><span class="crayon-h">	</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-92"><span class="crayon-h">		</span><span class="crayon-v">pwm</span><span class="crayon-sy">.</span><span class="crayon-e">setup</span><span class="crayon-sy">(</span><span class="crayon-v">led_pin</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">512</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-93"><span class="crayon-h">		</span><span class="crayon-v">pwm</span><span class="crayon-sy">.</span><span class="crayon-e">start</span><span class="crayon-sy">(</span><span class="crayon-v">led_pin</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-94"><span class="crayon-h">		</span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-v">Relay1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-v">HIGH</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-95"><span class="crayon-h">		</span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-v">Relay2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-v">HIGH</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-96"><span class="crayon-h">		</span><span class="crayon-v">status_relay</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"ON"</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-97"><span class="crayon-h">		</span><span class="crayon-v">status_color</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"#00ff00"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-98"><span class="crayon-h">		</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">"SWITCH ON"</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-99"><span class="crayon-h">	</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-100"><span class="crayon-h">		</span><span class="crayon-st">end</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-101"><span class="crayon-h">	</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-102"><span class="crayon-h">	</span><span class="crayon-c">--If switch is open then Relays are OFF but only if not turned on with web interface first</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-103"><span class="crayon-h">	</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">switchpin</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-v">ignore</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-104"><span class="crayon-h">		</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-105"><span class="crayon-h">		</span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-v">Relay1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-v">LOW</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-106"><span class="crayon-h">		</span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-v">Relay2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-v">LOW</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-107"><span class="crayon-h">		</span><span class="crayon-v">pwm</span><span class="crayon-sy">.</span><span class="crayon-e">stop</span><span class="crayon-sy">(</span><span class="crayon-v">led_pin</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-108"><span class="crayon-h">		</span><span class="crayon-v">status_relay</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"OFF"</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-109"><span class="crayon-h">		</span><span class="crayon-v">status_color</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"#ccccb3"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-110"><span class="crayon-h">		</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">"SWITCH OFF"</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-111"><span class="crayon-h">		</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-112"><span class="crayon-h">	</span><span class="crayon-st">end</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-113"><span class="crayon-h">	</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-114"><span class="crayon-h">	</span><span class="crayon-c">--If switch is open and web interface turned on relays before, then do nothing</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-115"><span class="crayon-h">	</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">switchpin</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-v">ignore</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-116"><span class="crayon-h">		</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">"EMI DEBOUNCE or WEB SWITCH ON"</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-117"><span class="crayon-h">		</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-118"><span class="crayon-h">	</span><span class="crayon-st">end</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-119"><span class="crayon-h">	</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-120"><span class="crayon-st">end</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-121">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-122"><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-e">trig</span><span class="crayon-sy">(</span><span class="crayon-v">pin</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'both'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">debounce</span><span class="crayon-sy">(</span><span class="crayon-v">onChange</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-123">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-124"><span class="crayon-c">----------------</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-125"><span class="crayon-c">-- Web Server --</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-126"><span class="crayon-c">----------------</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-127"><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">"Starting Web Server..."</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-128"><span class="crayon-c">-- Create a server object with 30 second timeout</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-129"><span class="crayon-v">srv</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">net</span><span class="crayon-sy">.</span><span class="crayon-e">createServer</span><span class="crayon-sy">(</span><span class="crayon-v">net</span><span class="crayon-sy">.</span><span class="crayon-v">TCP</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">30</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-130"><span class="crayon-v">srv</span><span class="crayon-o">:</span><span class="crayon-e">listen</span><span class="crayon-sy">(</span><span class="crayon-cn">80</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">function</span><span class="crayon-sy">(</span><span class="crayon-v">conn</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-131">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-132"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">conn</span><span class="crayon-o">:</span><span class="crayon-e">on</span><span class="crayon-sy">(</span><span class="crayon-s">"receive"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">function</span><span class="crayon-sy">(</span><span class="crayon-v">sck</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">payload</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-133"><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-134"><span class="crayon-h">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-135"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-c">-- another function</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-136"><span class="crayon-h">	</span><span class="crayon-r">function</span><span class="crayon-h"> </span><span class="crayon-e">esp_update</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-137"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">mcu_do</span><span class="crayon-o">=</span><span class="crayon-v">string</span><span class="crayon-sy">.</span><span class="crayon-e">sub</span><span class="crayon-sy">(</span><span class="crayon-v">payload</span><span class="crayon-sy">,</span><span class="crayon-v">postparse</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-o">#</span><span class="crayon-v">payload</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-138"><span class="crayon-h">						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-139"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">-- Change color of Voltage according to voltage health table for 12v batteries --</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-140"><span class="crayon-h">		</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-141"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">mcu_do</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">"READ+DC+VOLTAGE"</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-142"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	</span><span class="crayon-v">adc_value</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">adc</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-v">adc_id</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-143"><span class="crayon-h">				</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-144"><span class="crayon-h">				</span><span class="crayon-c">-- Voltage conversion from ADC numbers to Voltage numbers --</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-145"><span class="crayon-h">					</span><span class="crayon-v">ad</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">adc_value</span><span class="crayon-o">*</span><span class="crayon-v">LSB</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-146"><span class="crayon-h">									</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-147"><span class="crayon-h">				</span><span class="crayon-c">-- Truncate the extra decimal values	</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-148"><span class="crayon-h">					</span><span class="crayon-v">adt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">string</span><span class="crayon-sy">.</span><span class="crayon-e">format</span><span class="crayon-sy">(</span><span class="crayon-s">"%02.2f"</span><span class="crayon-sy">,</span><span class="crayon-v">ad</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-149"><span class="crayon-h">					</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-v">adt</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-150"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-151"><span class="crayon-h">				</span><span class="crayon-c">-- If values are above 12.2v then show as GREEN</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-152"><span class="crayon-h">				</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">ad</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-cn">12.2</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-153"><span class="crayon-h">					</span><span class="crayon-v">adc_color</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"#00ff00"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-154"><span class="crayon-h">					</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-155"><span class="crayon-h">				</span><span class="crayon-c">-- If values are below 12.2v and above 11.7v then show as YELLOW</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-156"><span class="crayon-h">				</span><span class="crayon-st">elseif</span><span class="crayon-h"> </span><span class="crayon-v">ad</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-cn">11.7</span><span class="crayon-h"> </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-v">ad</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">12.2</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-157"><span class="crayon-h">					</span><span class="crayon-v">adc_color</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"#ffcc00"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-158"><span class="crayon-h">				</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-159"><span class="crayon-h">				</span><span class="crayon-c">--If values are below 11.7v then show as RED</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-160"><span class="crayon-h">				</span><span class="crayon-st">elseif</span><span class="crayon-h"> </span><span class="crayon-v">ad</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">11.7</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-161"><span class="crayon-h">					</span><span class="crayon-v">adc_color</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"#b30000"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-162"><span class="crayon-h">				</span><span class="crayon-st">end</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-163"><span class="crayon-h">				</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-164"><span class="crayon-h">								</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-165"><span class="crayon-h">				</span><span class="crayon-c">-- The battery charger I use maintains the battery voltage at 13.3v - 13.4v, this is the float charge. Therefore print float charging... instead of voltage level.</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-166"><span class="crayon-h">				</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">ad</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-cn">13.3</span><span class="crayon-h"> </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-v">ad</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">13.4</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-167"><span class="crayon-h">					</span><span class="crayon-v">adt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"Float Charging..."</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-168"><span class="crayon-h">					</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">"Float Charging..."</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-169"><span class="crayon-h">					</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-170"><span class="crayon-h">					</span><span class="crayon-st">elseif</span><span class="crayon-h"> </span><span class="crayon-v">adc_value</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">1023</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-171"><span class="crayon-h">		</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-172"><span class="crayon-h">					</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">"ADC Value&nbsp;&nbsp; : "</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">adc_value</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-173"><span class="crayon-h">					</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">"Real Voltage: "</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ad</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-174"><span class="crayon-h">					</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">"Adjusted Voltage: "</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">adt</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-175"><span class="crayon-h">				</span><span class="crayon-st">end</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-176"><span class="crayon-h">							</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-177"><span class="crayon-h">			</span><span class="crayon-st">end</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-178"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-179"><span class="crayon-h">		</span><span class="crayon-c">-- If turn on web button is clicked</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-180"><span class="crayon-h">		</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">mcu_do</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">"TURN+ON"</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-181"><span class="crayon-h">		</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-182"><span class="crayon-h">				</span><span class="crayon-c">-- Debounce EMI with web control (dont allow interrupt GPIO to turn off relays)--</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-183"><span class="crayon-h">				</span><span class="crayon-v">ignore</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-184"><span class="crayon-h">				</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-185"><span class="crayon-h">				</span><span class="crayon-v">pwm</span><span class="crayon-sy">.</span><span class="crayon-e">setup</span><span class="crayon-sy">(</span><span class="crayon-v">led_pin</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">512</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-186"><span class="crayon-h">				</span><span class="crayon-v">pwm</span><span class="crayon-sy">.</span><span class="crayon-e">start</span><span class="crayon-sy">(</span><span class="crayon-v">led_pin</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-187"><span class="crayon-h">				</span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-v">Relay1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-v">HIGH</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-188"><span class="crayon-h">				</span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-v">Relay2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-v">HIGH</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-189"><span class="crayon-h">				</span><span class="crayon-v">status_relay</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"ON"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-190"><span class="crayon-h">				</span><span class="crayon-v">status_color</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"#00ff00"</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-191"><span class="crayon-h">				</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">"RELAY ON"</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-192"><span class="crayon-h">		</span><span class="crayon-st">end</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-193"><span class="crayon-h">		</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-194"><span class="crayon-h">		</span><span class="crayon-c">--If turn off web button is clicked</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-195"><span class="crayon-h">		</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">mcu_do</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">"TURN+OFF"</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-196"><span class="crayon-h">		</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-197"><span class="crayon-h">				</span><span class="crayon-c">-- Debounce EMI with web control (allow interrupt GPIO to turn off relays)--</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-198"><span class="crayon-h">				</span><span class="crayon-v">ignore</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-199"><span class="crayon-h">				</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-200"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	</span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-v">Relay1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-v">LOW</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-201"><span class="crayon-h">				</span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-v">Relay2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">gpio</span><span class="crayon-sy">.</span><span class="crayon-v">LOW</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-202"><span class="crayon-h">				</span><span class="crayon-v">pwm</span><span class="crayon-sy">.</span><span class="crayon-e">stop</span><span class="crayon-sy">(</span><span class="crayon-v">led_pin</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-203"><span class="crayon-h">				</span><span class="crayon-v">status_relay</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"OFF"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-204"><span class="crayon-h">				</span><span class="crayon-v">status_color</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"#ccccb3"</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-205"><span class="crayon-h">				</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">"RELAY OFF"</span><span class="crayon-sy">)</span><span class="crayon-h">				</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-206"><span class="crayon-h">		</span><span class="crayon-st">end</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-207"><span class="crayon-h">		</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-208"><span class="crayon-h">		</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">mcu_do</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">"CONFIGURE+WIFI"</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-209"><span class="crayon-h">			</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-210"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">ssid</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">string</span><span class="crayon-sy">.</span><span class="crayon-e">sub</span><span class="crayon-sy">(</span><span class="crayon-v">payload</span><span class="crayon-sy">,</span><span class="crayon-v">string</span><span class="crayon-sy">.</span><span class="crayon-e">find</span><span class="crayon-sy">(</span><span class="crayon-v">payload</span><span class="crayon-sy">,</span><span class="crayon-s">"ssid="</span><span class="crayon-sy">)</span><span class="crayon-o">+</span><span class="crayon-cn">5</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-211"><span class="crayon-h">		</span><span class="crayon-v">string</span><span class="crayon-sy">.</span><span class="crayon-e">find</span><span class="crayon-sy">(</span><span class="crayon-v">payload</span><span class="crayon-sy">,</span><span class="crayon-s">"&amp;password"</span><span class="crayon-sy">)</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-212"><span class="crayon-h">		</span><span class="crayon-v">pw</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">string</span><span class="crayon-sy">.</span><span class="crayon-e">sub</span><span class="crayon-sy">(</span><span class="crayon-v">payload</span><span class="crayon-sy">,</span><span class="crayon-v">string</span><span class="crayon-sy">.</span><span class="crayon-e">find</span><span class="crayon-sy">(</span><span class="crayon-v">payload</span><span class="crayon-sy">,</span><span class="crayon-s">"password="</span><span class="crayon-sy">)</span><span class="crayon-o">+</span><span class="crayon-cn">9</span><span class="crayon-sy">,</span><span class="crayon-v">string</span><span class="crayon-sy">.</span><span class="crayon-e">find</span><span class="crayon-sy">(</span><span class="crayon-v">payload</span><span class="crayon-sy">,</span><span class="crayon-s">"&amp;mcu"</span><span class="crayon-sy">)</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-213"><span class="crayon-h">		</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-214"><span class="crayon-h">			</span><span class="crayon-c">--If any wifi config fields are blank then ignore</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-215"><span class="crayon-h">		 	</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">ssid</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">""</span><span class="crayon-h"> </span><span class="crayon-st">or</span><span class="crayon-h"> </span><span class="crayon-v">pw</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">""</span><span class="crayon-h"> </span><span class="crayon-st">then</span><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-216"><span class="crayon-h">			</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">"Empty fields not applying wifi config"</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-217"><span class="crayon-h">			</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-218"><span class="crayon-h">			</span><span class="crayon-c">--If wifi config fields populated then attempt to connect to wifi</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-219"><span class="crayon-h">			</span><span class="crayon-st">elseif</span><span class="crayon-h"> </span><span class="crayon-v">ssid</span><span class="crayon-h"> </span><span class="crayon-o">~</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">""</span><span class="crayon-h"> </span><span class="crayon-st">or</span><span class="crayon-h"> </span><span class="crayon-v">ps</span><span class="crayon-h"> </span><span class="crayon-o">~</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">""</span><span class="crayon-h"> </span><span class="crayon-st">then</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-220"><span class="crayon-h">		</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-221"><span class="crayon-h">			</span><span class="crayon-r">print</span><span class="crayon-sy">(</span><span class="crayon-s">"Connecting to AP:"</span><span class="crayon-sy">,</span><span class="crayon-v">ssid</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-222"><span class="crayon-h">		</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-223"><span class="crayon-h">			</span><span class="crayon-c">--Set ESP to station mode only and to disable the ESP in AP mode</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-224"><span class="crayon-h">			</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-e">setmode</span><span class="crayon-sy">(</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">STATION</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-225"><span class="crayon-h">		</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-226"><span class="crayon-h">			</span><span class="crayon-c">--SSID and PW are case sensitive. If wireless info is not entered case sensitive the ESP will hang up. If the SSID and encryption is incorrect, the ESP will Kernel Panic and just reboot.</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-227"><span class="crayon-h">			</span><span class="crayon-v">wifi</span><span class="crayon-sy">.</span><span class="crayon-v">sta</span><span class="crayon-sy">.</span><span class="crayon-e">config</span><span class="crayon-sy">(</span><span class="crayon-v">ssid</span><span class="crayon-sy">,</span><span class="crayon-v">pw</span><span class="crayon-sy">,</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-228"><span class="crayon-h">		</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-229"><span class="crayon-h">			</span><span class="crayon-c">--Restart ESP in case it hangs on re-connection. This will prevent MCU from being unreachable.</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-230"><span class="crayon-h">			</span><span class="crayon-v">node</span><span class="crayon-sy">.</span><span class="crayon-e">restart</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-231"><span class="crayon-h">		</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-232"><span class="crayon-h">			</span><span class="crayon-c">--After wireless is configured this sets up a static IP as configured in init.lua</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-233"><span class="crayon-h">			</span><span class="crayon-c">--wifi.sta.setip(cfg)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-234"><span class="crayon-h">			</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-235"><span class="crayon-h">			</span><span class="crayon-st">end</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-236"><span class="crayon-h">			</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-237"><span class="crayon-h">			</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-238"><span class="crayon-h">		</span><span class="crayon-st">end</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-239"><span class="crayon-h">		</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-240"><span class="crayon-h">	</span><span class="crayon-st">end</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-241"><span class="crayon-h">		</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-242"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-243"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">--Parse position POST value from header</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-244"><span class="crayon-h">		</span><span class="crayon-v">postparse</span><span class="crayon-o">=</span><span class="crayon-sy">{</span><span class="crayon-v">string</span><span class="crayon-sy">.</span><span class="crayon-e">find</span><span class="crayon-sy">(</span><span class="crayon-v">payload</span><span class="crayon-sy">,</span><span class="crayon-s">"mcu_do="</span><span class="crayon-sy">)</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-245"><span class="crayon-h">		</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-246">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a511a28388576927-247"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">--If POST value exist, run the Functions above</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-248"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">postparse</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-o">~</span><span class="crayon-o">=</span><span class="crayon-r">nil</span><span class="crayon-h"> </span><span class="crayon-st">then</span><span class="crayon-h"> </span><span class="crayon-e">esp_update</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-st">end</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-249"><span class="crayon-h">&nbsp;&nbsp;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-250"><span class="crayon-h">&nbsp;&nbsp;</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-251"><span class="crayon-h">	</span><span class="crayon-c">--New NodeMCU 1.5.4+ firmware fails on older NodeMCU v.9.x multiple send commands, so needed to do a new method to send.</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-252"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">local</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-253">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-254"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;html&gt;\n'</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-255"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;center&gt;\n'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-256"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;head&gt;&lt;meta content="text/html; charset=utf-8"&gt;\n'</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-257"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;title&gt;Battery Charger Control&lt;/title&gt;&lt;/head&gt;\n'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-258"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;body&gt;&lt;h1 style="font-family:verdana;"&gt;Battery Charger Control&lt;/h1&gt;\n'</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-259"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;form action="" method="POST"&gt;\n'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-260"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;table border=\"1\" width=\"400\" bordercolorlight=\"#000000\" bordercolordark=\"#008000\" height=\"137\"&gt;&lt;tr&gt;&lt;td style=\"border-style: solid; border-width: 1px\" width=\"91\" bgcolor=\"#339FFF\" align=\"center\"&gt;&lt;b&gt;'</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-261"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;font face=\"Verdana\" size=\"2\" color=\"#FFFF99\"&gt;BATTERY CHARGER:&lt;/font&gt;&lt;p&gt;&lt;font face=\"Verdana\" size=\"6\" color=\"'</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-v">status_color</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-s">'\"&gt;'</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-v">status_relay</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-s">'&lt;/font&gt;&lt;p&gt;&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-262"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;tr&gt;&lt;td style=\"border-style: solid; border-width: 1px\" width=\"91\" align=\"center\"&gt;&lt;p&gt;&lt;input type="submit" name="mcu_do" value="TURN ON" style="height:100px; width:300px; font-size: 30px;"&gt;&lt;p&gt;&lt;/b&gt;&lt;/font&gt;&lt;/a&gt;&lt;/td&gt;'</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-263"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;tr&gt;&lt;td style=\"border-style: solid; border-width: 1px\" width=\"91\" align=\"center\"&gt;&lt;p&gt;&lt;input type="submit" name="mcu_do" value="TURN OFF" style="height:100px; width:300px; font-size: 30px;"&gt;&lt;p&gt;&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;&lt;font face=\"Verdana\"&gt;&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-264"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;BR&gt;'</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-265"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;table border=\"1\" width=\"400\" bordercolorlight=\"#000000\" bordercolordark=\"#008000\" height=\"137\"&gt;&lt;tr&gt;&lt;td style=\"border-style: solid; border-width: 1px\" width=\"91\" bgcolor=\"#339FFF\" align=\"center\"&gt;&lt;b&gt;'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-266"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;font face=\"Verdana\" size=\"2\" color=\"#FFFF99\"&gt;BATTERY VOLTAGE:&lt;p&gt;&lt;font face=\"Verdana\" size=\"6\" color=\"'</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-v">adc_color</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-s">'"&gt;'</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-v">adt</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-s">'&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;'</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-267"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;tr&gt;&lt;td style=\"border-style: solid; border-width: 1px\" width=\"91\" align=\"center\"&gt;&lt;p&gt;&lt;input type="submit" name="mcu_do" value="READ DC VOLTAGE" style="height:100px; width:300px; font-size: 30px;"&gt;&lt;p&gt;&lt;/b&gt;&lt;/font&gt;&lt;/form&gt;&lt;/td&gt;'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-268"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;table border=\"1\" width=\"400\" bordercolorlight=\"#000000\" bordercolordark=\"#008000\" height=\"137\"&gt;&lt;tr&gt;&lt;td style=\"border-style: solid; border-width: 1px\" width=\"91\" bgcolor=\"#339FFF\" align=\"center\"&gt;&lt;b&gt;'</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-269"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;font face=\"Verdana\" size=\"2\" color=\"#FFFF99\"&gt;WIFI CONFIG&lt;/b&gt;&lt;br&gt;&lt;font face=\"Verdana\" size=\"1\" color=\"#FFFF99\"&gt;NOTE: Characters are CASE SENSITIVE&lt;/font&gt;&lt;/td&gt;&lt;/tr&gt;'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-270"><span class="crayon-h">	</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-271"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;BR&gt;'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-272"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;tr&gt;&lt;td style=\"border-style: solid; border-width: 1px\" width=\"91\" align=\"center\"&gt;&lt;p&gt;&lt;form action="" method="POST"&gt;'</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-273"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;font face=\"Verdana\" size=\"1\"&gt;SSID:&lt;/font&gt;'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-274"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;br&gt;'</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-275"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;input type="text" name="ssid" id="inputtext"&gt;'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-276"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;p&gt;'</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-277"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;font face=\"Verdana\" size=\"1\"&gt;Password:&lt;/font&gt;'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-278"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;br&gt;'</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-279"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;input type="text" name="password" id="inputtext"&gt;'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-280"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;br&gt;'</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-281"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;input type="submit" name="mcu_do" value="CONFIGURE WIFI" id="submit"&gt;&lt;br&gt;&lt;font face=\"Verdana\" size=\"1\"&gt;STATIC IP: 192.168.1.175&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-282"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;/form&gt;'</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-283"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;/center&gt;\n'</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-284"><span class="crayon-h">	</span><span class="crayon-v">response</span><span class="crayon-sy">[</span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;/body&gt;&lt;/html&gt;\n'</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-285"><span class="crayon-h">	</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-286"><span class="crayon-h">	&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-c">-- sends and removes the first element from the 'response' table</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-287"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">local</span><span class="crayon-h"> </span><span class="crayon-r">function</span><span class="crayon-h"> </span><span class="crayon-e">send</span><span class="crayon-sy">(</span><span class="crayon-v">sk</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-288"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-o">#</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-289"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">then</span><span class="crayon-h"> </span><span class="crayon-v">sk</span><span class="crayon-o">:</span><span class="crayon-e">send</span><span class="crayon-sy">(</span><span class="crayon-v">table</span><span class="crayon-sy">.</span><span class="crayon-e">remove</span><span class="crayon-sy">(</span><span class="crayon-v">response</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-290"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">else</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-291"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">sk</span><span class="crayon-o">:</span><span class="crayon-e">close</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-292"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">nil</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-293"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">end</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-294"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">end</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-295">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-296"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">-- triggers the send() function again once the first chunk of data was sent</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-297"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">sck</span><span class="crayon-o">:</span><span class="crayon-e">on</span><span class="crayon-sy">(</span><span class="crayon-s">"sent"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">send</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-298">&nbsp;</div><div class="crayon-line" id="crayon-5832a4a511a28388576927-299"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">send</span><span class="crayon-sy">(</span><span class="crayon-v">sck</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5832a4a511a28388576927-300"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">end</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-5832a4a511a28388576927-301"><span class="crayon-st">end</span><span class="crayon-sy">)</span></div></div></td>
					</tr>
				</tbody></table>
			</div>
		</div>
<!-- [Format Time: 0.0485 seconds] -->
<p>There you have it, a guide which should allow you to have a fully functioning ESP8266 webserver which allows you to control a relay (which controls a battery charger), monitor the voltage of a 12v battery, and configure the wireless settings without needing to upload any new lua scripts. This was tested on a NodeMCU development board v0.9 with NodeMCU version 1.5.4.1.</p>
<h3>Some final thoughts and credit where credit is due</h3>
<p>I’m sure the scripts could be optimized and reduced in size, and I welcome any tweaks or comments to anything i’ve written&nbsp;above. What i’ve essentially done is taken some smoothly written code from all over the internet and adapted it for&nbsp;my purposes. Below is a list of the resources I used to help build this project. They were the few articles that were written in a way where I could understand and also adapt for my own use. I couldn’t have done this project without them.</p>
<h3>TCP/IP Http server with NodeMCU:</h3>
<ul>
<li><a href="http://www.allaboutcircuits.com/projects/how-to-make-an-interactive-tcp-server-nodemcu-on-the-esp8266/" target="_blank">http://www.allaboutcircuits.com/projects/how-to-make-an-interactive-tcp-server-nodemcu-on-the-esp8266/</a> (note that this link was written for NodeMCU firmware v0.9 and needed to be rewritten using the info from the next link below for firmware 1.5.4)</li>
<li><a href="https://nodemcu.readthedocs.io/en/dev/en/modules/net/#netsocketsend" target="_blank">https://nodemcu.readthedocs.io/en/dev/en/modules/net/#netsocketsend</a></li>
</ul>
<h3>Setting up an access point with the ESP8266 or connecting as a client automatically:</h3>
<ul>
<li><a href="http://www.heliansys.com/blog/2015/12/20/provisioning-the-esp8266-onto-a-wifi-network-via-mobile-phone/" target="_blank">http://www.heliansys.com/blog/2015/12/20/provisioning-the-esp8266-onto-a-wifi-network-via-mobile-phone/</a></li>
</ul>
<h3>Voltage Divider info:</h3>
<ul>
<li><a href="https://learn.sparkfun.com/tutorials/voltage-dividers/all?print=1" target="_blank">https://learn.sparkfun.com/tutorials/voltage-dividers/all?print=1</a></li>
<li><a href="https://startingelectronics.org/articles/arduino/measuring-voltage-with-arduino/" target="_blank">https://startingelectronics.org/articles/arduino/measuring-voltage-with-arduino/</a></li>
<li><a href="http://www.esp8266-projects.com/2016/08/esp8266-internal-adc-2-easy-way-example.html" target="_blank">http://www.esp8266-projects.com/2016/08/esp8266-internal-adc-2-easy-way-example.html</a></li>
<li><a href="http://jeelabs.org/2013/05/16/measuring-the-battery-without-draining-it/index.html" target="_blank">http://jeelabs.org/2013/05/16/measuring-the-battery-without-draining-it/index.html</a></li>
</ul>
<p><a href="http://www.adrianandgenese.com/blogger/2016/09/07/nodemcu-esp8266-http-relay-control-with-12v-battery-monitor-and-wifi-configuration/">Read Part 1&nbsp;on how to set up a NodeMCU ESP8266 which provides a web interface for relay control, 12v battery monitor, and wifi configuration</a>.</p>
<div class="tweetthis" style="text-align:left;"><p> <a target="_blank" rel="nofollow" class="tt" href="http://twitter.com/intent/tweet?text=NodeMCU+ESP8266+http+relay+control+with+12v+battery+monitor+and+wifi+configuration+%E2%80%93+Part+2+http%3A%2F%2Fadrianandgenese.com%2Fblogger%2F%3Fp%3D1043" title="Post to Twitter"><img class="nothumb" src="./reconnect if disconnect_files/tt-twitter-micro3.png" alt="Post to Twitter"></a></p></div><div id="wp_fb_like_button" style="margin:5px 0;float:none;height:100px;"><script src="./reconnect if disconnect_files/all.js"></script><fb:like href="http://www.adrianandgenese.com/blogger/2016/09/29/nodemcu-esp8266-http-relay-control-with-12v-battery-monitor-and-wifi-configuration-part-2/" send="true" layout="standard" width="450" show_faces="true" font="arial" action="like" colorscheme="light" class=" fb_iframe_widget" fb-xfbml-state="rendered" fb-iframe-plugin-query="action=like&amp;app_id=&amp;color_scheme=light&amp;container_width=0&amp;font=arial&amp;href=http%3A%2F%2Fwww.adrianandgenese.com%2Fblogger%2F2016%2F09%2F29%2Fnodemcu-esp8266-http-relay-control-with-12v-battery-monitor-and-wifi-configuration-part-2%2F&amp;layout=standard&amp;locale=en_US&amp;sdk=joey&amp;send=true&amp;show_faces=true&amp;width=450"><span style="vertical-align: bottom; width: 450px; height: 20px;"><iframe name="f339eaf1423728c" width="450px" height="1000px" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" title="fb:like Facebook Social Plugin" src="./reconnect if disconnect_files/like.html" style="border: none; visibility: visible; width: 450px; height: 20px;" class=""></iframe></span></fb:like></div>					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
			This entry was posted in <a href="http://www.adrianandgenese.com/blogger/category/computers/" rel="category tag">Computers</a>, <a href="http://www.adrianandgenese.com/blogger/category/hack/" rel="category tag">Hack</a> and tagged <a href="http://www.adrianandgenese.com/blogger/tag/12v/" rel="tag">12v</a>, <a href="http://www.adrianandgenese.com/blogger/tag/12v-deep-cycle/" rel="tag">12v deep cycle</a>, <a href="http://www.adrianandgenese.com/blogger/tag/adc/" rel="tag">adc</a>, <a href="http://www.adrianandgenese.com/blogger/tag/analog-read/" rel="tag">analog read</a>, <a href="http://www.adrianandgenese.com/blogger/tag/battery/" rel="tag">battery</a>, <a href="http://www.adrianandgenese.com/blogger/tag/configure-wifi-using-browser/" rel="tag">configure wifi using browser</a>, <a href="http://www.adrianandgenese.com/blogger/tag/dc/" rel="tag">dc</a>, <a href="http://www.adrianandgenese.com/blogger/tag/esp8266/" rel="tag">esp8266</a>, <a href="http://www.adrianandgenese.com/blogger/tag/http/" rel="tag">http</a>, <a href="http://www.adrianandgenese.com/blogger/tag/led/" rel="tag">led</a>, <a href="http://www.adrianandgenese.com/blogger/tag/monitoring/" rel="tag">monitoring</a>, <a href="http://www.adrianandgenese.com/blogger/tag/nodemcu/" rel="tag">nodemcu</a>, <a href="http://www.adrianandgenese.com/blogger/tag/relay/" rel="tag">relay</a>, <a href="http://www.adrianandgenese.com/blogger/tag/tcp-server/" rel="tag">tcp server</a>, <a href="http://www.adrianandgenese.com/blogger/tag/webpage/" rel="tag">webpage</a>, <a href="http://www.adrianandgenese.com/blogger/tag/webserver/" rel="tag">webserver</a>, <a href="http://www.adrianandgenese.com/blogger/tag/wifi-access-point/" rel="tag">wifi access point</a>, <a href="http://www.adrianandgenese.com/blogger/tag/wifi-client/" rel="tag">wifi client</a> on <a href="http://www.adrianandgenese.com/blogger/2016/09/29/nodemcu-esp8266-http-relay-control-with-12v-battery-monitor-and-wifi-configuration-part-2/" title="7:46 pm" rel="bookmark"><time class="entry-date" datetime="2016-09-29T19:46:07+00:00">September 29, 2016</time></a><span class="by-author"> by <span class="author vcard"><a class="url fn n" href="http://www.adrianandgenese.com/blogger/author/admin/" title="View all posts by Blog Master" rel="author">Blog Master</a></span></span>.								</footer><!-- .entry-meta -->
	</article><!-- #post -->

				<nav class="nav-single">
					<h3 class="assistive-text">Post navigation</h3>
					<span class="nav-previous"><a href="http://www.adrianandgenese.com/blogger/2016/09/07/nodemcu-esp8266-http-relay-control-with-12v-battery-monitor-and-wifi-configuration/" rel="prev"><span class="meta-nav">←</span> NodeMCU ESP8266 http relay control with 12v battery monitor and wifi configuration – Part 1</a></span>
					<span class="nav-next"></span>
				</nav><!-- .nav-single -->

				
<div id="comments" class="comments-area">

	
	
					<div id="respond" class="comment-respond">
			<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="http://www.adrianandgenese.com/blogger/2016/09/29/nodemcu-esp8266-http-relay-control-with-12v-battery-monitor-and-wifi-configuration-part-2/#respond" style="display:none;">Cancel reply</a></small></h3>				<form action="http://www.adrianandgenese.com/blogger/wp-comments-post.php" method="post" id="commentform" class="comment-form">
					<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" aria-required="true" required="required"></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" maxlength="100" aria-describedby="email-notes" aria-required="true" required="required"></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" maxlength="200"></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment"> <input type="hidden" name="comment_post_ID" value="1043" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value="0">
</p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="4d31176cc2"></p><p class="comment-subscription-form"><input type="checkbox" name="subscribe_comments" id="subscribe_comments" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;"> <label class="subscribe-label" id="subscribe-label" for="subscribe_comments">Notify me of follow-up comments by email.</label></p><p class="comment-subscription-form"><input type="checkbox" name="subscribe_blog" id="subscribe_blog" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;"> <label class="subscribe-label" id="subscribe-blog-label" for="subscribe_blog">Notify me of new posts by email.</label></p><p style="display: none;"></p>				<input type="hidden" id="ak_js" name="ak_js" value="1479713985830"></form>
					</div><!-- #respond -->
		
</div><!-- #comments .comments-area -->
			
		</div><!-- #content -->
	</div><!-- #primary -->


			<div id="secondary" class="widget-area" role="complementary">
			<aside id="text-3" class="widget widget_text"><h3 class="widget-title">Welcome</h3>			<div class="textwidget"><center><p align="center"><img border="2" src="./reconnect if disconnect_files/wrench.gif"></p>
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="MPWNSBVJDKDRN">
<input type="image" src="./reconnect if disconnect_files/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="./reconnect if disconnect_files/pixel.gif" width="1" height="1">
</form></center>
</div>
		</aside>		<aside id="recent-posts-5" class="widget widget_recent_entries">		<h3 class="widget-title">Recent Posts</h3>		<ul>
					<li>
				<a href="http://www.adrianandgenese.com/blogger/2016/09/29/nodemcu-esp8266-http-relay-control-with-12v-battery-monitor-and-wifi-configuration-part-2/">NodeMCU ESP8266 http relay control with 12v battery monitor and wifi configuration – Part 2</a>
						</li>
					<li>
				<a href="http://www.adrianandgenese.com/blogger/2016/09/07/nodemcu-esp8266-http-relay-control-with-12v-battery-monitor-and-wifi-configuration/">NodeMCU ESP8266 http relay control with 12v battery monitor and wifi configuration – Part 1</a>
						</li>
					<li>
				<a href="http://www.adrianandgenese.com/blogger/2016/07/18/diy-metal-detector-coil-housing-build/">DIY Metal detector coil housing build</a>
						</li>
					<li>
				<a href="http://www.adrianandgenese.com/blogger/2012/07/20/how-to-build-a-cheap-light-but-sturdy-metal-detector-straight-shaft/">How to build a cheap, light, but sturdy metal detector straight shaft</a>
						</li>
					<li>
				<a href="http://www.adrianandgenese.com/blogger/2012/07/13/how-to-build-a-surf-pi-1-2-pulse-induction-metal-detector-from-a-diy-kit/">How to build a Surf PI 1.2 pulse induction metal detector from a DIY kit.</a>
						</li>
					<li>
				<a href="http://www.adrianandgenese.com/blogger/2011/09/12/how-to-build-an-better-mouse-trap-which-catches-mice-like-it-was-going-out-of-style/">How to catch mice with just a glue trap and a cardboard box. Truly the best mouse trap I have seen.</a>
						</li>
					<li>
				<a href="http://www.adrianandgenese.com/blogger/2011/04/13/asterisk-and-esmtp-not-working-unless-first-run-from-console/">Asterisk and esmtp (or sendmail) not sending voicemail emails unless first run manually from console</a>
						</li>
					<li>
				<a href="http://www.adrianandgenese.com/blogger/2011/04/06/how-to-get-rid-of-acne-without-going-to-the-dermatologist/">How to get rid of acne, pimples, or blemishes without going to the dermatologist</a>
						</li>
					<li>
				<a href="http://www.adrianandgenese.com/blogger/2011/03/21/configuring-the-obi110-to-replace-a-linksys-spa-3102-as-a-google-voice-and-pstn-gateway-using-asterisk-1-4/">Configuring the OBiHai OBi110 to replace a linksys spa-3102 as a google voice and pstn gateway using asterisk 1.4</a>
						</li>
					<li>
				<a href="http://www.adrianandgenese.com/blogger/2011/02/16/how-to-upgrade-or-convert-a-cisco-ip-79xx-7940-7960-794x-796x-797x-phone-to-sip-or-sccp/">How to load SIP or SCCP on a Cisco 7940 7960 7941 7961 Ip Phone or fix a protocol application invalid message</a>
						</li>
				</ul>
		</aside>		<aside id="google-translator" class="widget widget_google_translate"><h3 class="widget-title">Translate</h3><div id="widget_google_translate"><ul><form action="http://translate.google.com/translate"><input name="u" id="url" value="http://www.adrianandgenese.com/blogger/2016/09/29/nodemcu-esp8266-http-relay-control-with-12v-battery-monitor-and-wifi-configuration-part-2/" type="hidden"><input name="sl" value="en" type="hidden">Translate to:<br><select name="tl" style="width:auto"><option value="ar">Arabic</option><option value="bg">Bulgarian</option><option value="ca">Catalan</option><option value="zh-CN">Chinese (Simplified)</option><option value="zh-TW">Chinese (Traditional)</option><option value="hr">Croatian</option><option value="cs">Czech</option><option value="da">Danish</option><option value="nl">Dutch</option><option value="en" selected="">English</option><option value="tl">Filipino</option><option value="fi">Finnish</option><option value="fr">French</option><option value="de">German</option><option value="el">Greek</option><option value="iw">Hebrew</option><option value="hi">Hindi</option><option value="id">Indonesian</option><option value="it">Italian</option><option value="ja">Japanese</option><option value="ko">Korean</option><option value="lv">Latvian</option><option value="lt">Lithuanian</option><option value="no">Norwegian</option><option value="pl">Polish</option><option value="pt">Portuguese</option><option value="ro">Romanian</option><option value="ru">Russian</option><option value="sr">Serbian</option><option value="sk">Slovak</option><option value="sl">Slovenian</option><option value="es">Spanish</option><option value="sv">Swedish</option><option value="uk">Ukrainian</option><option value="vi">Vietnamese</option></select><br><input name="hl" value="en" type="hidden"><input name="ie" value="UTF-8" type="hidden"><script type="text/javascript">
		var thestr = window.location.href;
		var mystrlen = 30;
		var sresult = thestr.indexOf( "www.adrianandgenese.com" );
		if( sresult == -1 || sresult >= mystrlen) {
			document.write( '<input value="Translate" type="submit" disabled /> ' );
			document.write( '<a href="" target="_top" >return to original</a>' );
		}else{
			document.write( '<input value="Translate" type="submit" />' );
		}
		</script><input value="Translate" type="submit"></form><div class="google_translate_footer" style="text-align:right; font-size:9px;color: #888;">Powered by <a href="http://translate.google.com/" target="_blank">Google Translate</a>.</div></ul></div></aside>		</div><!-- #secondary -->
		</div><!-- #main .wrapper -->
	<footer id="colophon" role="contentinfo">
		<div class="site-info">
						<a href="https://wordpress.org/" title="Semantic Personal Publishing Platform">Proudly powered by WordPress</a>
		</div><!-- .site-info -->
	</footer><!-- #colophon -->
</div><!-- #page -->

<!-- Powered by WPtouch: 4.3.6 -->	<div style="display:none">
	</div>
<script type="text/javascript" src="./reconnect if disconnect_files/form.js"></script>

<script type="text/javascript" src="./reconnect if disconnect_files/devicepx-jetpack.js"></script>
<script type="text/javascript" src="./reconnect if disconnect_files/gprofiles.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type="text/javascript" src="./reconnect if disconnect_files/wpgroho.js"></script>
<script type="text/javascript" src="./reconnect if disconnect_files/navigation.js"></script>
<script type="text/javascript" src="./reconnect if disconnect_files/wp-embed.min.js"></script>
<script type="text/javascript" src="./reconnect if disconnect_files/e-201647.js" async="" defer=""></script>
<script type="text/javascript">
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:4.3.2',blog:'6492001',post:'1043',tz:'-8',srv:'www.adrianandgenese.com'} ]);
	_stq.push([ 'clickTrackerInit', '6492001', '1043' ]);
</script>


<!-- Dynamic page generated in 26.763 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2016-11-20 23:39:42 -->

<!-- Compression = gzip --><div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="fb_xdm_frame_http" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" id="fb_xdm_frame_http" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="./reconnect if disconnect_files/fTmIQU3LxvB.html" style="border: none;"></iframe><iframe name="fb_xdm_frame_https" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" id="fb_xdm_frame_https" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="./reconnect if disconnect_files/fTmIQU3LxvB(1).html" style="border: none;"></iframe></div></div></div><img src="./reconnect if disconnect_files/g.gif" alt=":)" width="6" height="5" id="wpstats"><script id="PIN_1479713987220.f.callback[0]" type="text/javascript" charset="utf-8" src="./reconnect if disconnect_files/saved_resource"></script></body></html>